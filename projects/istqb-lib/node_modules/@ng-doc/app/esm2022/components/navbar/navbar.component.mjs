import { __decorate, __metadata } from "tslib";
import { AsyncPipe, NgIf } from '@angular/common';
import { afterNextRender, ChangeDetectionStrategy, ChangeDetectorRef, Component, HostBinding, Inject, Input, NgZone, } from '@angular/core';
import { NgDocSearchComponent } from '@ng-doc/app/components/search';
import { NgDocSidebarService } from '@ng-doc/app/services';
import { NgDocButtonIconComponent, NgDocIconComponent, NgDocLetDirective, ngDocZoneOptimize, } from '@ng-doc/ui-kit';
import { WINDOW } from '@ng-web-apis/common';
import { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';
import { PolymorpheusModule } from '@tinkoff/ng-polymorpheus';
import { combineLatest, fromEvent } from 'rxjs';
import { distinctUntilChanged, map, startWith } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@ng-doc/app/services";
import * as i2 from "@tinkoff/ng-polymorpheus";
/**
 * Navbar component for ng-doc application
 */
let NgDocNavbarComponent = class NgDocNavbarComponent {
    constructor(window, ngZone, changeDetectorRef, sidebarService) {
        this.window = window;
        this.ngZone = ngZone;
        this.changeDetectorRef = changeDetectorRef;
        this.sidebarService = sidebarService;
        /**
         * Content for left side of navbar
         */
        this.leftContent = '';
        /**
         * Content for center side of navbar
         */
        this.centerContent = '';
        /**
         * Content for right side of navbar
         */
        this.rightContent = '';
        /**
         * Show search input
         */
        this.search = true;
        /**
         * Show hamburger button
         */
        this.hamburger = true;
        /**
         * Use glass effect for navbar
         */
        this.glassEffect = true;
        /**
         * Indicates if navbar has shadow
         */
        this.hasShadow = false;
        afterNextRender(() => {
            combineLatest([
                fromEvent(this.window, 'scroll').pipe(map((e) => (e.target?.scrollingElement?.scrollTop ?? 0) > 0), distinctUntilChanged(), startWith(false), ngDocZoneOptimize(this.ngZone)),
                this.sidebarService.isMobileMode(),
                this.sidebarService.isExpanded(),
            ])
                .pipe(map(([scrolled, isMobileMode, isExpanded]) => scrolled || (isMobileMode && isExpanded)), untilDestroyed(this))
                .subscribe((hasShadow) => {
                this.hasShadow = hasShadow;
                this.changeDetectorRef.markForCheck();
            });
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.1.0", ngImport: i0, type: NgDocNavbarComponent, deps: [{ token: WINDOW }, { token: i0.NgZone }, { token: i0.ChangeDetectorRef }, { token: i1.NgDocSidebarService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.1.0", type: NgDocNavbarComponent, isStandalone: true, selector: "ng-doc-navbar", inputs: { leftContent: "leftContent", centerContent: "centerContent", rightContent: "rightContent", search: "search", hamburger: "hamburger", glassEffect: "glassEffect" }, host: { attributes: { "ngSkipHydration": "true" }, properties: { "attr.data-glass-effect": "this.glassEffect", "class.has-shadow": "this.hasShadow" } }, ngImport: i0, template: "<div class=\"navbar-container\" *ngDocLet=\"sidebarService.isMobileMode() | async as isMobileMode\">\n\t<div class=\"ng-doc-navbar-left\">\n\t\t<ng-container *polymorpheusOutlet=\"leftContent\"></ng-container>\n\t</div>\n\t<div class=\"ng-doc-navbar-center\">\n\t\t<ng-container *polymorpheusOutlet=\"centerContent\"></ng-container>\n\t\t@if (search && !isMobileMode) {\n\t\t<ng-doc-search></ng-doc-search>\n\t\t}\n\t</div>\n\t<div class=\"ng-doc-navbar-right\">\n\t\t@if (search && isMobileMode) {\n\t\t<ng-doc-search mod=\"icon\"></ng-doc-search>\n\t\t}\n\t\t<ng-container *polymorpheusOutlet=\"rightContent\"></ng-container>\n\t\t<button\n\t\t\tclass=\"ng-doc-menu\"\n\t\t\t*ngIf=\"isMobileMode && hamburger\"\n\t\t\tng-doc-button-icon\n\t\t\tsize=\"large\"\n\t\t\t(click)=\"sidebarService.toggle()\">\n\t\t\t<ng-doc-icon icon=\"menu\" [size]=\"24\"></ng-doc-icon>\n\t\t</button>\n\t</div>\n</div>\n", styles: [":host{position:relative;display:flex;justify-content:center;height:100%;transition:var(--ng-doc-transition) box-shadow}:host:not([data-glass-effect=false]){-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}:host:not([data-glass-effect=false]){position:relative}:host:not([data-glass-effect=false]):before{content:\"\";position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--ng-doc-navbar-background);opacity:.6;border-radius:inherit;overflow:hidden;pointer-events:none}@supports not ((-webkit-backdrop-filter: none) or (backdrop-filter: none)){:host{background-color:var(--ng-doc-navbar-background)}}:host[data-glass-effect=false]{background-color:var(--ng-doc-navbar-background)}:host.has-shadow{box-shadow:var(--ng-doc-shadow-color) 0 5px 20px -5px}:host .navbar-container{display:flex;height:100%;width:100%;padding:0 var(--ng-doc-navbar-horizontal-padding);z-index:10;max-width:var(--ng-doc-app-max-width)}:host .ng-doc-navbar-left,:host .ng-doc-navbar-center,:host .ng-doc-navbar-right{display:flex;align-items:center}:host .ng-doc-navbar-left{justify-content:flex-start;width:100%;max-width:var(--ng-doc-navbar-left-width)}:host .ng-doc-navbar-center{padding:0 var(--ng-doc-app-horizontal-padding);justify-content:flex-start;max-width:calc(100% - var(--ng-doc-toc-width))}:host .ng-doc-navbar-right{justify-content:flex-end;margin-left:auto}:host .ng-doc-menu{margin-left:calc(var(--ng-doc-base-gutter) * 2)}\n"], dependencies: [{ kind: "directive", type: NgDocLetDirective, selector: "[ngDocLet]", inputs: ["ngDocLet"] }, { kind: "ngmodule", type: PolymorpheusModule }, { kind: "directive", type: i2.PolymorpheusOutletDirective, selector: "[polymorpheusOutlet]", inputs: ["polymorpheusOutlet", "polymorpheusOutletContext"] }, { kind: "directive", type: NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: NgDocSearchComponent, selector: "ng-doc-search", inputs: ["mod"] }, { kind: "component", type: NgDocButtonIconComponent, selector: "button[ng-doc-button-icon], a[ng-doc-button-icon]", inputs: ["size", "rounded"] }, { kind: "component", type: NgDocIconComponent, selector: "ng-doc-icon", inputs: ["icon", "customIcon", "size"] }, { kind: "pipe", type: AsyncPipe, name: "async" }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
};
NgDocNavbarComponent = __decorate([
    UntilDestroy(),
    __metadata("design:paramtypes", [Window,
        NgZone,
        ChangeDetectorRef,
        NgDocSidebarService])
], NgDocNavbarComponent);
export { NgDocNavbarComponent };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.1.0", ngImport: i0, type: NgDocNavbarComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ng-doc-navbar', changeDetection: ChangeDetectionStrategy.OnPush, standalone: true, imports: [
                        NgDocLetDirective,
                        PolymorpheusModule,
                        NgIf,
                        NgDocSearchComponent,
                        NgDocButtonIconComponent,
                        NgDocIconComponent,
                        AsyncPipe,
                    ], host: { ngSkipHydration: 'true' }, template: "<div class=\"navbar-container\" *ngDocLet=\"sidebarService.isMobileMode() | async as isMobileMode\">\n\t<div class=\"ng-doc-navbar-left\">\n\t\t<ng-container *polymorpheusOutlet=\"leftContent\"></ng-container>\n\t</div>\n\t<div class=\"ng-doc-navbar-center\">\n\t\t<ng-container *polymorpheusOutlet=\"centerContent\"></ng-container>\n\t\t@if (search && !isMobileMode) {\n\t\t<ng-doc-search></ng-doc-search>\n\t\t}\n\t</div>\n\t<div class=\"ng-doc-navbar-right\">\n\t\t@if (search && isMobileMode) {\n\t\t<ng-doc-search mod=\"icon\"></ng-doc-search>\n\t\t}\n\t\t<ng-container *polymorpheusOutlet=\"rightContent\"></ng-container>\n\t\t<button\n\t\t\tclass=\"ng-doc-menu\"\n\t\t\t*ngIf=\"isMobileMode && hamburger\"\n\t\t\tng-doc-button-icon\n\t\t\tsize=\"large\"\n\t\t\t(click)=\"sidebarService.toggle()\">\n\t\t\t<ng-doc-icon icon=\"menu\" [size]=\"24\"></ng-doc-icon>\n\t\t</button>\n\t</div>\n</div>\n", styles: [":host{position:relative;display:flex;justify-content:center;height:100%;transition:var(--ng-doc-transition) box-shadow}:host:not([data-glass-effect=false]){-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}:host:not([data-glass-effect=false]){position:relative}:host:not([data-glass-effect=false]):before{content:\"\";position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--ng-doc-navbar-background);opacity:.6;border-radius:inherit;overflow:hidden;pointer-events:none}@supports not ((-webkit-backdrop-filter: none) or (backdrop-filter: none)){:host{background-color:var(--ng-doc-navbar-background)}}:host[data-glass-effect=false]{background-color:var(--ng-doc-navbar-background)}:host.has-shadow{box-shadow:var(--ng-doc-shadow-color) 0 5px 20px -5px}:host .navbar-container{display:flex;height:100%;width:100%;padding:0 var(--ng-doc-navbar-horizontal-padding);z-index:10;max-width:var(--ng-doc-app-max-width)}:host .ng-doc-navbar-left,:host .ng-doc-navbar-center,:host .ng-doc-navbar-right{display:flex;align-items:center}:host .ng-doc-navbar-left{justify-content:flex-start;width:100%;max-width:var(--ng-doc-navbar-left-width)}:host .ng-doc-navbar-center{padding:0 var(--ng-doc-app-horizontal-padding);justify-content:flex-start;max-width:calc(100% - var(--ng-doc-toc-width))}:host .ng-doc-navbar-right{justify-content:flex-end;margin-left:auto}:host .ng-doc-menu{margin-left:calc(var(--ng-doc-base-gutter) * 2)}\n"] }]
        }], ctorParameters: () => [{ type: Window, decorators: [{
                    type: Inject,
                    args: [WINDOW]
                }] }, { type: i0.NgZone }, { type: i0.ChangeDetectorRef }, { type: i1.NgDocSidebarService }], propDecorators: { leftContent: [{
                type: Input
            }], centerContent: [{
                type: Input
            }], rightContent: [{
                type: Input
            }], search: [{
                type: Input
            }], hamburger: [{
                type: Input
            }], glassEffect: [{
                type: Input
            }, {
                type: HostBinding,
                args: ['attr.data-glass-effect']
            }], hasShadow: [{
                type: HostBinding,
                args: ['class.has-shadow']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmF2YmFyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvYXBwL2NvbXBvbmVudHMvbmF2YmFyL25hdmJhci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL2FwcC9jb21wb25lbnRzL25hdmJhci9uYXZiYXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDbEQsT0FBTyxFQUNOLGVBQWUsRUFDZix1QkFBdUIsRUFDdkIsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxXQUFXLEVBQ1gsTUFBTSxFQUNOLEtBQUssRUFDTCxNQUFNLEdBQ04sTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDckUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDM0QsT0FBTyxFQUNOLHdCQUF3QixFQUV4QixrQkFBa0IsRUFDbEIsaUJBQWlCLEVBQ2pCLGlCQUFpQixHQUNqQixNQUFNLGdCQUFnQixDQUFDO0FBQ3hCLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUM3QyxPQUFPLEVBQUUsWUFBWSxFQUFFLGNBQWMsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3JFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzlELE9BQU8sRUFBRSxhQUFhLEVBQUUsU0FBUyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2hELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7QUFFdEU7O0dBRUc7QUFtQkksSUFBTSxvQkFBb0IsR0FBMUIsTUFBTSxvQkFBb0I7SUE0Q2hDLFlBRWtCLE1BQWMs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Q29udGVudCI6WyJpbXBvcnQgeyBBc3luY1BpcGUsIE5nSWYgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHtcblx0YWZ0ZXJOZXh0UmVuZGVyLFxuXHRDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcblx0Q2hhbmdlRGV0ZWN0b3JSZWYsXG5cdENvbXBvbmVudCxcblx0SG9zdEJpbmRpbmcsXG5cdEluamVjdCxcblx0SW5wdXQsXG5cdE5nWm9uZSxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOZ0RvY1NlYXJjaENvbXBvbmVudCB9IGZyb20gJ0BuZy1kb2MvYXBwL2NvbXBvbmVudHMvc2VhcmNoJztcbmltcG9ydCB7IE5nRG9jU2lkZWJhclNlcnZpY2UgfSBmcm9tICdAbmctZG9jL2FwcC9zZXJ2aWNlcyc7XG5pbXBvcnQge1xuXHROZ0RvY0J1dHRvbkljb25Db21wb25lbnQsXG5cdE5nRG9jQ29udGVudCxcblx0TmdEb2NJY29uQ29tcG9uZW50LFxuXHROZ0RvY0xldERpcmVjdGl2ZSxcblx0bmdEb2Nab25lT3B0aW1pemUsXG59IGZyb20gJ0BuZy1kb2MvdWkta2l0JztcbmltcG9ydCB7IFdJTkRPVyB9IGZyb20gJ0BuZy13ZWItYXBpcy9jb21tb24nO1xuaW1wb3J0IHsgVW50aWxEZXN0cm95LCB1bnRpbERlc3Ryb3llZCB9IGZyb20gJ0BuZ25lYXQvdW50aWwtZGVzdHJveSc7XG5pbXBvcnQgeyBQb2x5bW9ycGhldXNNb2R1bGUgfSBmcm9tICdAdGlua29mZi9uZy1wb2x5bW9ycGhldXMnO1xuaW1wb3J0IHsgY29tYmluZUxhdGVzdCwgZnJvbUV2ZW50IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBkaXN0aW5jdFVudGlsQ2hhbmdlZCwgbWFwLCBzdGFydFdpdGggfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbi8qKlxuICogTmF2YmFyIGNvbXBvbmVudCBmb3IgbmctZG9jIGFwcGxpY2F0aW9uXG4gKi9cbkBDb21wb25lbnQoe1xuXHRzZWxlY3RvcjogJ25nLWRvYy1uYXZiYXInLFxuXHR0ZW1wbGF0ZVVybDogJy4vbmF2YmFyLmNvbXBvbmVudC5odG1sJyxcblx0c3R5bGVVcmxzOiBbJy4vbmF2YmFyLmNvbXBvbmVudC5zY3NzJ10sXG5cdGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuXHRzdGFuZGFsb25lOiB0cnVlLFxuXHRpbXBvcnRzOiBbXG5cdFx0TmdEb2NMZXREaXJlY3RpdmUsXG5cdFx0UG9seW1vcnBoZXVzTW9kdWxlLFxuXHRcdE5nSWYsXG5cdFx0TmdEb2NTZWFyY2hDb21wb25lbnQsXG5cdFx0TmdEb2NCdXR0b25JY29uQ29tcG9uZW50LFxuXHRcdE5nRG9jSWNvbkNvbXBvbmVudCxcblx0XHRBc3luY1BpcGUsXG5cdF0sXG5cdGhvc3Q6IHsgbmdTa2lwSHlkcmF0aW9uOiAndHJ1ZScgfSxcbn0pXG5AVW50aWxEZXN0cm95KClcbmV4cG9ydCBjbGFzcyBOZ0RvY05hdmJhckNvbXBvbmVudCB7XG5cdC8qKlxuXHQgKiBDb250ZW50IGZvciBsZWZ0IHNpZGUgb2YgbmF2YmFyXG5cdCAqL1xuXHRASW5wdXQoKVxuXHRsZWZ0Q29udGVudDogTmdEb2NDb250ZW50ID0gJyc7XG5cblx0LyoqXG5cdCAqIENvbnRlbnQgZm9yIGNlbnRlciBzaWRlIG9mIG5hdmJhclxuXHQgKi9cblx0QElucHV0KClcblx0Y2VudGVyQ29udGVudDogTmdEb2NDb250ZW50ID0gJyc7XG5cblx0LyoqXG5cdCAqIENvbnRlbnQgZm9yIHJpZ2h0IHNpZGUgb2YgbmF2YmFyXG5cdCAqL1xuXHRASW5wdXQoKVxuXHRyaWdodENvbnRlbnQ6IE5nRG9jQ29udGVudCA9ICcnO1xuXG5cdC8qKlxuXHQgKiBTaG93IHNlYXJjaCBpbnB1dFxuXHQgKi9cblx0QElucHV0KClcblx0c2VhcmNoOiBib29sZWFuID0gdHJ1ZTtcblxuXHQvKipcblx0ICogU2hvdyBoYW1idXJnZXIgYnV0dG9uXG5cdCAqL1xuXHRASW5wdXQoKVxuXHRoYW1idXJnZXI6IGJvb2xlYW4gPSB0cnVlO1xuXG5cdC8qKlxuXHQgKiBVc2UgZ2xhc3MgZWZmZWN0IGZvciBuYXZiYXJcblx0ICovXG5cdEBJbnB1dCgpXG5cdEBIb3N0QmluZGluZygnYXR0ci5kYXRhLWdsYXNzLWVmZmVjdCcpXG5cdGdsYXNzRWZmZWN0OiBib29sZWFuID0gdHJ1ZTtcblxuXHQvKipcblx0ICogSW5kaWNhdGVzIGlmIG5hdmJhciBoYXMgc2hhZG93XG5cdCAqL1xuXHRASG9zdEJpbmRpbmcoJ2NsYXNzLmhhcy1zaGFkb3cnKVxuXHRoYXNTaGFkb3c6IGJvb2xlYW4gPSBmYWxzZTtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRASW5qZWN0KFdJTkRPVylcblx0XHRwcml2YXRlIHJlYWRvbmx5IHdpbmRvdzogV2luZG93LFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgbmdab25lOiBOZ1pvbmUsXG5cdFx0cHJpdmF0ZSByZWFkb25seSBjaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG5cdFx0cHJvdGVjdGVkIHJlYWRvbmx5IHNpZGViYXJTZXJ2aWNlOiBOZ0RvY1NpZGViYXJTZXJ2aWNlLFxuXHQpIHtcblx0XHRhZnRlck5leHRSZW5kZXIoKCkgPT4ge1xuXHRcdFx0Y29tYmluZUxhdGVzdChbXG5cdFx0XHRcdGZyb21FdmVudCh0aGlzLndpbmRvdywgJ3Njcm9sbCcpLnBpcGUoXG5cdFx0XHRcdFx0bWFwKChlOiBFdmVudCkgPT4gKChlLnRhcmdldCBhcyBEb2N1bWVudCk/LnNjcm9sbGluZ0VsZW1lbnQ/LnNjcm9sbFRvcCA/PyAwKSA+IDApLFxuXHRcdFx0XHRcdGRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG5cdFx0XHRcdFx0c3RhcnRXaXRoKGZhbHNlKSxcblx0XHRcdFx0XHRuZ0RvY1pvbmVPcHRpbWl6ZSh0aGlzLm5nWm9uZSksXG5cdFx0XHRcdCksXG5cdFx0XHRcdHRoaXMuc2lkZWJhclNlcnZpY2UuaXNNb2JpbGVNb2RlKCksXG5cdFx0XHRcdHRoaXMuc2lkZWJhclNlcnZpY2UuaXNFeHBhbmRlZCgpLFxuXHRcdFx0XSlcblx0XHRcdFx0LnBpcGUoXG5cdFx0XHRcdFx0bWFwKFxuXHRcdFx0XHRcdFx0KFtzY3JvbGxlZCwgaXNNb2JpbGVNb2RlLCBpc0V4cGFuZGVkXTogW2Jvb2xlYW4sIGJvb2xlYW4sIGJvb2xlYW5dKSA9PlxuXHRcdFx0XHRcdFx0XHRzY3JvbGxlZCB8fCAoaXNNb2JpbGVNb2RlICYmIGlzRXhwYW5kZWQpLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0dW50aWxEZXN0cm95ZWQodGhpcyksXG5cdFx0XHRcdClcblx0XHRcdFx0LnN1YnNjcmliZSgoaGFzU2hhZG93OiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5oYXNTaGFkb3cgPSBoYXNTaGFkb3c7XG5cdFx0XHRcdFx0dGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJuYXZiYXItY29udGFpbmVyXCIgKm5nRG9jTGV0PVwic2lkZWJhclNlcnZpY2UuaXNNb2JpbGVNb2RlKCkgfCBhc3luYyBhcyBpc01vYmlsZU1vZGVcIj5cblx0PGRpdiBjbGFzcz1cIm5nLWRvYy1uYXZiYXItbGVmdFwiPlxuXHRcdDxuZy1jb250YWluZXIgKnBvbHltb3JwaGV1c091dGxldD1cImxlZnRDb250ZW50XCI+PC9uZy1jb250YWluZXI+XG5cdDwvZGl2PlxuXHQ8ZGl2IGNsYXNzPVwibmctZG9jLW5hdmJhci1jZW50ZXJcIj5cblx0XHQ8bmctY29udGFpbmVyICpwb2x5bW9ycGhldXNPdXRsZXQ9XCJjZW50ZXJDb250ZW50XCI+PC9uZy1jb250YWluZXI+XG5cdFx0QGlmIChzZWFyY2ggJiYgIWlzTW9iaWxlTW9kZSkge1xuXHRcdDxuZy1kb2Mtc2VhcmNoPjwvbmctZG9jLXNlYXJjaD5cblx0XHR9XG5cdDwvZGl2PlxuXHQ8ZGl2IGNsYXNzPVwibmctZG9jLW5hdmJhci1yaWdodFwiPlxuXHRcdEBpZiAoc2VhcmNoICYmIGlzTW9iaWxlTW9kZSkge1xuXHRcdDxuZy1kb2Mtc2VhcmNoIG1vZD1cImljb25cIj48L25nLWRvYy1zZWFyY2g+XG5cdFx0fVxuXHRcdDxuZy1jb250YWluZXIgKnBvbHltb3JwaGV1c091dGxldD1cInJpZ2h0Q29udGVudFwiPjwvbmctY29udGFpbmVyPlxuXHRcdDxidXR0b25cblx0XHRcdGNsYXNzPVwibmctZG9jLW1lbnVcIlxuXHRcdFx0Km5nSWY9XCJpc01vYmlsZU1vZGUgJiYgaGFtYnVyZ2VyXCJcblx0XHRcdG5nLWRvYy1idXR0b24taWNvblxuXHRcdFx0c2l6ZT1cImxhcmdlXCJcblx0XHRcdChjbGljayk9XCJzaWRlYmFyU2VydmljZS50b2dnbGUoKVwiPlxuXHRcdFx0PG5nLWRvYy1pY29uIGljb249XCJtZW51XCIgW3NpemVdPVwiMjRcIj48L25nLWRvYy1pY29uPlxuXHRcdDwvYnV0dG9uPlxuXHQ8L2Rpdj5cbjwvZGl2PlxuIl19