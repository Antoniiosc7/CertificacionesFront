import { asArray } from '@ng-doc/core/helpers/as-array';
/**
 * Generate table of contents, only for headings with id
 * @param container
 * @param headings
 */
export function generateToc(container) {
    const headings = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
    const headingElements = Array.from(container.querySelectorAll(headings.join(', '))).filter((heading) => heading.id);
    const levels = asArray(new Set(headingElements.map(levelFromTagName).sort()));
    return headingElements.reduce((map, heading) => {
        const headingLevel = levelFromTagName(heading);
        const anchor = heading.querySelector('a.ng-doc-header-link');
        if (anchor) {
            map.push({
                title: heading.textContent?.trim() ?? '',
                element: heading,
                path: anchor.pathname,
                hash: anchor.hash.replace('#', ''),
                level: levels.indexOf(headingLevel) + 1,
            });
        }
        return map;
    }, []);
}
/**
 *
 * @param heading
 */
function levelFromTagName(heading) {
    return Number(heading.tagName.toLowerCase().replace(/[a-z]*/g, '') || 1);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGUtdG9jLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbGlicy9hcHAvaGVscGVycy9nZW5lcmF0ZS10b2MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBR3hEOzs7O0dBSUc7QUFDSCxNQUFNLFVBQVUsV0FBVyxDQUFDLFNBQXNCO0lBQ2pELE1BQU0sUUFBUSxHQUFtQixDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFFdEUsTUFBTSxlQUFlLEdBQXlCLEtBQUssQ0FBQyxJQUFJLENBQ3ZELFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBcUIsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUNuRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQTJCLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUV0RCxNQUFNLE1BQU0sR0FBYSxPQUFPLENBQUMsSUFBSSxHQUFHLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztJQUV4RixPQUFPLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFtQixFQUFFLE9BQTJCLEVBQUUsRUFBRTtRQUNsRixNQUFNLFlBQVksR0FBVyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN2RCxNQUFNLE1BQU0sR0FDWCxPQUFPLENBQUMsYUFBYSxDQUFvQixzQkFBc0IsQ0FBQyxDQUFDO1FBRWxFLElBQUksTUFBTSxFQUFFLENBQUM7WUFDWixHQUFHLENBQUMsSUFBSSxDQUFDO2dCQUNSLEtBQUssRUFBRSxPQUFPLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUU7Z0JBQ3hDLE9BQU8sRUFBRSxPQUFPO2dCQUNoQixJQUFJLEVBQUUsTUFBTSxDQUFDLFFBQVE7Z0JBQ3JCLElBQUksRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDO2dCQUNsQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDO2FBQ3ZDLENBQUMsQ0FBQztRQUNKLENBQUM7UUFFRCxPQUFPLEdBQUcsQ0FBQztJQUNaLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNSLENBQUM7QUFFRDs7O0dBR0c7QUFDSCxTQUFTLGdCQUFnQixDQUFDLE9BQTJCO0lBQ3BELE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUMxRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmdEb2NUb2NJdGVtIH0gZnJvbSAnQG5nLWRvYy9hcHAvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBhc0FycmF5IH0gZnJvbSAnQG5nLWRvYy9jb3JlL2hlbHBlcnMvYXMtYXJyYXknO1xuaW1wb3J0IHsgTmdEb2NIZWFkaW5nIH0gZnJvbSAnQG5nLWRvYy9jb3JlL3R5cGVzJztcblxuLyoqXG4gKiBHZW5lcmF0ZSB0YWJsZSBvZiBjb250ZW50cywgb25seSBmb3IgaGVhZGluZ3Mgd2l0aCBpZFxuICogQHBhcmFtIGNvbnRhaW5lclxuICogQHBhcmFtIGhlYWRpbmdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVRvYyhjb250YWluZXI6IEhUTUxFbGVtZW50KTogTmdEb2NUb2NJdGVtW10ge1xuXHRjb25zdCBoZWFkaW5nczogTmdEb2NIZWFkaW5nW10gPSBbJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2J107XG5cblx0Y29uc3QgaGVhZGluZ0VsZW1lbnRzOiBIVE1MSGVhZGluZ0VsZW1lbnRbXSA9IEFycmF5LmZyb20oXG5cdFx0Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEhlYWRpbmdFbGVtZW50PihoZWFkaW5ncy5qb2luKCcsICcpKSxcblx0KS5maWx0ZXIoKGhlYWRpbmc6IEhUTUxIZWFkaW5nRWxlbWVudCkgPT4gaGVhZGluZy5pZCk7XG5cblx0Y29uc3QgbGV2ZWxzOiBudW1iZXJbXSA9IGFzQXJyYXkobmV3IFNldChoZWFkaW5nRWxlbWVudHMubWFwKGxldmVsRnJvbVRhZ05hbWUpLnNvcnQoKSkpO1xuXG5cdHJldHVybiBoZWFkaW5nRWxlbWVudHMucmVkdWNlKChtYXA6IE5nRG9jVG9jSXRlbVtdLCBoZWFkaW5nOiBIVE1MSGVhZGluZ0VsZW1lbnQpID0+IHtcblx0XHRjb25zdCBoZWFkaW5nTGV2ZWw6IG51bWJlciA9IGxldmVsRnJvbVRhZ05hbWUoaGVhZGluZyk7XG5cdFx0Y29uc3QgYW5jaG9yOiBIVE1MQW5jaG9yRWxlbWVudCB8IG51bGwgPVxuXHRcdFx0aGVhZGluZy5xdWVyeVNlbGVjdG9yPEhUTUxBbmNob3JFbGVtZW50PignYS5uZy1kb2MtaGVhZGVyLWxpbmsnKTtcblxuXHRcdGlmIChhbmNob3IpIHtcblx0XHRcdG1hcC5wdXNoKHtcblx0XHRcdFx0dGl0bGU6IGhlYWRpbmcudGV4dENvbnRlbnQ/LnRyaW0oKSA/PyAnJyxcblx0XHRcdFx0ZWxlbWVudDogaGVhZGluZyxcblx0XHRcdFx0cGF0aDogYW5jaG9yLnBhdGhuYW1lLFxuXHRcdFx0XHRoYXNoOiBhbmNob3IuaGFzaC5yZXBsYWNlKCcjJywgJycpLFxuXHRcdFx0XHRsZXZlbDogbGV2ZWxzLmluZGV4T2YoaGVhZGluZ0xldmVsKSArIDEsXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbWFwO1xuXHR9LCBbXSk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBoZWFkaW5nXG4gKi9cbmZ1bmN0aW9uIGxldmVsRnJvbVRhZ05hbWUoaGVhZGluZzogSFRNTEhlYWRpbmdFbGVtZW50KTogbnVtYmVyIHtcblx0cmV0dXJuIE51bWJlcihoZWFkaW5nLnRhZ05hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bYS16XSovZywgJycpIHx8IDEpO1xufVxuIl19