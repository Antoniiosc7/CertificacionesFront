"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isCacheValid = isCacheValid;
const create_cache_for_file_1 = require("./create-cache-for-file");
const load_cache_1 = require("./load-cache");
/**
 * Checks if cache is valid for given files
 * @param id - unique id for cache
 * @param cache - cache object
 */
function isCacheValid(id, cache) {
    var _a, _b;
    const savedCache = (0, load_cache_1.loadCache)(id);
    const filesAreValid = Object.keys((_a = savedCache.files) !== null && _a !== void 0 ? _a : {}).every((filePath) => { var _a; return ((_a = savedCache.files) === null || _a === void 0 ? void 0 : _a[filePath]) === (0, create_cache_for_file_1.createCacheForFile)(filePath); });
    const versionIsValid = savedCache.version === cache.version;
    const allFilesWereCached = Object.keys((_b = cache.files) !== null && _b !== void 0 ? _b : {}).every((filePath) => { var _a; return ((_a = savedCache.files) === null || _a === void 0 ? void 0 : _a[filePath]) !== undefined; });
    return filesAreValid && versionIsValid && allFilesWereCached;
}
//# sourceMappingURL=is-cache-valid.js.map