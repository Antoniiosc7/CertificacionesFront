"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.removeLinesFromCode = removeLinesFromCode;
const LINE_BREAK = /\r?\n/;
const IGNORE_COMMENT = /\n?\r?^.*((\/\/|<!--|\/\*)\s*)(ng-doc-ignore-line)(\s*([0-9]))?.*$/;
/**
 * Remove lines from code that are marked with `ng-doc-ignore-line`
 * @param code - The code to remove lines from
 */
function removeLinesFromCode(code) {
    const lines = code.split(LINE_BREAK);
    let linesToIgnore = 0;
    return lines
        .reduce((lines, line) => {
        var _a;
        const match = IGNORE_COMMENT.exec(line);
        if (match) {
            linesToIgnore = Math.max(linesToIgnore, parseInt((_a = match[5]) !== null && _a !== void 0 ? _a : '1'));
        }
        else if (linesToIgnore === 0) {
            lines.push(line);
        }
        else if (linesToIgnore > 0) {
            linesToIgnore--;
        }
        return lines;
    }, [])
        .join('\n');
}
//# sourceMappingURL=remove-lines-from-code.js.map