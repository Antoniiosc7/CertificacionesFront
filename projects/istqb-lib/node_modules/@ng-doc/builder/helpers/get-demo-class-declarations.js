"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDemoClassDeclarations = getDemoClassDeclarations;
const core_1 = require("@ng-doc/core");
const ts_morph_1 = require("ts-morph");
/**
 *
 * @param objectExpression
 */
function getDemoClassDeclarations(objectExpression) {
    const demoProperty = objectExpression.getProperty('demos');
    if (demoProperty &&
        (ts_morph_1.Node.isPropertyAssignment(demoProperty) || ts_morph_1.Node.isShorthandPropertyAssignment(demoProperty))) {
        const initializer = demoProperty.getInitializer();
        if (ts_morph_1.Node.isObjectLiteralExpression(initializer)) {
            return initializer
                .getProperties()
                .reduce((acc, property) => {
                var _a;
                const classDeclaration = (_a = property.getType().getSymbol()) === null || _a === void 0 ? void 0 : _a.getValueDeclaration();
                if (ts_morph_1.Node.isClassDeclaration(classDeclaration)) {
                    if (ts_morph_1.Node.isShorthandPropertyAssignment(property) && classDeclaration.getName()) {
                        const className = classDeclaration.getName();
                        if ((0, core_1.isPresent)(className)) {
                            acc[className] = classDeclaration;
                        }
                    }
                    else if (ts_morph_1.Node.isPropertyAssignment(property)) {
                        acc[property.getName()] = classDeclaration;
                    }
                }
                return acc;
            }, {});
        }
    }
    return {};
}
//# sourceMappingURL=get-demo-class-declarations.js.map