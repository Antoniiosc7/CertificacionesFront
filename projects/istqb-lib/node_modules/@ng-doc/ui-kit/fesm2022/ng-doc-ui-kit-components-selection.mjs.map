{"version":3,"file":"ng-doc-ui-kit-components-selection.mjs","sources":["../../../../libs/ui-kit/components/selection/selection-host.directive.ts","../../../../libs/ui-kit/components/selection/selection.component.ts","../../../../libs/ui-kit/components/selection/selection-origin.directive.ts","../../../../libs/ui-kit/components/selection/ng-doc-ui-kit-components-selection.ts"],"sourcesContent":["import { Directive } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\n\nimport { NgDocSelectionOriginDirective } from './selection-origin.directive';\n\n@Directive({\n\tselector: '[ngDocSelectionHost]',\n\tstandalone: true,\n})\nexport class NgDocSelectionHostDirective {\n\tprivate origins: Set<NgDocSelectionOriginDirective> = new Set<NgDocSelectionOriginDirective>();\n\tprivate selected?: NgDocSelectionOriginDirective;\n\tprivate selectedChange: ReplaySubject<HTMLElement | undefined> = new ReplaySubject<\n\t\tHTMLElement | undefined\n\t>();\n\n\tget selectedChange$(): Observable<HTMLElement | undefined> {\n\t\treturn this.selectedChange.pipe(distinctUntilChanged());\n\t}\n\n\taddOrigin(origin: NgDocSelectionOriginDirective): void {\n\t\tthis.origins.add(origin);\n\t}\n\n\tremoveOrigin(origin: NgDocSelectionOriginDirective): void {\n\t\tthis.origins.delete(origin);\n\n\t\tif (this.selected === origin) {\n\t\t\tthis.changeSelected(origin, false);\n\t\t}\n\t}\n\n\tchangeSelected(origin: NgDocSelectionOriginDirective, selected: boolean): void {\n\t\tthis.selected =\n\t\t\tthis.selected === origin || selected ? (selected ? origin : undefined) : this.selected;\n\t\tthis.selectedChange.next(this.selected?.elementRef?.nativeElement ?? undefined);\n\t}\n}\n","import {\n\tAfterViewInit,\n\tChangeDetectionStrategy,\n\tComponent,\n\tElementRef,\n\tHostBinding,\n\tInput,\n} from '@angular/core';\nimport { NgDocHorizontalAlign, NgDocPosition, NgDocVerticalAlign } from '@ng-doc/ui-kit/types';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\n\nimport { NgDocSelectionHostDirective } from './selection-host.directive';\n\n@Component({\n\tselector: 'ng-doc-selection',\n\ttemplate: '',\n\tstyleUrls: ['./selection.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tstandalone: true,\n})\n@UntilDestroy()\nexport class NgDocSelectionComponent implements AfterViewInit {\n\t@Input()\n\t@HostBinding('attr.data-ng-doc-align')\n\talign: NgDocHorizontalAlign | NgDocVerticalAlign = 'bottom';\n\n\tconstructor(\n\t\tprivate readonly elementRef: ElementRef<HTMLElement>,\n\t\tprivate readonly selectionHost: NgDocSelectionHostDirective,\n\t) {}\n\n\tngAfterViewInit(): void {\n\t\tthis.selectionHost.selectedChange$\n\t\t\t.pipe(untilDestroyed(this))\n\t\t\t.subscribe((selected: HTMLElement | undefined) => this.setStyles(selected));\n\t}\n\n\tprivate setStyles(element?: HTMLElement): void {\n\t\tthis.elementRef.nativeElement.style.visibility = 'hidden';\n\t\tif (element) {\n\t\t\tconst position: NgDocPosition = this.getPosition(element);\n\n\t\t\tif (this.align === 'left' || this.align === 'right') {\n\t\t\t\tthis.elementRef.nativeElement.style.top = position.top;\n\t\t\t} else {\n\t\t\t\tthis.elementRef.nativeElement.style.left = position.left;\n\t\t\t}\n\n\t\t\tthis.elementRef.nativeElement.style.height = position.height;\n\t\t\tthis.elementRef.nativeElement.style.width = position.width;\n\t\t\tthis.elementRef.nativeElement.style.visibility = 'visible';\n\t\t}\n\t}\n\n\tprivate getPosition(element: HTMLElement): NgDocPosition {\n\t\treturn {\n\t\t\ttop: element ? `${element.offsetTop || 0}px` : '0',\n\t\t\tleft: element ? `${element.offsetLeft || 0}px` : '0',\n\t\t\twidth: element ? `${element.offsetWidth || 0}px` : '0',\n\t\t\theight: element ? `${element.offsetHeight || 0}px` : '0',\n\t\t};\n\t}\n}\n","import { Directive, ElementRef, Input, OnChanges, OnDestroy, SimpleChanges } from '@angular/core';\n\nimport { NgDocSelectionHostDirective } from './selection-host.directive';\n\n@Directive({\n\tselector: '[ngDocSelectionOrigin]',\n\tstandalone: true,\n})\nexport class NgDocSelectionOriginDirective implements OnChanges, OnDestroy {\n\t@Input('ngDocSelectionOrigin')\n\tselected: boolean = false;\n\n\tconstructor(\n\t\treadonly elementRef: ElementRef<HTMLElement>,\n\t\tprivate readonly selectionHost: NgDocSelectionHostDirective,\n\t) {\n\t\tthis.selectionHost.addOrigin(this);\n\t}\n\n\tngOnChanges({ selected }: SimpleChanges): void {\n\t\tif (selected) {\n\t\t\tthis.selectionHost.changeSelected(this, this.selected);\n\t\t}\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.selectionHost.removeOrigin(this);\n\t}\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i1.NgDocSelectionHostDirective"],"mappings":"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"}