import { __decorate, __metadata } from "tslib";
import { ChangeDetectionStrategy, Component, ContentChild, ElementRef, forwardRef, inject, Input, NgZone, ViewChild, } from '@angular/core';
import { NgDocBaseInput, NgDocDisplayValueHost, NgDocInputHost, NgDocListHost, NgDocOverlayHost, } from '@ng-doc/ui-kit/classes';
import { NgDocDropdownComponent } from '@ng-doc/ui-kit/components/dropdown';
import { NgDocDropdownHandlerDirective } from '@ng-doc/ui-kit/directives/dropdown-handler';
import { NgDocFocusCatcherDirective } from '@ng-doc/ui-kit/directives/focus-catcher';
import { ngDocZoneOptimize } from '@ng-doc/ui-kit/observables';
import { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';
import { DI_DEFAULT_COMPARE, DIControl, DIStateControl, injectHostControl, provideCompareHost, provideHostControl, } from 'di-controls';
import { filter } from 'rxjs/operators';
import * as i0 from "@angular/core";
let NgDocComboboxHostComponent = class NgDocComboboxHostComponent extends DIControl {
    constructor() {
        super({
            host: injectHostControl({ skipSelf: true, optional: true }),
            onChildControlChange: (control) => {
                if (control instanceof DIStateControl) {
                    this.dropdown?.close();
                }
            },
        });
        this.compareFn = DI_DEFAULT_COMPARE;
        this.displayValueFn = String;
        this.positions = ['bottom-center', 'top-center'];
        this.ngZone = inject(NgZone);
    }
    ngAfterContentInit() {
        this.inputControl?.changes
            .pipe(filter(() => !!this.inputControl?.isFocused), untilDestroyed(this), ngDocZoneOptimize(this.ngZone))
            .subscribe(() => this.dropdown?.open());
    }
    get listHostOrigin() {
        return this.inputControl?.elementRef;
    }
    get searchText() {
        return this.hasValue ? '' : this.inputControl?.value || '';
    }
    get width() {
        return this.origin?.nativeElement.offsetWidth || 0;
    }
    get panelClass() {
        return `ng-doc-combobox-host-overlay`;
    }
    clickEvent() {
        if (!this.disabled) {
            this.dropdown?.open();
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.1.0", ngImport: i0, type: NgDocComboboxHostComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.1.0", type: NgDocComboboxHostComponent, isStandalone: true, selector: "ng-doc-combobox-host", inputs: { compareFn: "compareFn", displayValueFn: "displayValueFn" }, providers: [
            provideHostControl(forwardRef(() => NgDocComboboxHostComponent)),
            provideCompareHost(forwardRef(() => NgDocComboboxHostComponent)),
            {
                provide: NgDocOverlayHost,
                useExisting: forwardRef(() => NgDocComboboxHostComponent),
            },
            {
                provide: NgDocInputHost,
                useExisting: forwardRef(() => NgDocComboboxHostComponent),
            },
            {
                provide: NgDocDisplayValueHost,
                useExisting: forwardRef(() => NgDocComboboxHostComponent),
            },
            {
                provide: NgDocListHost,
                useExisting: forwardRef(() => NgDocComboboxHostComponent),
            },
        ], queries: [{ propertyName: "dropdown", first: true, predicate: NgDocDropdownComponent, descendants: true }, { propertyName: "inputControl", first: true, predicate: NgDocBaseInput, descendants: true }], viewQueries: [{ propertyName: "origin", first: true, predicate: ["origin"], descendants: true, read: ElementRef, static: true }], usesInheritance: true, ngImport: i0, template: "<label\n\tclass=\"ng-doc-dropdown-host\"\n\tngDocFocusCatcher\n\t[ngDocDropdownHandler]=\"dropdown\"\n\t(click)=\"clickEvent()\"\n\t#origin>\n\t<ng-content></ng-content>\n</label>\n", styles: [":host{position:relative;display:block;width:100%}::ng-deep .ng-doc-combobox-host-overlay .ng-doc-overlay-content{display:block;max-height:300px;overflow:auto}\n"], dependencies: [{ kind: "directive", type: NgDocFocusCatcherDirective, selector: "[ngDocFocusCatcher]", outputs: ["focusEvent", "blurEvent"], exportAs: ["ngDocFocusCatcher"] }, { kind: "directive", type: NgDocDropdownHandlerDirective, selector: "[ngDocDropdownHandler]", inputs: ["ngDocDropdownHandler"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
};
NgDocComboboxHostComponent = __decorate([
    UntilDestroy(),
    __metadata("design:paramtypes", [])
], NgDocComboboxHostComponent);
export { NgDocComboboxHostComponent };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.1.0", ngImport: i0, type: NgDocComboboxHostComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ng-doc-combobox-host', providers: [
                        provideHostControl(forwardRef(() => NgDocComboboxHostComponent)),
                        provideCompareHost(forwardRef(() => NgDocComboboxHostComponent)),
                        {
                            provide: NgDocOverlayHost,
                            useExisting: forwardRef(() => NgDocComboboxHostComponent),
                        },
                        {
                            provide: NgDocInputHost,
                            useExisting: forwardRef(() => NgDocComboboxHostComponent),
                        },
                        {
                            provide: NgDocDisplayValueHost,
                            useExisting: forwardRef(() => NgDocComboboxHostComponent),
                        },
                        {
                            provide: NgDocListHost,
                            useExisting: forwardRef(() => NgDocComboboxHostComponent),
                        },
                    ], changeDetection: ChangeDetectionStrategy.OnPush, standalone: true, imports: [NgDocFocusCatcherDirective, NgDocDropdownHandlerDirective], template: "<label\n\tclass=\"ng-doc-dropdown-host\"\n\tngDocFocusCatcher\n\t[ngDocDropdownHandler]=\"dropdown\"\n\t(click)=\"clickEvent()\"\n\t#origin>\n\t<ng-content></ng-content>\n</label>\n", styles: [":host{position:relative;display:block;width:100%}::ng-deep .ng-doc-combobox-host-overlay .ng-doc-overlay-content{display:block;max-height:300px;overflow:auto}\n"] }]
        }], ctorParameters: () => [], propDecorators: { compareFn: [{
                type: Input
            }], displayValueFn: [{
                type: Input
            }], origin: [{
                type: ViewChild,
                args: ['origin', { read: ElementRef, static: true }]
            }], dropdown: [{
                type: ContentChild,
                args: [NgDocDropdownComponent]
            }], inputControl: [{
                type: ContentChild,
                args: [NgDocBaseInput]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tYm9ib3gtaG9zdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL3VpLWtpdC9jZGsvY29tYm9ib3gtaG9zdC9jb21ib2JveC1ob3N0LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvdWkta2l0L2Nkay9jb21ib2JveC1ob3N0L2NvbWJvYm94LWhvc3QuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFFTix1QkFBdUIsRUFDdkIsU0FBUyxFQUNULFlBQVksRUFDWixVQUFVLEVBQ1YsVUFBVSxFQUNWLE1BQU0sRUFDTixLQUFLLEVBQ0wsTUFBTSxFQUNOLFNBQVMsR0FDVCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQ04sY0FBYyxFQUNkLHFCQUFxQixFQUNyQixjQUFjLEVBQ2QsYUFBYSxFQUNiLGdCQUFnQixHQUNoQixNQUFNLHdCQUF3QixDQUFDO0FBQ2hDLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSw2QkFBNkIsRUFBRSxNQUFNLDRDQUE0QyxDQUFDO0FBQzNGLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQ3JGLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBRS9ELE9BQU8sRUFBRSxZQUFZLEVBQUUsY0FBYyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDckUsT0FBTyxFQUNOLGtCQUFrQixFQUdsQixTQUFTLEVBQ1QsY0FBYyxFQUNkLGlCQUFpQixFQUNqQixrQkFBa0IsRUFDbEIsa0JBQWtCLEdBQ2xCLE1BQU0sYUFBYSxDQUFDO0FBQ3JCLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7QUErQmpDLElBQU0sMEJBQTBCLEdBQWhDLE1BQU0sMEJBQ1osU0FBUSxTQUFZO0lBNEJw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Qjt3QkFDVixrQkFBa0IsQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLDJCQUEyQixDQUFDLENBQUM7d0JBQ2hFLGtCQUFrQixDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsMkJBQTJCLENBQUMsQ0FBQzt3QkFDaEU7NEJBQ0MsT0FBTyxFQUFFLGdCQUFnQjs0QkFDekIsV0FBVyxFQUFFLFVBQVUsQ0FBQyxHQUFHLEVBQUUsMkJBQTJCLENBQUM7eUJBQ3pEO3dCQUNEOzRCQUNDLE9BQU8sRUFBRSxjQUFjOzRCQUN2QixXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSwyQkFBMkIsQ0FBQzt5QkFDekQ7d0JBQ0Q7NEJBQ0MsT0FBTyxFQUFFLHFCQUFxQjs0QkFDOUIsV0FBVyxFQUFFLFVBQVUsQ0FBQyxHQUFHLEVBQUUsMkJBQTJCLENBQUM7eUJBQ3pEO3dCQUNEOzRCQUNDLE9BQU8sRUFBRSxhQUFhOzRCQUN0QixXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSwyQkFBMkIsQ0FBQzt5QkFDekQ7cUJBQ0QsbUJBQ2dCLHVCQUF1QixDQUFDLE1BQU0sY0FDbkMsSUFBSSxXQUNQLENBQUMsMEJBQTBCLEVBQUUsNkJBQTZCLENBQUM7d0RBY3BFLFNBQVM7c0JBRFIsS0FBSztnQkFJTixjQUFjO3NCQURiLEtBQUs7Z0JBSU4sTUFBTTtzQkFETCxTQUFTO3VCQUFDLFFBQVEsRUFBRSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtnQkFJdkQsUUFBUTtzQkFEUCxZQUFZO3VCQUFDLHNCQUFzQjtnQkFJcEMsWUFBWTtzQkFEWCxZQUFZO3VCQUFDLGNBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRBZnRlckNvbnRlbnRJbml0LFxuXHRDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcblx0Q29tcG9uZW50LFxuXHRDb250ZW50Q2hpbGQsXG5cdEVsZW1lbnRSZWYsXG5cdGZvcndhcmRSZWYsXG5cdGluamVjdCxcblx0SW5wdXQsXG5cdE5nWm9uZSxcblx0Vmlld0NoaWxkLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG5cdE5nRG9jQmFzZUlucHV0LFxuXHROZ0RvY0Rpc3BsYXlWYWx1ZUhvc3QsXG5cdE5nRG9jSW5wdXRIb3N0LFxuXHROZ0RvY0xpc3RIb3N0LFxuXHROZ0RvY092ZXJsYXlIb3N0LFxufSBmcm9tICdAbmctZG9jL3VpLWtpdC9jbGFzc2VzJztcbmltcG9ydCB7IE5nRG9jRHJvcGRvd25Db21wb25lbnQgfSBmcm9tICdAbmctZG9jL3VpLWtpdC9jb21wb25lbnRzL2Ryb3Bkb3duJztcbmltcG9ydCB7IE5nRG9jRHJvcGRvd25IYW5kbGVyRGlyZWN0aXZlIH0gZnJvbSAnQG5nLWRvYy91aS1raXQvZGlyZWN0aXZlcy9kcm9wZG93bi1oYW5kbGVyJztcbmltcG9ydCB7IE5nRG9jRm9jdXNDYXRjaGVyRGlyZWN0aXZlIH0gZnJvbSAnQG5nLWRvYy91aS1raXQvZGlyZWN0aXZlcy9mb2N1cy1jYXRjaGVyJztcbmltcG9ydCB7IG5nRG9jWm9uZU9wdGltaXplIH0gZnJvbSAnQG5nLWRvYy91aS1raXQvb2JzZXJ2YWJsZXMnO1xuaW1wb3J0IHsgTmdEb2NEaXNwbGF5VmFsdWVGdW5jdGlvbiwgTmdEb2NPdmVybGF5UG9zaXRpb24gfSBmcm9tICdAbmctZG9jL3VpLWtpdC90eXBlcyc7XG5pbXBvcnQgeyBVbnRpbERlc3Ryb3ksIHVudGlsRGVzdHJveWVkIH0gZnJvbSAnQG5nbmVhdC91bnRpbC1kZXN0cm95JztcbmltcG9ydCB7XG5cdERJX0RFRkFVTFRfQ09NUEFSRSxcblx0RElDb21wYXJlRnVuY3Rpb24sXG5cdERJQ29tcGFyZUhvc3QsXG5cdERJQ29udHJvbCxcblx0RElTdGF0ZUNvbnRyb2wsXG5cdGluamVjdEhvc3RDb250cm9sLFxuXHRwcm92aWRlQ29tcGFyZUhvc3QsXG5cdHByb3ZpZGVIb3N0Q29udHJvbCxcbn0gZnJvbSAnZGktY29udHJvbHMnO1xuaW1wb3J0IHsgZmlsdGVyIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5AQ29tcG9uZW50KHtcblx0c2VsZWN0b3I6ICduZy1kb2MtY29tYm9ib3gtaG9zdCcsXG5cdHRlbXBsYXRlVXJsOiAnLi9jb21ib2JveC1ob3N0LmNvbXBvbmVudC5odG1sJyxcblx0c3R5bGVVcmxzOiBbJy4vY29tYm9ib3gtaG9zdC5jb21wb25lbnQuc2NzcyddLFxuXHRwcm92aWRlcnM6IFtcblx0XHRwcm92aWRlSG9zdENvbnRyb2woZm9yd2FyZFJlZigoKSA9PiBOZ0RvY0NvbWJvYm94SG9zdENvbXBvbmVudCkpLFxuXHRcdHByb3ZpZGVDb21wYXJlSG9zdChmb3J3YXJkUmVmKCgpID0+IE5nRG9jQ29tYm9ib3hIb3N0Q29tcG9uZW50KSksXG5cdFx0e1xuXHRcdFx0cHJvdmlkZTogTmdEb2NPdmVybGF5SG9zdCxcblx0XHRcdHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE5nRG9jQ29tYm9ib3hIb3N0Q29tcG9uZW50KSxcblx0XHR9LFxuXHRcdHtcblx0XHRcdHByb3ZpZGU6IE5nRG9jSW5wdXRIb3N0LFxuXHRcdFx0dXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTmdEb2NDb21ib2JveEhvc3RDb21wb25lbnQpLFxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0cHJvdmlkZTogTmdEb2NEaXNwbGF5VmFsdWVIb3N0LFxuXHRcdFx0dXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTmdEb2NDb21ib2JveEhvc3RDb21wb25lbnQpLFxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0cHJvdmlkZTogTmdEb2NMaXN0SG9zdCxcblx0XHRcdHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE5nRG9jQ29tYm9ib3hIb3N0Q29tcG9uZW50KSxcblx0XHR9LFxuXHRdLFxuXHRjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcblx0c3RhbmRhbG9uZTogdHJ1ZSxcblx0aW1wb3J0czogW05nRG9jRm9jdXNDYXRjaGVyRGlyZWN0aXZlLCBOZ0RvY0Ryb3Bkb3duSGFuZGxlckRpcmVjdGl2ZV0sXG59KVxuQFVudGlsRGVzdHJveSgpXG5leHBvcnQgY2xhc3MgTmdEb2NDb21ib2JveEhvc3RDb21wb25lbnQ8VD5cblx0ZXh0ZW5kcyBESUNvbnRyb2w8VD5cblx0aW1wbGVtZW50c1xuXHRcdE5nRG9jT3ZlcmxheUhvc3QsXG5cdFx0TmdEb2NJbnB1dEhvc3Q8c3RyaW5nPixcblx0XHRESUNvbXBhcmVIb3N0PFQ+LFxuXHRcdE5nRG9jRGlzcGxheVZhbHVlSG9zdDxUPixcblx0XHROZ0RvY0xpc3RIb3N0LFxuXHRcdEFmdGVyQ29udGVudEluaXRcbntcblx0QElucHV0KClcblx0Y29tcGFyZUZuOiBESUNvbXBhcmVGdW5jdGlvbjxUPiA9IERJX0RFRkFVTFRfQ09NUEFSRTtcblxuXHRASW5wdXQoKVxuXHRkaXNwbGF5VmFsdWVGbjogTmdEb2NEaXNwbGF5VmFsdWVGdW5jdGlvbjxUPiA9IFN0cmluZztcblxuXHRAVmlld0NoaWxkKCdvcmlnaW4nLCB7IHJlYWQ6IEVsZW1lbnRSZWYsIHN0YXRpYzogdHJ1ZSB9KVxuXHRvcmlnaW4/OiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PjtcblxuXHRAQ29udGVudENoaWxkKE5nRG9jRHJvcGRvd25Db21wb25lbnQpXG5cdGRyb3Bkb3duPzogTmdEb2NEcm9wZG93bkNvbXBvbmVudDtcblxuXHRAQ29udGVudENoaWxkKE5nRG9jQmFzZUlucHV0KVxuXHRpbnB1dENvbnRyb2w/OiBOZ0RvY0Jhc2VJbnB1dDxzdHJpbmc+O1xuXG5cdHJlYWRvbmx5IHBvc2l0aW9uczogTmdEb2NPdmVybGF5UG9zaXRpb25bXSA9IFsnYm90dG9tLWNlbnRlcicsICd0b3AtY2VudGVyJ107XG5cblx0cHJvdGVjdGVkIHJlYWRvbmx5IG5nWm9uZTogTmdab25lID0gaW5qZWN0KE5nWm9uZSk7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0c3VwZXIoe1xuXHRcdFx0aG9zdDogaW5qZWN0SG9zdENvbnRyb2woeyBza2lwU2VsZjogdHJ1ZSwgb3B0aW9uYWw6IHRydWUgfSksXG5cdFx0XHRvbkNoaWxkQ29udHJvbENoYW5nZTogKGNvbnRyb2wpID0+IHtcblx0XHRcdFx0aWYgKGNvbnRyb2wgaW5zdGFuY2VvZiBESVN0YXRlQ29udHJvbCkge1xuXHRcdFx0XHRcdHRoaXMuZHJvcGRvd24/LmNsb3NlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cdH1cblxuXHRuZ0FmdGVyQ29udGVudEluaXQoKTogdm9pZCB7XG5cdFx0dGhpcy5pbnB1dENvbnRyb2w/LmNoYW5nZXNcblx0XHRcdC5waXBlKFxuXHRcdFx0XHRmaWx0ZXIoKCkgPT4gISF0aGlzLmlucHV0Q29udHJvbD8uaXNGb2N1c2VkKSxcblx0XHRcdFx0dW50aWxEZXN0cm95ZWQodGhpcyksXG5cdFx0XHRcdG5nRG9jWm9uZU9wdGltaXplKHRoaXMubmdab25lKSxcblx0XHRcdClcblx0XHRcdC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5kcm9wZG93bj8ub3BlbigpKTtcblx0fVxuXG5cdGdldCBsaXN0SG9zdE9yaWdpbigpOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PiB8IHVuZGVmaW5lZCB7XG5cdFx0cmV0dXJuIHRoaXMuaW5wdXRDb250cm9sPy5lbGVtZW50UmVmO1xuXHR9XG5cblx0Z2V0IHNlYXJjaFRleHQoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5oYXNWYWx1ZSA/ICcnIDogdGhpcy5pbnB1dENvbnRyb2w/LnZhbHVlIHx8ICcnO1xuXHR9XG5cblx0Z2V0IHdpZHRoKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMub3JpZ2luPy5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoIHx8IDA7XG5cdH1cblxuXHRnZXQgcGFuZWxDbGFzcygpOiBzdHJpbmcge1xuXHRcdHJldHVybiBgbmctZG9jLWNvbWJvYm94LWhvc3Qtb3ZlcmxheWA7XG5cdH1cblxuXHRjbGlja0V2ZW50KCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5kaXNhYmxlZCkge1xuXHRcdFx0dGhpcy5kcm9wZG93bj8ub3BlbigpO1xuXHRcdH1cblx0fVxufVxuIiwiPGxhYmVsXG5cdGNsYXNzPVwibmctZG9jLWRyb3Bkb3duLWhvc3RcIlxuXHRuZ0RvY0ZvY3VzQ2F0Y2hlclxuXHRbbmdEb2NEcm9wZG93bkhhbmRsZXJdPVwiZHJvcGRvd25cIlxuXHQoY2xpY2spPVwiY2xpY2tFdmVudCgpXCJcblx0I29yaWdpbj5cblx0PG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuPC9sYWJlbD5cbiJdfQ==