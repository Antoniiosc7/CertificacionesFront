'use strict';

var c="",Ce='"',He=",",ve="'",te=" ";var X=`
`,ti=`\r
`;function Ze(e){switch(e){case"text":return "Plain Text";case"html":return "HTML";case"liquid":return "Liquid";case"xml":return "XML";case"json":return "JSON";case"jsx":return "JSX";case"tsx":return "TSX";case"typescript":return "TypeScript";case"javascript":return "JavaScript";case"less":return "LESS";case"scss":return "SCSS";case"sass":return "SASS";case"css":return "CSS"}}function Ne(e){switch(e){case"text":return "ignore";case"auto":return "auto";case"markup":case"html":case"liquid":case"xml":return "markup";case"json":case"jsx":case"tsx":case"typescript":case"javascript":return "script";case"less":case"scss":case"sass":case"css":return "style"}}function pt(e){switch(e){case"auto":return 5;case"markup":case"html":case"liquid":case"xml":return 1;case"json":case"jsx":case"tsx":case"typescript":case"javascript":return 2;case"less":case"scss":case"sass":case"css":return 3}return 4}function Mt(e,o){let n={lexer:o,language:Ze(e),chars:0,time:""},f=Date.now();return x=>{let l=+(Date.now()-f).toFixed(0);return n.time=l>1e3?`${l}s`:`${l}ms`,n.chars=x,n}}function Lt(...e){return e.join(X)}function Xe(e,o=te){if(e<=0)return o;let n=c,f=1;do n+=o;while(f++<e);return n}function i(e,o){return e?e.charCodeAt(0)===o:!1}function $e(e,o){return i(e[e.length-1],o)}function ni(e,...o){let n=e.length-1,f=o.length;for(;f--;)if(i(e[n--],o[f])===!1)return !1;return !0}function Ve(e,o,n=2){return i(e[e.length-n],o)}function E(e,o){return i(e,o)===!1}function It(e,o){return $e(e,o)===!1}function oe(e){return /\s/.test(e)}function je(e){return /\d/.test(e)}function Dt(e){return `\\${e}`}var{toString:it}=Object.prototype;function nt(e){return o=>o in e}function Re(e){return it.call(e).slice(8,-1)==="Array"}function dt(e){return it.call(e).slice(8,-1)==="Object"}function ht(e){return it.call(e).slice(8,-1)==="String"}function Ye(e){return it.call(e).slice(8,-1)==="Boolean"}function st(e){return it.call(e).slice(8,-1)==="Number"}function De(e){return it.call(e).slice(8,-1)==="Undefined"}function gt(e){let o=s.count,n=s.stack.index,f=0,x=0,l=0,O=0,r=0,m=0,j=0,t=!0,{count:h}=s,C=s.stack.token,I=s.stack.index,u=s.lineOffset,p=e.lexer[h]==="style",d=p&&C==="global",P=p?[";","separator"]:[",","separator"],K=[],Z={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};function a(L,z){let A=L[0],F=z[0];if(e.types[A]==="comment"){do A=A+1;while(A<h&&e.types[A]==="comment");if(e.token[A]===void 0)return 1}if(e.types[F]==="comment"){do F=F+1;while(F<h&&e.types[F]==="comment");if(e.token[F]===void 0)return 1}if(p===!0){if(e.token[A].indexOf("@import")===0||e.token[F].indexOf("@import")===0)return A<F?-1:1;if(e.types[A]!==e.types[F]){if(e.types[A]==="function")return 1;if(e.types[A]==="variable")return -1;if(e.types[A]==="selector")return 1;if(e.types[A]==="property"&&e.types[F]!=="variable"||e.types[A]==="mixin"&&e.types[F]!=="property"&&e.types[F]!=="variable")return -1}}return e.token[A].toLowerCase()>e.token[F].toLowerCase()?1:-1}O=o;do{if(e.begin[o]===n||d&&o<O&&i(e.token[o],125)&&e.begin[e.begin[o]]===-1){if(e.types[o].indexOf("liquid")>-1)return;if(e.token[o]===P[0]||p===!0&&i(e.token[o],125)&&E(e.token[o+1],59)?(t=!0,r=o+1):p===!0&&i(e.token[o-1],125)&&(t=!0,r=o),r===0&&e.types[0]==="comment")do r=r+1;while(e.types[r]==="comment");else e.types[r]==="comment"&&e.lines[r]<2&&(r=r+1);t===!0&&(e.token[o]===P[0]||p===!0&&i(e.token[o-1],125))&&r<=O&&((p===!0&&"};".indexOf(e.token[O])<0||p===!1&&E(e.token[O],44))&&(O=O+1),K.push([r,O]),p===!0&&i(e.token[r],125)?O=r:O=r-1);}o=o-1;}while(o>n);if(K.length>0&&K[K.length-1][0]>o+1){if(f=K[K.length-1][0]-1,e.types[f]==="comment"&&e.lines[f]>1){do f=f-1;while(f>0&&e.types[f]==="comment");K[K.length-1][0]=f+1;}if(e.types[o+1]==="comment"&&o===-1)do o=o+1;while(e.types[o+1]==="comment");K.push([o+1,f]);}if(K.length>1&&(p===!0||s.language==="json"||i(e.token[o-1],61)||i(e.token[o-1],58)||i(e.token[o-1],40)||i(e.token[o-1],91)||i(e.token[o-1],44)||e.types[o-1]==="word"||o===0)){K.sort(a),j=K.length,t=!1,n=0;do{if(m=K[n][1],p===!0&&(l=m,e.types[l]==="comment"&&(l=l-1),i(e.token[l],125)?(m=m+1,P[0]="}",P[1]="end"):(P[0]=";",P[1]="separator")),f=K[n][0],p===!0&&e.types[m-1]!=="end"&&e.types[m]==="comment"&&e.types[m+1]!=="comment"&&n<j-1&&(m=m+1),f<m)do p===!1&&n===j-1&&f===m-2&&i(e.token[f],44)&&e.lexer[f]==="script"&&e.types[f+1]==="comment"||s.push(Z,{begin:e.begin[f],ender:e.begin[f],lexer:e.lexer[f],lines:e.lines[f],stack:e.stack[f],token:e.token[f],types:e.types[f]},c),x=x+1,e.token[f]===P[0]&&(p===!0||e.begin[f]===e.begin[K[n][0]])?t=!0:e.token[f]!==P[0]&&e.types[f]!=="comment"&&(t=!1),f=f+1;while(f<m);if(t===!1&&Z.token[Z.token.length-1]!=="x;"&&(p===!0||n<j-1)){if(f=Z.types.length-1,Z.types[f]==="comment")do f=f-1;while(f>0&&Z.types[f]==="comment");f=f+1,s.splice({data:Z,howmany:0,index:f,record:{begin:I,stack:d?"global":C,ender:s.count,lexer:Z.lexer[f-1],lines:0,token:P[0],types:P[1]}}),x=x+1;}n=n+1;}while(n<j);s.splice({data:e,howmany:x,index:o+1}),s.lineOffset=u,s.concat(e,Z);}}function _t(e,o,n){return Re(e)===!1?e:o==="normal"?li.call({array:e,recursive:n},e):o==="descend"?oi.call({recursive:n},e):ri.call({recursive:n},e)}function Ct(e,o){let n=e,f=-1,{data:x}=s,l=[],O=s.stack.length<2?[-1]:[s.stack[s.stack.length-2][1]];do n>0&&x.types[n].indexOf("attribute")>-1&&x.types[n].indexOf("end")<0&&x.types[n-1].indexOf("start")<0&&x.types[n-1].indexOf("attribute")<0&&x.lexer[n]==="markup"&&O.push(n-1),n>0&&x.types[n-1].indexOf("attribute")>-1&&x.types[n].indexOf("attribute")<0&&x.lexer[O[O.length-1]]==="markup"&&x.types[O[O.length-1]].indexOf("start")<0&&O.pop(),x.begin[n]!==O[O.length-1]&&(x.begin[n]=O.length>0?O[O.length-1]:-1),x.types[n].indexOf("else")>-1&&(O.length>0?O[O.length-1]=n:O.push(n)),x.types[n].indexOf("end")>-1&&O.pop(),x.types[n].indexOf("start")>-1&&O.push(n),n=n+1;while(n<o);n=o;do n=n-1,x.types[n].indexOf("end")>-1&&(l.push(n),f=f+1),x.ender[n]=f>-1?l[f]:-1,x.types[n].indexOf("start")>-1&&(l.pop(),f=f-1);while(n>e)}function ri(e){let o=0,n=e.length,f=e,x=f.map(r=>r[1]),l=()=>{let r=0,m=f.length;if(r<m)do Re(f[r])===!0&&(f[r]=ri.apply(this,f[r])),r=r+1;while(r<m)},O=(r=c)=>{let m=o,j=0,t=0,h=0,C=[],I=f[o];if(m<n)do f[m]<I?(I=f[m],C=[m]):f[m]===I&&C.push(m),m=m+1;while(m<n);if(t=C.length,m=o,j=t+o,m<j)do I[1]=x[m],f[C[h]]=f[m],f[m]=I,h=h+1,m=m+1;while(m<j);return o=o+t,o<n?O():(this.recursive===!0&&l(),e=f),r};return O(),e}function oi(e){let o=0,n=e.length,f=e,x=()=>{let O=f.length,r=0;if(r<O)do Re(f[r])&&(f[r]=oi.apply(this,f[r])),r=r+1;while(r<O)},l=(O="")=>{let r=o,m=0,j=0,t=0,h=f[o],C=[],I=c,u=typeof h;if(r<n)do I=typeof f[r],f[r]>h||I>u?(h=f[r],C=[r]):f[r]===h&&C.push(r),r=r+1;while(r<n);if(j=C.length,r=o,m=j+o,r<m)do f[C[t]]=f[r],f[r]=h,t=t+1,r=r+1;while(r<m);return o=o+j,o<n?l():(this.recursive===!0&&x(),e=f),O};return l(),e}function li(e){let o=e,n=[e[0]],f=()=>{let l=0,O=o.length;if(l<O)do Re(o[l])&&(o[l]=li.apply(this,o[l])),l=l+1;while(l<O)},x=l=>{let O=0,r=[],m=o.length;if(O<m)do o[O]!==l&&r.push(o[O]),O=O+1;while(O<m);o=r,r.length>0?(n.push(r[0]),x(r[0])):(this.recursive===!0&&f(),e=o);};return x(this.array[0]),e}function Wi(e={embedded:{schema:[{language:"json"}],style:[{language:"css"}],stylesheet:[{language:"css"},{language:"scss",argument:/['"]scss['"]/}],javascript:[{language:"javascript"}]},tags:["form","paginate","capture","case","comment","for","if","raw","tablerow","unless","schema","style","script","stylesheet","javascript"],control:["if","unless","case"],else:["else","elsif","when"],singletons:["include","layout","section","assign","liquid","break","continue","cycle","decrement","echo","increment","render"]}){let o=new Set(e.else),n=new Set(e.control),f=new Set(e.tags),x=new Set(e.singletons),l={};return O(e.embedded),{get grammar(){return e},get tags(){return f},get control(){return n},get else(){return o},get singleton(){return x},get embed(){return l},extend(r){for(let m in r)if(Re(r[m]))for(let j of r[m])m==="tags"&&f.has(j)===!1?(e.tags.push(j),f.add(j)):m==="else"&&o.has(j)===!1?(e.else.push(j),o.add(j)):m==="control"&&n.has(j)?(e.control.push(j),n.add(j)):m==="singletons"&&x.has(j)===!1&&(e.singletons.push(j),x.add(j));else m==="embedded"&&typeof r[m]=="object"&&O(r[m]);}};function O(r){for(let m in r)for(let{language:j,argument:t=null}of r[m])if(m in l||(l[m]={tag:m,language:j,args:new Map([[new Set,{tag:m,language:j}]])}),t){for(let[h]of l[m].args)if(h!==null)if(Re(t))for(let C of t)h.has(C)||h.add(C);else {let C=new RegExp(t);if(h.size>0)for(let I of h)I instanceof RegExp&&I.source!==C.source&&h.add(C);else h.add(C);}}}}function Ti(e={tags:["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]}){let o=new Set(e.tags);return {get grammar(){return e},get tags(){return o},extend(n){for(let f in n)if(Re(n[f]))for(let x of n[f])f==="tags"&&o.has(x)===!1&&(e.tags.push(x),o.add(x));}}}function Mi(e={embedded:{script:[{language:"javascript"},{language:"json",attribute:{type:["application/json","application/ld+json"]}},{language:"jsx",attribute:{type:["text/jsx","application/jsx"]}}],style:[{language:"css"}]},voids:["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],tags:["a","abbr","acronym","address","applet","article","aside","audio","b","basefont","bdi","bdo","big","blockquote","body","button","canvas","caption","center","cite","code","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","fieldset","figcaption","figure","figure","font","footer","form","frame","frameset","h1","h6","head","header","html","i","iframe","ins","isindex","kbd","label","legend","fieldset","li","main","map","mark","marquee","menu","meter","nav","noframes","frame","noscript","object","ol","optgroup","option","output","p","object","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","picture","video","audio","span","strike","strong","style","sub","summary","details","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","audio","video","tt","u","ul","var","video"]}){let o=new Set(e.tags),n=new Set(e.voids),f={};return x(e.embedded),{get grammar(){return e},get tags(){return o},get voids(){return n},get embed(){return f},extend(l){for(let O in l)if(Re(l[O]))for(let r of l[O])O==="tags"&&o.has(r)===!1?(e.tags.push(r),o.add(r)):O==="voids"&&n.has(r)===!1&&(e.voids.push(r),n.add(r));else O==="embedded"&&typeof l[O]=="object"&&x(l[O]);}};function x(l){for(let O in l){O in f||(f[O]={tag:O,attr:new Map});for(let{language:r,attribute:m}of l[O])if("language"in f[O]||(f[O].language=r),f[O].attr.has(r)||f[O].attr.set(r,{tag:O,language:r,attr:new Map}),m){let j=f[O].attr.get(r);for(let t in m){j.attr.has(t)||j.attr.set(t,{tag:O,language:r,attr:t,value:new Set});let h=f[O].attr.get(r).attr.get(t);if(Re(m[t]))for(let C of m[t])h.value.has(C)||h.value.add(C);else {let C=new RegExp(m[t]);if(h.value.size>0)for(let I of h.value)I instanceof RegExp&&I.source!==C.source&&h.value.add(C);else h.value.add(C);}}}}}}function Ii(e={units:["%","cap","ch","cm","deg","dpcm","dpi","dppx","em","ex","fr","grad","Hz","ic","in","kHz","lh","mm","ms","mS","pc","pt","px","Q","rad","rem","rlh","s","turn","vb","vh","vi","vmax","vmin","vw"],atrules:["@charset","@color-profile","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@supports"],webkit:{classes:["webkit-any","webkit-any-link*","webkit-autofill"],elements:["webkit-file-upload-button","webkit-inner-spin-button","webkit-input-placeholder","webkit-meter-bar","webkit-meter-even-less-good-value","webkit-meter-inner-element","webkit-meter-optimum-value","webkit-meter-suboptimum-value","webkit-outer-spin-button","webkit-progress-bar","webkit-progress-inner-element","webkit-progress-value","webkit-search-cancel-button","webkit-search-results-button","webkit-slider-runnable-track","webkit-slider-thumb"]},pseudo:{classes:["active","any-link","checked","default","defined","disabled","empty","enabled","first","first-child","first-of-type","fullscreen","focus","focus-visible","focus-within","host","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","modal","not","nth-child","nth-col","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","picture-in-picture","placeholder-shown","paused","playing","read-only","read-write","required","right","root","scope","target","valid","visited","where"],elements:["after","backdrop","before","cue","cue-region","first-letter","first-line","file-selector-button","marker","part","placeholder","selection","slotted"],functions:["after","before","first-letter","first-line","host","host-context","part","slotted","lang","not","nth-child","nth-col","nth-last-child","nth-last-of-type","nth-of-type","where"]}}){let o=new Set(e.units),n=new Set(e.atrules),f=new Set(e.pseudo.classes),x=new Set(e.pseudo.elements),l=new Set(e.pseudo.functions),O=new Set(e.webkit.elements),r=new Set(e.webkit.classes);return {get grammar(){return e},get units(){return o},get pseudoClasses(){return f},get pseudoElements(){return x},get pseudoFunctions(){return l},get webkitElements(){return O},get webkitClasses(){return r},atrules(m){return n.has(m.slice(0,m.indexOf("(")).trim())},extend(m){for(let j in m){if(Re(m[j]))for(let t of m[j])j==="units"&&!o.has(t)?(e[j].push(t),o.add(t)):j==="atrules"&&!n.has(t)&&(e[j].push(t),n.add(t));if(typeof m[j]=="object"){for(let t in m[j])if(Re(m[j][t]))for(let h of m[j][t])j==="webkit"?t==="elements"?(e[j][t].push(h),O.add(h)):t==="classes"&&(e[j][t].push(h),r.add(h)):j==="pseudo"&&(t==="elements"?(e[j][t].push(h),x.add(h)):t==="classes"?(e[j][t].push(h),f.add(h)):t==="functions"&&(e[j][t].push(h),l.add(h)));}}}}}function Di(e={keywords:["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]}){let o=new Set(e.keywords);return {get grammar(){return e},get keywords(){return o},extend(n){for(let f in n)if(Re(n[f]))for(let x of n[f])f==="keywords"&&!o.has(x)&&(e[f].push(x),o.add(x));}}}var ye=function(){let e=Ii(),o=Wi(),n=Di(),f=Mi(),x=Ti();return {html:f,liquid:o,js:n,css:e,svg:x,extend(l){if(typeof l=="object")for(let O in l)O==="liquid"?o.extend(l.liquid):O==="html"?f.extend(l.html):O==="css"?e.extend(l.css):(O==="js"||O==="svg")&&n.extend(l.js);return {get html(){return f.grammar},get liquid(){return o.grammar},get js(){return n.grammar},get css(){return e.grammar},get svg(){return e.grammar}}}}}();function Ie(e,o=NaN,n){if(ht(e)===!1)return c;if(E(e,60)&&E(e,123))return n||e;if(i(e,60)){let l=e.search(/[\s>]/),O=e.slice(i(e[1],47)?2:1,l);return i(O,63)&&$e(O,63)?"xml":isNaN(o)?O:O.slice(o)}let x=(i(e[2],45)?e.slice(3).trimStart():e.slice(2).trimStart()).split(/\s|-?[%}]}/).shift();return isNaN(o)?x:x.slice(o)}function Qt(e){return (o,n,f)=>{let x=e,l=e;return i(f[n-1],92)&&(x=o[0]),i(o[o.length-2],92)&&(l=o[o.length-1]),x+o.slice(1,-1)+l}}var We={version:"0.5.5-beta.1",env:typeof process!="undefined"&&process.versions!=null?"node":"browser",lastUpdate:new Date().toDateString(),cwd:null,reportStats:!0,editorConfig:!1,throwErrors:!0,persistRules:!0,logLevel:2,logColors:!0,resolveConfig:"package.json"};function Ke(e,o,n){n||(n=Ie(o));let f=ci(e,n,s.lineNumber);f.language=Ze(s.language),s.error=Lt(f.message,X,Qi(),X,f.details,X,`Language: ${Ze(s.language)} `,`Location: ${s.lineNumber}:${s.lineColumn}`,`\xC6sthetic: Parse Failed (Code: ${f})`);}function Ot(e,o,n){n||(n=Ie(o.token));let f=ci(e,n,o.line);f.language=Ze(s.language),s.error=Lt(f.message,X,_i(o),X,f.details,X,Oe(`Language: ${Ze(s.language)}`),Oe(`Location: ${o.line}`),Oe(`\xC6sthetic: Parse Failed (Code: ${e})`));}function qe(e){return Lt(`Rule Error: ${e.message}`,X,`Definition: ${e.option}`,`Provided: ${e.provided} `,`Expected: ${e.expected.join(", ")} `)}var ui=e=>`\x1B[93m${"^".repeat(e)}\x1B[39m`;function _i(e){let o=e.line-s.get(e.index).lines,n=0,f="",x=s.source.split(X).slice(o,e.line),l=`${e.line+1}`.length,O=[],{indentSize:r,indentChar:m}=s.rules;do{let j=`${o+1}`,t=l-j.length>0?` \x1B[90m${j} |`:`\x1B[90m${j} |`;if(f=x[n],n===0){if(De(x[n])){O.push(`${t} \x1B[31m${e.token}\x1B[39m`);break}f=x[n].trimStart(),O.push(`${t} \x1B[31m${f}\x1B[39m`);}else {let h=f.match(/^\s*/);h!==null&&h[0].length>r?(f=m.repeat(r)+f.trimStart(),O.push(`${t} \x1B[31m${f}\x1B[39m`)):O.push(`${t} \x1B[31m${f}\x1B[39m`);}n=n+1,o=o+1;}while(n<x.length);return O.join(X)}function Qi(e=s.lineNumber){let o=[],n=s.source.split(X),f=e,x=`${f+1}`.length,l=f-1,O="";n.length>2&&(l=f-3),n.length===2&&(l=f-2);do{let r=`${l+1}`,m=x-r.length>0?` \x1B[90m${r} |`:`\x1B[90m${r} |`,j=n[l].trim();if(l>f)break;if(!j){o.push(`${m} \x1B[90m${j||"\u2424"}`),l=l+1;continue}l===f-1?j.length===0?o.push(`${" ".repeat(x+2)} ${ui(O.length)}`):(o.push(`${m} \x1B[31m${j}\x1B[39m`),o.push(`${" ".repeat(x+2)} ${ui(j.length)}`)):o.push(`${m} \x1B[90m${j||"\u2424"}`),l=l+1,O=j;}while(l<f);return o.join(X)}function Oe(...e){return We.logColors?`${e.join(X)}`.replace(/"(.*?)"/g,"\x1B[31m$1\x1B[39m"):e.join(X)}function ci(e,o,n=s.lineNumber){return {[105]:{code:e,message:Oe(`Syntax Error (line ${n}): Missing HTML "${o}" end tag`),details:Oe(`The "<${o}>" tag type has an incomplete HTML syntactic structure resulting in a parse error.`,`To resolve the issue check that you have a closing "</${o}>" tag. For more information`,"see: https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags")},[112]:{code:e,message:Oe(`Syntax Error (line ${n}): Missing Liquid "end${o}" tag`),details:Oe(`The Liquid "${o}" is a tag block type which requires an end tag be provided.`,"For more information, see: https://shopify.dev/api/liquid/tags")},[104]:{code:e,message:Oe(`Syntax Error (line ${n}): Missing HTML start "${o}" tag`),details:Oe("There is an incorrect placement or an incomplete structure resulting in a parse error.",`To resolve the issue, you may need to provide a start \`<${o}>\` tag type or correct the placement. `)},[110]:{code:e,message:Oe(`Syntax Error (line ${n}): Missing Liquid start "${o}" tag`),details:Oe("The Liquid tag has incorrect placement or an incomplete structure resulting in a parse error.","To resolve the issue, you may need to provide a start tag type or correct the placement. ")},[111]:{code:e,message:Oe(`Syntax Error (line ${n}): Missing Close Delimiter "%}" or "}}" on liquid tag`),details:Oe("The Liquid tag is missing its closing delimiter resulting in malformed syntax.")},[106]:{code:e,message:Oe(`Syntax Error (line ${n}): Missing HTML ">" delimiter on end tag`),details:Oe("The HTML tag is missing its closing delimiter resulting in malformed syntax.",'You can have Esthetic autofix syntax errors like this by setting the markup rule "correct" to true.')},[107]:{code:e,message:Oe(`Illegal Syntax (line ${n}): Invalid HTML Comment Attribute`),details:Oe("HTML comments are not allowed inside tags, start or end, at all.","To resolve the issue, remove the comment or place it above the tag.","For more information see: https://html.spec.whatwg.org/multipage/syntax.html#start-tags")},[103]:{code:e,message:Oe(`Syntax Error (line ${n}): Invalid quotation character`),details:Oe(`Bad quotation character (\u201C, &#x201c) provided. Only single ' or double "`,"quotations characters are valid in HTML (markup) languages. For more information see:","https://html.spec.whatwg.org/multipage/parsing.html#attribute-value-(double-quoted)-state")},[108]:{code:e,message:Oe(`Syntax Error (line ${n}): Invalid CDATA Termination Sequence`),details:Oe("The CDATA bracket state sequence provided is invalid resulting in a parse error.","For more information see: https://html.spec.whatwg.org/multipage/parsing.html#cdata-section-bracket-state")},[114]:{code:e,message:Oe(`Syntax Error (line ${n}): Invalid character sequence in "${o}" token`),details:Oe("An invalid sequence of characters defined")},[101]:{code:e,message:Oe(`Syntax Error (line ${n}): Unterminated String`),details:Oe("There is an unterminated string sequence resulting in a parse error.")}}[e]}var mt=/\S/,rt=/^\s+$/;var et=/\s+/g,ot=/^\s+/,Pe=/\s+$/,Je=/^[\t\v\f\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/,Ft=/[\t\v\f \u00a0\u2000-\u200b\u2028-\u2029\u3000]+$/,pi=/[\t\v\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/g;var Ht=/^\n+/;var di=/({%-?\s*(?:comment\s*-?%}|#)|<!-{2})\s*esthetic-ignore-(start|next|end)\b/;var lt=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|<!-{2})\s*esthetic-ignore-start\b/,vt=/^\/\/\s*esthetic-ignore-start\b/,hi=/^\/\*{1,2}(?:\s*|\n\s*\*\s*)esthetic-ignore-start\b/;var gi=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|<!--)\s*esthetic-ignore-next\b/,bt=/^<!--+/,kt=/--+>$/,mi=/{%-?|-?%}/g;var bi=/^{%-?\s*#/;var zt=/(\/|\\|\||\*|\[|\]|\{|\})/g;function at(e){let{rules:o}=s,n=[],f=[],x=e.begin.replace(zt,Dt),l=i(e.begin[0],123)&&i(e.begin[1],37),O=new RegExp(`^(${x}\\s*esthetic-ignore-start)`),r=new RegExp(`(${x}\\s*)`),m=l?new RegExp(`\\s*${e.ender.replace(mi,g=>i(g,123)?"{%-?\\s*":"\\s*-?%}")}$`):new RegExp(e.ender.replace(zt,Dt)),j=e.start,t=0,h=0,C=0,I=0,u=[],p=c,d=c,P=!1,K=!1,Z=!1,a=c,L=e.ender.length-1,z=e.ender.charAt(L),A=0;function F(){if(rt.test(u[t+1])||u[t+1]===c)do t=t+1;while(t<I&&(rt.test(u[t+1])||u[t+1]===c));t<I-1&&f.push(c);}function ie(){let g=X;j=j+1;do{if(n.push(e.chars[j]),n.slice(n.length-19).join(c)==="esthetic-ignore-end"){if(l){let q=e.chars.indexOf("{",j);if(i(e.chars[q+1],37)){let M=e.chars.slice(q,e.chars.indexOf("}",q+1)+1).join(c);m.test(M)&&(e.ender=M);}}j=j+1;break}j=j+1;}while(j<e.end);t=j,L=e.begin.length-1,z=e.begin.charAt(L);do{if(e.begin==="/*"&&i(e.chars[t-1],47)&&(i(e.chars[t],42)||i(e.chars[t],47))||e.begin!=="/*"&&e.chars[t]===z&&e.chars.slice(t-L,t+1).join(c)===e.begin)break;t=t-1;}while(t>e.start);if(e.begin==="/*"&&i(e.chars[t],42)?g="*/":e.begin!=="/*"&&(g=e.ender),L=g.length-1,z=g.charAt(L),g!==X||e.chars[j]!==X)do{if(n.push(e.chars[j]),g===X&&e.chars[j+1]===X||e.chars[j]===z&&e.chars.slice(j-L,j+1).join(c)===g)break;j=j+1;}while(j<e.end);return e.chars[j]===X&&(j=j-1),a=n.join(c).replace(Ft,c),[a,j]}do{if(n.push(e.chars[j]),i(e.chars[j],10)&&(s.lineOffset=s.lines(j,s.lineOffset)),e.chars[j]===z&&e.chars.slice(j-L,j+1).join(c)===e.ender)break;j=j+1;}while(j<e.end);if(a=n.join(c),O.test(a)===!0)return ie();if(l===!0&&o.liquid.preserveComment||l===!1&&o.markup.preserveComment||s.lexer==="style"&&o.style.preserveComment||s.lexer==="script"&&o.style.preserveComment||o.wrap<1||j===e.end||a.length<=o.wrap&&a.indexOf(X)<0||e.begin==="/*"&&a.indexOf(X)>0&&a.replace(X,c).indexOf(X)>0&&/\n(?!(\s*\*))/.test(a)===!1)return [a,j];if(t=e.start,t>0&&E(e.chars[t-1],10)&&oe(e.chars[t-1]))do t=t-1;while(t>0&&E(e.chars[t-1],10)&&oe(e.chars[t-1]));p=e.chars.slice(t,e.start).join(c);let R=new RegExp(X+p,"g");u=a.replace(/\r\n/g,X).replace(R,X).split(X),I=u.length,u[0]=u[0].replace(r,c),u[I-1]=u[I-1].replace(m,c),I<2&&(u=u[0].split(te)),u[0]===c?u[0]=e.begin:u.splice(0,0,e.begin),I=u.length,t=0;do{if(d=t<I-1?u[t+1].replace(Je,c):c,rt.test(u[t])===!0||u[t]===c)F();else if(u[t].replace(Je,c).length>o.wrap&&u[t].replace(Je,c).indexOf(te)>o.wrap)u[t]=u[t].replace(Je,c),h=u[t].indexOf(te),f.push(u[t].slice(0,h)),u[t]=u[t].slice(h+1),t=t-1;else {if(A=t<1?o.wrap-e.begin.length+1:o.wrap,u[t]=(e.begin==="/*"&&u[t].indexOf("/*")!==0?"   ":c)+u[t].replace(Je,c).replace(Ft,c).replace(et,te),C=u[t].replace(Je,c).indexOf(te),h=u[t].length,h>A&&C>0&&C<A){h=A;do if(h=h-1,oe(u[t].charAt(h))&&h<=o.wrap)break;while(h>0);/^\s*\d+\.\s/.test(u[t])===!0&&/^\s*\d+\.\s/.test(u[t+1])===!1&&u.splice(t+1,0,"1. "),rt.test(u[t+1])===!0||u[t+1]===c?(f.push(u[t].slice(0,h)),u[t]=u[t].slice(h+1),P=!0,t=t-1):/^\s*[*-]\s/.test(u[t+1])?(f.push(u[t].slice(0,h)),u[t]=u[t].slice(h+1),K=!0,t=t-1):/^\s*\d+\.\s/.test(u[t+1])?(f.push(u[t].slice(0,h)),u[t]=u[t].slice(h+1),Z=!0,t=t-1):u[t].replace(Je,c).indexOf(te)<o.wrap&&(u[t+1]=u[t].length>o.wrap?u[t].slice(h+1)+s.crlf+u[t+1]:u[t].slice(h+1)+te+u[t+1]),P===!1&&K===!1&&Z===!1&&(u[t]=u[t].slice(0,h));}else u[t+1]!==void 0&&(u[t].length+d.indexOf(te)>o.wrap&&d.indexOf(te)>0||u[t].length+d.length>o.wrap&&d.indexOf(te)<0)?(f.push(u[t]),t=t+1):(u[t+1]!==void 0&&rt.test(u[t+1])===!1&&u[t+1]!==c&&/^\s*(?:[*-]|\d+\.)\s/.test(u[t+1]),f.push(u[t]),P=!0);K=!1,Z=!1;}t=t+1;}while(t<I);return f.length>0?(f[f.length-1].length>o.wrap-(e.ender.length+1)||u.length-1>f.length&&u.slice(f.length+1).forEach(g=>{g===c&&f.push(g);}),f.push(e.ender),a=f.join(s.crlf)):(u[u.length-1]=u[u.length-1]+e.ender,a=u.join(s.crlf)),[a,j]}function Rt(e){let{wrap:o}=s.rules,{preserveComment:n}=s.rules[s.lexer],f=e.start,x=0,l=c,O=[];function r(){let j=c;do if(x=x+1,i(e.chars[x+1],10))return;while(x<e.end&&oe(e.chars[x]));if(e.chars[x]+e.chars[x+1]==="//"){O=[];do O.push(e.chars[x]),x=x+1;while(x<e.end&&E(e.chars[x],10));j=O.join(c),/^\/\/ (?:[*-]|\d+\.)/.test(j)===!1&&/^\/\/\s*$/.test(j)===!1&&(l=`${l} ${j.replace(/(^\/\/\s*)/,c).replace(Pe,c)}`,f=x-1,r());}}function m(){let j=[],t={ender:-1,types:"comment",lexer:e.lexer,lines:s.lineOffset};s.count>-1?(t.begin=s.stack.index,t.stack=s.stack.token,t.token=s.data.token[s.count]):(t.begin=-1,t.stack="global",t.token=c);let h=0,C=0;if(l=l.replace(/\s+/g,te).replace(Pe,c),C=l.length,!(o>C)){do{if(h=o,E(l[h],32)){do h=h-1;while(h>0&&E(l[h],32));if(h<3){h=o;do h=h+1;while(h<C-1&&E(l[h],32))}}j.push(l.slice(0,h)),l=`// ${l.slice(h).replace(ot,c)}`,C=l.length;}while(o<C);h=0,C=j.length;do t.token=j[h],s.push(s.data,t,c),t.lines=2,s.lineOffset=2,h=h+1;while(h<C)}}do O.push(e.chars[f]),f=f+1;while(f<e.end&&E(e.chars[f],10));if(f===e.end?e.chars.push(X):f=f-1,l=O.join(c).replace(Pe,c),vt.test(l)===!0){let j=X;f=f+1;do O.push(e.chars[f]),f=f+1;while(f<e.end&&(E(e.chars[f-1],100)||i(e.chars[f-1],100)&&O.slice(O.length-19).join(c)!=="esthetic-ignore-end"));x=f;do;while(x>e.start&&i(e.chars[x-1],47)&&(i(e.chars[x],42)||i(e.chars[x],47)));if(i(e.chars[x],42)&&(j="*/"),j!==X||E(e.chars[f],10))do{if(O.push(e.chars[f]),j===X&&i(e.chars[f+1],10))break;f=f+1;}while(f<e.end&&(j===X||j==="*/"&&(i(e.chars[f-1],42)||i(e.chars[f],47))));return e.chars[f]===X&&(f=f-1),l=O.join(c).replace(Pe,c),[l,f]}return l==="//"||n===!0?[l,f]:(l=l.replace(/(\/\/\s*)/,"// "),o<1||f===e.end-1&&s.data.begin[s.count]<1?[l,f]:(x=f+1,r(),m(),[l,f]))}var Qe=Object.assign;var Gt={global:{preset:{description:"Use preset style guide as the base defaults",default:"default",type:"choice",values:[{rule:"default",description:"This is the default and the most unobtrusive."},{rule:"recommended",description:"This style guide is typically suited for most cases"},{rule:"strict",description:"This is a strict ruleset curated by the projects author."},{rule:"warrington",description:"This style guide preset is best suited for Shopify theme developers"},{rule:"prettier",description:"This preset replicates the Prettier style"}]},correct:{default:!1,description:"Automatically correct some sloppiness in code.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},crlf:{description:"If line termination should be Windows (CRLF) format. Unix (LF) format is the default.",type:"boolean",default:!1,preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},endNewline:{description:"Insert an empty line at the end of output.",type:"boolean",default:!1,preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},indentSize:{description:"The number of character values to comprise a single indentation.",type:"number",default:2,preset:{default:2,prettier:2,recommended:2,strict:2,warrington:2}},indentChar:{description:"The string characters to comprise a single indentation. Any string combination is accepted.",type:"string",default:" ",preset:{default:" ",prettier:" ",recommended:" ",strict:" ",warrington:" "}},indentLevel:{default:0,type:"number",description:"How much indentation padding should be applied to beautification? This is typically used internally",preset:{default:0,prettier:0,recommended:0,strict:0,warrington:0}},language:{description:"The language name",type:"choice",default:"auto",values:[{rule:"auto",description:"Detect Language"},{rule:"text",description:"Plain Text"},{rule:"html",description:"HTML"},{rule:"liquid",description:"HTML + Liquid"},{rule:"javascript",description:"JavaScript"},{rule:"jsx",description:"JSX"},{rule:"typescript",description:"TypeScript"},{rule:"tsx",description:"TSX"},{rule:"json",description:"JSON"},{rule:"css",description:"CSS"},{rule:"scss",description:"SCSS"},{rule:"less",description:"LESS"},{rule:"xml",description:"XML"}]},preserveLine:{default:2,description:"The maximum number of consecutive empty lines to retain.",type:"number",preset:{default:2,prettier:2,recommended:3,strict:1,warrington:3}},wrap:{default:0,description:"Character width limit before applying word wrap. A 0 value disables this option. A negative value concatenates script strings.",type:"number",preset:{default:0,prettier:80,recommended:120,strict:0,warrington:100}},wrapFraction:{default:0,description:"Wrap fraction is used on internal structures as a secondary point of control. By default, it will use a 75% metric according to `wrap` defined values.",type:"number",preset:{default:0,prettier:80,recommended:80,strict:80,warrington:0}}},liquid:{commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},delimiterTrims:{default:"preserve",description:"How delimiter whitespace trim dashes should handled on Liquid tokens. You should avoid setting this to force in order to avoid stripping whitespace between text content.",type:"choice",values:[{rule:"preserve",description:"All trim dash occurances of trims intact"},{rule:"never",description:"Removes all trim dash occurances for tags and output tokens"},{rule:"always",description:"Applies trime dashes to all tags and output tokens"},{rule:"tags",description:"Applies trim dashes to tags tokens only"},{rule:"outputs",description:"Applies trim dashes to output object tokens only"},{rule:"multiline",description:"Applies trim dashes to multline token expressions only"}],preset:{default:"preserve",prettier:"preserve",recommended:"preserve",strict:"multiline",warrington:"preserve"}},ignoreTagList:{default:[],description:"A list of liquid tag to ignore",type:"array",preset:{default:[],prettier:["javascript","capture"],recommended:["javascript"],strict:[],warrington:[]}},indentAttribute:{default:!1,description:"Whether or not markup tags with Liquid contained attributes should apply indentation",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!1,warrington:!0}},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},normalizeSpacing:{default:!0,description:"Whether or not to normalize the distributed spacing contained in Liquid tokens.",type:"boolean",preset:{default:!0,prettier:!0,recommended:!0,strict:!0,warrington:!0}},lineBreakSeparator:{default:"default",description:"Controls the placement of Liquid tag separator type characters in newline structures.",type:"choice",values:[{rule:"preserve",description:"Leave line break character intace"},{rule:"before",description:"Place line break character at the start of expressions"},{rule:"after",description:"Place line break character at the end of expressions"}],preset:{default:"preserve",prettier:"after",recommended:"before",strict:"before",warrington:"after"}},dedentTagList:{default:[],description:"List of tags which will have their inner contents excluded from indentation",type:"array",preset:{default:[],prettier:["schema"],recommended:[],strict:[],warrington:[]}},forceArgument:{default:0,description:"Forces arguments onto newlines. When this value is `0` then arguments will be forced according to wrap fraction limit.",type:"number",preset:{default:0,prettier:0,recommended:3,strict:3,warrington:0}},forceFilter:{default:0,description:"Forces filter pipes onto newlines. When this value is `0` then filters will be forced according to wrap fraction limit.",type:"number",preset:{default:0,prettier:0,recommended:5,strict:4,warrington:0}},delimiterPlacement:{default:"preserve",description:"Controls the placement of Liquid delimiters",type:"choice",values:[{rule:"preserve",description:"Preserve delimiters"},{rule:"default",description:"Use defaults"},{rule:"consistent",description:"Place line break character at the start of expressions"},{rule:"inline",description:"Place line break character at the end of expressions"},{rule:"force-inline",description:"Place line break character at the end of expressions"},{rule:"force-multiline",description:"Place line break character at the end of expressions"}],preset:{default:"preserve",prettier:"default",recommended:"consistent",strict:"force-multiline",warrington:"consistent"}},preserveInternal:{default:!1,description:"Whether or not to preserve the inner contents of tokens",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}],preset:{default:"none",prettier:"double",recommended:"single",strict:"single",warrington:"single"}}},markup:{attributeSort:{default:!1,description:"Alphanumerically sort markup attributes. Attribute sorting is ignored on tags that contain attributes template attributes.",type:{array:"A list of attributes to begin sorting order with",boolean:"Whether or not to apply alphanumeric sorting"},preset:{default:!1,prettier:!1,recommended:!0,strict:["id","class","type","name","value"],warrington:!1}},attributeCasing:{default:"preserve",description:"Controls the casing of attribute values and keys.",type:"choice",values:[{rule:"preserve",description:"All tag attribute keys/values are preserved and left intact."},{rule:"lowercase",description:"All tag attribute keys/values are converted to lowercase"},{rule:"lowercase-name",description:"Only attribute keys are converted to lowercase"},{rule:"lowercase-value",description:"Only attribute values are converted to lowercase"}],preset:{default:"preserve",prettier:"preserve",recommended:"lowercase-name",strict:"lowercase-name",warrington:"preserve"}},commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!0,strict:!0,warrington:!1}},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!0,strict:!0,warrington:!0}},delimiterTerminus:{description:"Whether or not ending HTML tag delimiters should be forced onto a newline. This will emulate the style of Prettier's singleAttributePerLine formatting option, wherein the last > delimiter character breaks itself onto a new line",default:"inline",type:"choice",values:[{rule:"inline",description:"Inline the ending delimiter"},{rule:"force",description:"Force the ending delimiter onto its own line"},{rule:"adapt",description:"adapt the delimiter in accordance with structure"}],preset:{default:"inline",prettier:"force",recommended:"adapt",strict:"adapt",warrington:"adapt"}},forceAttribute:{default:!1,description:"If all markup attributes should be indented each onto their own line. This option accepts either a boolean or number value, depending on your preferences you can either force attributes based a count limit, disable forcing or always enable enforcing.",type:{number:"Optionally define an attribute force threshold. When the number of attributes exceeds this limit then they will be forced, otherwise they will be left intact.",boolean:"Whether or not to enforce the rule. A value of true will always force attributes, whereas a value of false will never force attributes."},preset:{default:!1,prettier:1,recommended:2,strict:2,warrington:2}},forceIndent:{default:!1,description:"Will force indentation upon all content and tags without regard for the creation of new text nodes.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},ignoreJS:{default:!0,description:"Whether to ignore embedded regions of tags identified to contain JavaScript",type:"boolean",preset:{default:!0,prettier:!0,recommended:!0,strict:!1,warrington:!1}},ignoreCSS:{default:!1,description:"Whether to ignore embedded regions of tags identified to contain CSS",type:"boolean",preset:{default:!1,prettier:!0,recommended:!1,strict:!1,warrington:!1}},ignoreJSON:{default:!1,description:"Whether HTML <script> tags annotated with a JSON identifiable attribute should be ignored from beautification.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},preserveAttribute:{default:!1,description:"If markup tags should have their insides preserved. This option is only available to markup and does not support child tokens that require a different lexer.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},preserveText:{default:!1,description:"If text in the provided markup code should be preserved exactly as provided. This option eliminates beautification and wrapping of text content.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},lineBreakValue:{default:"preserve",description:"Determines how \xC6sthetic should handle line break occurance sequences within attribute values",type:"choice",values:[{rule:"preserve",description:"Preserve the supplied value structure sequences"},{rule:"align",description:"Align all line breaks to the starting point of attribute name"},{rule:"indent",description:"Indent all line breaks from the starting point of attribute name"},{rule:"force-preserve",description:"Force encapsulated values onto newlines but preserve inner contents"},{rule:"force-align",description:"Force encapsulated values onto newlines and apply aligned formatting"},{rule:"force-indent",description:"Force encapsulated values onto newlines and apply indentation formatting"}],preset:{default:"preserve",prettier:"indent",recommended:"force-indent",strict:"force-indent",warrington:"force-indent"}},selfCloseSpace:{default:!1,description:'Markup self-closing tags end will end with " />" instead of "/>".',type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},selfCloseSVG:{default:!0,description:"Whether or not SVG type tags should be converted to self closing void types.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!0,strict:!0,warrington:!0}},stripAttributeLines:{default:!1,description:"Whether or not newlines contained within tag attributes should be removed or preserved.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!1}},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}],preset:{default:"none",prettier:"double",recommended:"double",strict:"double",warrington:"double"}}},style:{classPadding:{description:"Inserts new line characters between every CSS code block.",default:!1,type:"boolean"},commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean"},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean"},sortSelectors:{default:!1,type:"boolean",description:"If comma separated CSS selectors should present on a single line of code."},sortProperties:{description:"This option will alphabetically sort CSS properties contained within classes.",default:!1,type:"boolean"},noLeadZero:{description:"This will eliminate leading zeros from numbers expressed within values.",default:!1,type:"boolean"},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean"},atRuleSpace:{default:!0,description:"Insert a single whitespace character betwen @ rules.",type:"boolean"},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]}},json:{arrayFormat:{description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},braceAllman:{default:!1,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:!1,description:"This will create a newline before and after objects values",type:"boolean"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},objectSort:{default:!1,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean"}},script:{arrayFormat:{description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},braceAllman:{default:!1,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:!1,description:"This will create a newline before and after objects values",type:"boolean"},braceNewline:{default:!1,description:"If true an empty line will be inserted after opening curly braces and before closing curly braces.",type:"boolean"},braceStyle:{default:"none",description:"Emulates JSBeautify's brace_style option using existing Prettify options",type:"choice",values:[{rule:"none",description:"Ignores this option"},{rule:"collapse",description:"Sets formatObject to indent and neverflatten to true."},{rule:"collapse-preserve-inline",description:"Sets formatObject to inline and bracePadding to true"},{rule:"expand",description:"Sets objectIndent to indent and braceNewline + neverflatten to true."}]},caseSpace:{default:!1,type:"boolean",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation thereby keeping the case on a single line of code."},commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean"},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean"},elseNewline:{default:!1,type:"boolean",description:'If keyword "else" is forced onto a new line.'},endComma:{description:"If there should be a trailing comma in arrays and objects.",type:"choice",default:"none",values:[{rule:"none",description:"Ignore this option"},{rule:"always",description:"Always ensure there is a tailing comma"},{rule:"never",description:"Remove trailing commas"}]},objectSort:{default:!1,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},functionSpace:{default:!0,type:"boolean",description:"Inserts a space following the function keyword for anonymous functions."},functionNameSpace:{default:!0,type:"boolean",description:"If a space should follow a JavaScript function name."},methodChain:{default:-1,description:"When to break consecutively chained methods and properties onto separate lines. A negative value disables this option. A value of 0 ensures method chainsare never broken.",type:"number"},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean"},ternaryLine:{description:"If ternary operators in JavaScript `?` and `:` should remain on the same line.",type:"boolean",default:!1},neverFlatten:{default:!0,description:"If destructured lists in script should never be flattend.",type:"boolean"},noCaseIndent:{description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation, thereby keeping the case on a single line of code.",default:!1,type:"boolean"},noSemicolon:{description:"Removes semicolons that would be inserted by ASI. This option is in conflict with option `attemptCorrection` and takes precedence over conflicting features. Use of this option is a possible security/stability risk.",default:!1,type:"boolean"},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},variableList:{description:"If consecutive JavaScript variables should be merged into a comma separated list or if variables in a list should be separated. each \u2014 Ensure each reference is a single declaration statement.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"each",description:"Ensure each reference is a single declaration statement"},{rule:"list",description:"Ensure consecutive declarations are a comma separated list"}]},vertical:{description:"If lists of assignments and properties should be vertically aligned",type:"boolean",default:!1}}};function At(e,o,n){if(o==="html"){if(!(e in ye.html.embed))return !1;let f=ye.html.embed[e];if(f.attr.size>0)for(let x of f.attr.values()){if(!n)return x;if(x.attr.has(n[0])&&x.attr.get(n[0]).value.has(n[1]))return x.attr.get(n[0])}return f.attr.has(n[0])?f.attr.get(n[0]).attr.has(n[1])?f.attr.get(n[0]).attr.get(n[1]):f.attr.get(n[0]):f}else if(o==="liquid"){if(!(e in ye.liquid.embed))return !1;let f=ye.liquid.embed[e];if(f.args.size>0&&n){let x=n.slice(n.indexOf(e)+e.length).match(/\s*(.*)(?=\s)/)[0];for(let[l,O]of f.args){if(l.has(x))return O;for(let r of l)if(r instanceof RegExp&&r.test(x))return O}}return f}}function ki(e,o){return typeof o!="undefined"?e in ye[o].embed:e in ye.html.embed||e in ye.liquid.embed}function yi(e,o){let n=i(e[2],45)?3:2,f=e.slice(n),x;return o.delimiterTrims==="never"?x=`{${e[1]}`:o.delimiterTrims==="always"||o.delimiterTrims==="outputs"&&i(e[1],123)||o.delimiterTrims==="tags"&&i(e[1],37)?x=`{${e[1]}-`:x=e.slice(0,n),o.delimiterPlacement==="preserve"?x+=/^\s*\n/.test(f)?X:te:o.delimiterPlacement==="force"?x+=X:o.delimiterPlacement==="inline"||o.delimiterPlacement==="default"||o.delimiterPlacement==="force-multiline"?x+=te:o.delimiterPlacement==="consistent"&&(/^\s*\n/.test(f)?x+=X:x+=te),x+f.trim()}function qt(e,o,n){let[f,x]=wi(e),l,O=e.slice(f,x),r;return n.delimiterTrims==="never"?(l=`{${e[1]}`,r=`${e[e.length-2]}}`):n.delimiterTrims==="always"||n.delimiterTrims==="outputs"&&i(e[1],123)||n.delimiterTrims==="tags"&&i(e[1],37)?(l=`{${e[1]}-`,r=`-${e[e.length-2]}}`):(l=e.slice(0,f),r=e.slice(x)),o||(o=O.trimStart().split(/\s/)[0]||""),o==="else"||o==="break"||o==="continue"||o==="increment"||o==="decrement"||o.startsWith("end")?(l+=te,r=te+r):n.delimiterPlacement==="preserve"?(l+=/^\s*\n/.test(O)?X:te,r=(/\s*\n\s*$/.test(O)?X:te)+r):n.delimiterPlacement==="force"?(l+=X,r=X+r):n.delimiterPlacement==="inline"||n.delimiterPlacement==="default"||n.delimiterPlacement==="force-multiline"?(l+=te,r=te+r):n.delimiterPlacement==="consistent"&&(/^\s*\n/.test(O)?(l+=X,r=X+r):(l+=te,r=te+r)),O=O.trim(),l+O+r}function xi(e,o,n,{wrapFraction:f,liquid:{forceFilter:x,forceArgument:l,lineBreakSeparator:O,delimiterTrims:r,delimiterPlacement:m,preserveInternal:j}}){let[t,h]=wi(e),C,I;if(r==="never"?(C=`{${e[1]}`,I=`${e[e.length-2]}}`):r==="always"||r==="outputs"&&i(e[1],123)||r==="tags"&&i(e[1],37)?(C=`{${e[1]}-`,I=`-${e[e.length-2]}}`):r==="preserve"?(C=e.slice(0,t).join(c),I=e.slice(h).join(c)):(C=`{${e[1]}`,I=`${e[e.length-2]}}`),o==="else"||o==="break"||o==="continue"||o==="increment"||o==="decrement"||o.startsWith("end"))return C+=te,I=te+I,C+e.slice(t,h).join(c).trim()+I;if(m==="preserve"?(C+=i(e[t],10)?X:te,I=(i(e[h-1],10)?X:te)+I):m==="force"?(C+=X,I=X+I):m==="inline"||m==="default"?(C+=te,I=te+I):m==="consistent"?i(e[t],10)?(C+=X,I=X+I):(C+=te,I=te+I):(C+=te,I=te+I),o==="liquid"||j===!0)return C+e.slice(t,h).join(c).trim()+I;if(f>0&&e.length>=f&&n.logic.length>0&&(o==="if"||o==="elsif"||o==="unless"||o==="when")){r==="multiline"&&(C=`{${e[1]}-`+C[C.length-1],I=I[0]+`-${e[e.length-2]}}`),m==="force-multiline"&&(C=C.trimEnd()+X,I=X+I.trimStart());let p=n.logic.length;for(let d=0;d<p;d++){let P=n.logic[d];e[P]=X+e[P],i(e[P-1],32)&&(e[P-1]=c);}return C+e.slice(t,h).join(c).trim()+I}let u=n.pipes.length;if(u>0){if(x>0&&u>x||x===0&&f>0&&e.length>f){r==="multiline"&&(C=`{${e[1]}-`+C[C.length-1],I=I[0]+`-${e[e.length-2]}}`),m==="force-multiline"&&(C=C.trimEnd()+X,I=X+I.trimStart());for(let p=0;p<u;p++){let d=n.pipes[p];if(i(e[d-1],32)&&(e[d-1]=c),e[d]=X+e[d],p===0){let P=d-1;if(i(e[P-1],32))do e[P--]=c;while(i(e[P],32))}if(n.fargs[p]&&(l>0&&n.fargs[p].length>l||l===0&&f>0&&e.slice(n.fargs[p][0],n.fargs[p][n.fargs[p].length-1]).length>f)){let P=n.fargs[p].length;for(let K=0;K<P;K++){let Z=n.fargs[p][K];O==="after"?e[i(e[Z-1],44)?Z-1:Z]=K===0?X+"  ":He+X+" ":O==="before"?i(e[Z-1],44)?e[Z-1]=K===0?"  "+X:X+"  "+He:e[Z]=K===0?X+"  ":X+"  "+He:e[Z]=X+"  "+e[Z];}}}}return C+e.slice(t,h).join(c).trim()+I}if(n.targs.length>=l){r==="multiline"&&(C=`{${e[1]}-`+C[C.length-1],I=I[0]+`-${e[e.length-2]}}`);for(let p=0;p<n.targs.length;p++){let d=n.targs[p];O==="after"?(i(e[d+1],32)&&(e[d+1]=c),i(e[d-1],32)&&(e[d-1]=c),e[d]=i(e[d],44)?He+X:X):O==="before"&&(i(e[d-1],44)?e[d-1]=p===0?X+He:X+He:e[d]=p===0?X+He:X+He);}}return C+e.slice(t,h).join(c).trim()+I}function wi(e){return [i(e[2],45)?3:2,i(e[e.length-3],45)?e.length-3:e.length-2]}function Si(e,o=!0){return o?new RegExp(`{%-?\\s*${e}\\s*-?%}`):new RegExp(`{%-?\\s*${e}`)}function Li(e){let o=e.indexOf("{");return i(e[o+1],123)}function Vt(e){let o=e.indexOf("{");if(i(e[o+1],37)){let n;return n=e.slice(o+(i(e[o+2],45)?3:2)).trimStart(),n=n.slice(0,n.search(/[\s=|!<>,.[]|-?[%}]}/)),n.startsWith("end")?!1:ye.liquid.else.has(n)}return !1}function Ci(e){let o=e.indexOf("=");return o>-1&&(i(e[o+1],34)||i(e[o+1],39))?/{%-?\s*end[a-z]+/.test(e.slice(o,e.lastIndexOf(e[o+1]))):!1}function Jt(e){return ut(e)?/{%-?\s*end\w+/.test(e):!1}function ut(e,o=!1){let n;if(o)return i(e[0],123)&&i(e[1],37)&&i(e[e.length-2],37)&&i(e[e.length-1],125)?(n=e.slice(i(e[2],45)?3:2).trimStart(),i(n,34)||i(n,39)?!1:(n=n.slice(0,n.search(/[\s=|!<"'>,.[]|-?[%}]}/)),n.startsWith("end")?!1:ye.liquid.tags.has(n))):!1;let f=e.indexOf("{");if(f===-1)return !1;do{if(i(e[f+1],37))return n=e.slice(f+(i(e[f+2],45)?3:2)).trimStart(),n=n.slice(0,n.search(/[\s=|!<>,.[]|-?[%}]}/)),n.startsWith("end")?!1:ye.liquid.tags.has(n);f=e.indexOf("{",f+1);}while(f>-1);return !1}function Bt(e){let o=e;Array.isArray(e)&&(o=e.join(c));let n=o.indexOf("{");return i(o[n+1],37)?i(o[n+2],45)?o.slice(n+3).trimStart().startsWith("end"):o.slice(n+2).trimStart().startsWith("end"):!1}function Nt(e,o){if(o===1)return i(e[0],123)&&(i(e[1],37)||i(e[1],123));if(o===6)return i(e[0],123)&&i(e[1],37);if(o===7)return i(e[0],123)&&i(e[1],123);if(o===8)return i(e[e.length-2],37)&&i(e[e.length-1],125);if(o===9)return i(e[e.length-2],125)&&i(e[e.length-1],125);if(o===4)return /{[{%]/.test(e);if(o===5)return /{[{%]/.test(e)&&/[%}]}/.test(e);if(o===2){let n=e.length;return i(e[n-1],125)&&(i(e[n-2],37)||i(e[n-2],125))}else if(o===3){let n=e.length;return i(e[0],123)&&(i(e[1],37)||i(e[1],123))&&i(e[n-1],125)&&(i(e[n-2],37)||i(e[n-2],125))}}function Ut(e){let{data:o,rules:n}=s,f=e||s.source,x=s.language==="jsx"||s.language==="tsx",l=new Set(n.liquid.ignoreTagList),O=Re(n.markup.attributeSort)?n.markup.attributeSort.length:-1,r=Re(f)?f:f.split(c),m=r.length,j={start:-1,tname:[],index:[]},t=0,h,C=!1,I=Ut?s.language:"html",u=0;function p(R,g=c,q){if(g===c&&q===void 0)s.push(o,R,c);else if(dt(g))Qe(R,g),s.push(o,R,c);else if(Re(g))for(let M of g)Qe(R,M),s.push(o,R,c);else q?(Qe(R,q),s.push(o,R,g)):console.log("isssue");}function d(R,g=null){return s.language!=="html"&&s.language!=="liquid"&&x===!1||/(?:{[=#/]|%[>\]])|\}%[>\]]/.test(R)||!Nt(R,3)?R:qt(R,g,n.liquid)}function P(R,g=c){if(R<1)return g;let q=c,M=r.lastIndexOf(X,R);return M>-1&&(q=f.slice(M+1,R),q.length>0&&q.trim().length<1)?g?q+g:q:g}function K(R,g=r){let q=R,M=1;for(;i(g[q++],10);)M=M+1;return M}function Z(R,g=-1,q=!1){return q===!1?f.slice(R,g).trimStart():f.slice(R,g)}function a(R){let g=R;do g=g-1;while(i(r[g],92));return g=R-g,g%2===1}function L(R){return n.correct===!1||i(R[R.length-2],47)?R:/\/\s+>$/.test(R)?`${R.slice(0,R.lastIndexOf("/"))}${n.markup.selfCloseSpace?"/>":" />"}`:`${R.slice(0,-1)}${n.markup.selfCloseSpace?"/>":" />"}`}function z(R,g=!0){let q=R.indexOf("=");if(q>0){let M=R.indexOf(Ce);if(q<M&&M>0)return g?[R.slice(0,q),R.slice(q+1)]:[R.slice(0,q),R.slice(q+2,-1)];let D=R.indexOf(ve);if(q<D&&D>0)return g?[R.slice(0,q),R.slice(q+1)]:[R.slice(0,q),R.slice(q+2,-1)]}return [R,c]}function A(R){let g={lexer:"markup",lines:s.lineOffset,stack:s.stack.token!=="global"?s.stack.token:"global",begin:s.stack.index,token:c,types:c,ender:-1},q=c,M=c,D=c,ne=c,ke=c,we=!1,B=!1,_=0,ue=!1,G=!1,U=!1,le=!1,Q=[];function re(){return Y()}function Le(){if(g.types.indexOf("liquid")<0)return re();if(g.token===c&&(g.token=q),i(q[0],123)&&i(q[1],37))if(ye.liquid.else.has(ne))g.types=D=ne==="when"?"liquid_when":"liquid_else";else if(ye.liquid.tags.has(ne))g.types=D="liquid_start";else if(ne.startsWith("end")){let w=ne.slice(3);if(ye.liquid.tags.has(w))g.types=D="liquid_end";else {g.stack=w,g.types=D="liquid_end";let $=0;do{if(o.types[$]==="liquid"&&o.stack[$]===w){o.types[$]="liquid_start";break}$=o.stack.indexOf(w,$+1);}while($>-1)}}else g.stack=ne;return n.liquid.quoteConvert==="double"?g.token=q=g.token.replace(/"[^']*?"/g,Qt(Ce)):n.liquid.quoteConvert==="single"&&(g.token=q=g.token.replace(/'[^"]*?'/g,Qt(ve))),re()}function ge(){let w=q.indexOf("liquid")+6,$=c,W=c,T=1;p(g,{token:yi(q.slice(0,w),n.liquid),types:"liquid_start",stack:"liquid"});let V=q.slice(w).split(X),fe=V.pop().trim(),ae=i(fe[fe.length-3],45)?fe.length-3:fe.length-2,de=fe.slice(0,ae),se=fe.slice(ae);de.length!==0&&V.push(de),w=0;do $=V[w].trim(),W=$.split(/\s/)[0],W.startsWith("end")?(g.token=$,g.types="liquid_end",g.lines=T,p(g),T=1):W.startsWith("#")?(g.token=$,g.types="liquid",g.lines=T<=1?2:T,p(g),T=1):W.startsWith("comment")||ye.liquid.tags.has(W)?(g.token=$,g.types="liquid_start",g.lines=T,p(g),T=1):ye.liquid.else.has(W)?(g.token=$,g.types=W==="when"?"liquid_when":"liquid_else",g.lines=T,p(g),T=1):ye.liquid.singleton.has(W)?(g.token=$,g.types="liquid",g.lines=T<=1?2:T,p(g),T=1):$.trim().length>0&&(g.token=$,g.types="content",g.lines=T,p(g),T=1),w=w+1,T=T+1;while(w<V.length);p(g,{token:se,types:"liquid_end",lines:2});}function _e(){if(ne==="svg"&&(j.start=s.count+1),ye.svg.tags.has(ne)&&j.start>0){if(g.types==="start")g.types="singleton",j.tname.push(ne),j.index.push(s.count+1);else if(g.types==="end"){let w=j.tname.indexOf(ne),$=j.tname.lastIndexOf(ne);w>-1&&($===w?(o.types[j.index[$]]="start",j.tname.splice($,1),j.index.splice($,1)):o.begin[s.count]===j.index[w]?(o.types[o.begin[s.count]]="start",j.tname.splice(w,1),j.index.splice(w,1)):o.types[j.index[$]]="start"),ne==="svg"&&(j.start=-1);}}return Le()}function H(){return le&&B===!1&&D!=="xml"&&(ye.html.voids.has(ne)?(g.types=D="singleton",E(q[q.length-2],47)&&(g.token=L(q))):i(q[q.length-2],47)&&i(q[q.length-1],62)?g.types=D="singleton":g.types=D="start"),_e()}function J(){if(s.count<1)return H();let w=c;if(gi.test(o.token[s.count])){if(ye.html.voids.has(ne))return g.token=q.replace(">",Q.map(([$])=>$).join(te)+">"),g.types="ignore",p(g);D.indexOf("liquid")>-1&&ye.liquid.tags.has(ne)&&(w=`end${ne}`),B=!0,U=!1;}else ki(ne,"liquid")&&l.has(ne)&&(w=null);if(w!==null&&U===!1&&B===!0&&(R===">"||R==="}}"||R==="%}")){let $=[];if(U=!0,t=t+1,t<m){D!=="json_preserve"&&D!=="script_preserve"&&D!=="style_preserve"&&D!=="liquid_json_preserve"&&D!=="liquid_script_preserve"&&D!=="liquid_style_preserve"&&(D="ignore");let W=c,T=0,V=-1,fe=c,ae=0,de=0,se=!1;do{if(i(r[t],10)&&s.lines(t),$.push(r[t]),W===c){if(W=i(r[t],34)?Ce:i(r[t],39)?ve:c,i(r[t],123)&&(i(r[t+1],123)||i(r[t+1],37))){if(V=i(r[t+1],37)?r.indexOf("}",t)+1:r.indexOf("}",t)+2,fe=Z(i(r[t+2],45)?t+3:t+2,V),fe.startsWith(ne))T=T+1;else if(fe.startsWith(w)){if(T>0)T=T-1;else if(i(r[t+1],123)&&(V=V+1),i(r[V-2],37)){$.push(...r.slice(t+1,V)),D="liquid_ignore",t=V-1;break}}}else if(i(r[t],60)&&le===!0)se=i(r[t+1],47);else if(r[t]===M&&E(r[t-1],47))if(se===!0){if(_=_-1,_<0)break}else _=_+1;}else if(i(r[t],W.charCodeAt(W.length-1))){if(de=0,ae=W.length-1,i(W[ae],125)){if(Z(t+(i(r[t+2],45)?3:2),r.indexOf("%",t+2)).startsWith(w))break}else if(ae>-1)do{if(E(r[t-de],W.charCodeAt(ae)))break;de=de+1,ae=ae-1;}while(ae>-1);ae<0&&(W=c);}t=t+1;}while(t<m)}if(D==="ignore"){s.is("types","ignore")||(o.types[s.count]="ignore");let W=s.iterator+r.slice(s.iterator,t).join(c).search(mt),T=P(W);T===c&&(T=o.token[s.count].search(mt)>0?Xe(o.token[s.count].search(mt)):c),Q=[],q=T+r.slice(W,t-$.length+1).join(c)+$.join(c),g.types="ignore",g.token=q;}else if(D==="liquid_ignore")s.is("types","ignore")||(o.types[s.count]="ignore"),q=P(t-q.length-$.length+1,q)+$.join(c),D="ignore",g.types="ignore",g.token=q;else if(!D.startsWith("liquid_")){g.types="start",Y(!0);let W=$.lastIndexOf("<"),T=$.slice(0,W).join(c);return mt.test(T)?p(g,[{lexer:"markup",types:D,token:T},{lexer:"markup",types:"end",token:$.slice(W).join(c).trim()}]):p(g,[{lexer:"markup",types:"end",token:$.slice(W).join(c).trim()}]),C=!1,h=I,N()}}return H()}function y(){if(i(q,60)&&i(q[1],47))return J();let w=Q.length-1;if(i(q,60))if(w>-1)do{let $=At(ne,"html",z(Q[w][0],!1));if($!==!1)if($.language==="json"&&n.markup.ignoreJSON){D="json_preserve",B=!0;break}else if($.language==="javascript"&&n.markup.ignoreJS){D="script_preserve",B=!0;break}else if($.language==="css"&&n.markup.ignoreCSS){D="style_preserve",B=!0;break}else {h=$.language,D="start",C=!0,B=!1;break}w=w-1;}while(w>-1);else {let $=At(ne,"html");$!==!1&&($.language==="json"&&n.markup.ignoreJSON?(D="json_preserve",B=!0):$.language==="javascript"&&n.markup.ignoreJS?(D="script_preserve",B=!0):$.language==="css"&&n.markup.ignoreCSS?(D="style_preserve",B=!0):(h=$.language,D="start",C=!0,B=!1));}else if(ut(q,!0)){let $=At(ne,"liquid",q);if($!==!1){if(l.has(ne))return B=!0,U=!1,J();C=!0,h=$.language;}}return J()}function Y(w=!1){w!==null&&p(g);let $=s.count,W=ne.replace(/\/$/,c),T=n.markup.quoteConvert,V=0,fe=0,ae=0,de=c,se=c,ee=Q.length;function Te(){s.attributes.has($)&&V+1===ee&&It(g.token,62)&&(g.token=g.token+">");let he=g.types.indexOf("liquid_attribute")>-1;if(B===!0||T==="none"||g.types.indexOf("attribute")<0||he===!1&&T==="single"&&g.token.indexOf(Ce)<0||he===!1&&T==="double"&&g.token.indexOf(ve)<0)p(g);else {let Se=0,Ee=!1,xe=g.token.split(c),ce=g.token.indexOf("="),ct=xe.length-1;if(E(xe[ce+1],34)&&E(xe[xe.length-1],34)&&T==="single"&&he===!1)p(g);else if(E(xe[ce+1],39)&&E(xe[xe.length-1],39)&&T==="double"&&he===!1)p(g);else {if(Se=ce+2,he===!1&&(T==="double"?(g.token.slice(ce+2,ct).indexOf(Ce)>-1&&(Ee=!0),xe[ce+1]=Ce,xe[xe.length-1]=Ce):T==="single"&&(g.token.slice(ce+2,ct).indexOf(ve)>-1&&(Ee=!0),xe[ce+1]=ve,xe[xe.length-1]=ve)),Ee===!0||he===!0){he=!1;do i(xe[Se-1],123)&&(i(xe[Se],37)||i(xe[Se],123))?he=!0:i(xe[Se],125)&&(i(xe[Se-1],37)||i(xe[Se-1],125))&&(he=!1),he===!0?i(xe[Se],34)&&T==="double"?xe[Se]=ve:i(xe[Se],39)&&T==="single"&&(xe[Se]=Ce):i(xe[Se],39)&&T==="double"?xe[Se]=Ce:i(xe[Se],34)&&T==="single"&&(xe[Se]=ve),Se=Se+1;while(Se<ct)}g.token=xe.join(c),p(g);}}}function me(){if(!(!x&&!ue&&!G))return;if(O===0){Q=_t(Q,c,!1);return}let he=[];ae=0,fe=0,ee=Q.length;do{fe=0;do{if(de=Q[fe][0].split("=")[0],n.markup.attributeSort[ae]===de){he.push(Q[fe]),Q.splice(fe,1),ee=ee-1;break}fe=fe+1;}while(fe<ee);ae=ae+1;}while(ae<O);Q=_t(Q,c,!1),Q=he.concat(Q),ee=Q.length;}function be(){p(g,"jsx_attribute",{token:`${de}={`,types:"jsx_attribute_start"}),s.external("jsx",se.slice(1,se.length-1)),g.begin=s.count,/\s\}$/.test(se)?(se=se.slice(0,se.length-1),se=Pe.exec(se)[0],g.lines=se.indexOf(`
`)<0?1:se.split(`
`).length):g.lines=0,g.begin=s.stack.index,g.stack=s.stack.token,g.token="}",g.types="jsx_attribute_end",Te();}function Be(){if(Jt(Q[V][0]))g.types="liquid_attribute_chain",g.token=Q[V][0];else if(Bt(Q[V][0]))g.token=Q[V][0],g.types="liquid_attribute_end",g.ender=g.begin;else {if(ut(Q[V][0],!0))return g.types="liquid_attribute_start",g.begin=s.count,g.token=Q[V][0],Te(),!0;Vt(Q[V][0])?(g.types="liquid_attribute_else",g.token=Q[V][0]):(g.types="attribute",g.token=Q[V][0]);}return Te(),!1}if(Q.length<1)return w!==!0?void 0:N();if(i(Q[Q.length-1][0],47)&&(Q.pop(),q=q.replace(/>$/,"/>")),fe=Q.length,ae=1,ae<fe)do de=Q[ae-1][0],i(de[de.length-1],61)&&Q[ae][0].indexOf("=")<0&&(Q[ae-1][0]=de+Q[ae][0],Q.splice(ae,1),fe=fe-1,ae=ae-1),ae=ae+1;while(ae<fe);if((O>0||n.markup.attributeSort===!0)&&me(),g.begin=$,g.stack=W,g.types="attribute",V<ee)do{if(Q[V]===void 0)break;if(g.lines=Q[V][1],Q[V][0]=Q[V][0].replace(Pe,c),x===!0&&/^\/[/*]/.test(Q[V][0])){g.types="comment_attribute",g.token=Q[V][0],Te(),V=V+1;continue}if(Q[V][1]<=1&&Jt(Q[V][0])&&!Ci(Q[V][0])){g.types="liquid_attribute_chain",g.token=Q[V][0],Te(),V=V+1;continue}fe=Q[V][0].indexOf("="),ae=Q[V][0].indexOf(Ce),fe<0?(Bt(Q[V][0])?(g.token=Q[V][0],g.types="liquid_attribute_end",g.ender=g.begin):ut(Q[V][0],!0)?(g.types="liquid_attribute_start",g.begin=s.count,g.token=Q[V][0]):Vt(Q[V][0])?(g.types="liquid_attribute_else",g.token=Q[V][0]):Li(Q[V][0])?(g.types="liquid_attribute",g.token=Q[V][0]):i(Q[V][0],35)||i(Q[V][0],91)||i(Q[V][0],123)||i(Q[V][0],40)||x===!0?g.token=Q[V][0]:(g.types="liquid_attribute",g.token=n.markup.attributeCasing==="preserve"?Q[V][0]:Q[V][0].toLowerCase()),Te()):Nt(Q[V][0],6)?Be():(de=Q[V][0].slice(0,fe),/\n/.test(Q[V][0])&&(n.markup.lineBreakValue==="force-preserve"||n.markup.lineBreakValue==="force-indent"||n.markup.lineBreakValue==="force-align")?se=Q[V][0][fe+1]+X+Q[V][0].slice(fe+2,-1).trim()+X+Q[V][0][Q[V][0].length-1]:se=Q[V][0].slice(fe+1),n.markup.attributeCasing==="lowercase-name"?(de=de.toLowerCase(),Q[V][0]=de+"="+se):n.markup.attributeCasing==="lowercase-value"?(se=se.toLowerCase(),Q[V][0]=de+"="+se):(n.markup.attributeCasing==="lowercase"&&(de=de.toLowerCase(),se=se.toLowerCase()),Q[V][0]=de+"="+se),n.correct===!0&&E(se,60)&&E(se,123)&&E(se,61)&&E(se,34)&&E(se,39)&&(se=Ce+se+Ce),x===!0&&/^\s*{/.test(se)?(be(),g.types="attribute",g.begin=$,g.stack=W):Nt(de,6)?Be():(g.types="attribute",g.token=Q[V][0],Te())),V=V+1;}while(V<ee);if(!w)return N()}function k(w,$){if(w=w.trimStart().split(/\s/)[0],w==="comment"||l.has(w)){let W=f.indexOf("{%",$),T=W;r[W+1].charCodeAt(0)===45&&(T=W+1),T=f.indexOf(`end${w}`,T),T>0&&(T=r.indexOf("}",T),T>0&&r[T-1].charCodeAt(0)===37&&(w!=="comment"?(D="ignore",B=!0,ke=f.slice(t,$+1),R=f.slice(W,T+1)):(D="comment",ke=f.slice(t,$+1),W=f.lastIndexOf("{%",T),R=f.slice(W,T+1))));}}function b(w){s.iterator=t;let $=at({chars:r,end:m,lexer:"markup",begin:ke,start:t,ender:R});if(q=$[0],t=$[1],di.test(q))if(lt.test(q)){let W;q.startsWith("<!--")?W=q.indexOf("-->")+3:bi.test(q)?W=q.indexOf("%}")+2:W=q.indexOf("%}",q.indexOf("%}")+2)+2,p(g,[{token:P(s.iterator,q.slice(0,W)),types:"ignore"},{token:q.slice(W).replace(Ht,c),types:"ignore",lines:K(W,q)}]);}else p(g,{token:P(s.iterator,q),types:"ignore"}),s.iterator=t+1;else {if(i(q[0],123)&&i(q[1],37)&&w===!1){let W=q.indexOf("%}",2)+2,T=q.lastIndexOf("{%");q=d(q.slice(0,W),ne)+q.slice(W,T)+d(q.slice(T),ne);}return g.token=q,g.types="comment",y()}}function v(w){let $=t,W=t+w;do{if(i(r[W],62))return t=W,f.slice($,W+1);W=W+1;}while(W<m)}function S(){if(R==="---")ke="---",D="ignore",U=!0;else if(i(r[t],60))if(i(r[t+1],123)&&(i(r[t+2],123)||i(r[t+2],37))){let w=v(3);we=!0,s.stack.push(["liquid_bad",s.count]),p(g,{token:w,types:"liquid_start_bad"});return}else if(i(r[t+1],47))if(i(r[t+2],123)&&(i(r[t+3],123)||i(r[t+3],37))){let w=v(3);p(g,{token:w,types:"liquid_end_bad"});return}else D="end",R=">";else i(r[t+1],33)?(i(r[t+2],100)||i(r[t+2],68))&&(i(r[t+3],111)||i(r[t+3],79))&&(i(r[t+4],99)||i(r[t+4],67))&&(i(r[t+5],116)||i(r[t+5],84))&&(i(r[t+6],121)||i(r[t+6],89))&&(i(r[t+7],112)||i(r[t+7],80))&&(i(r[t+8],101)||i(r[t+8],69))?(R=">",D="doctype",U=!0):i(r[t+2],45)&&i(r[t+3],45)?(R="-->",ke="<!--",D="comment"):i(r[t+2],91)&&r[t+3].charCodeAt(0)===67&&r[t+4].charCodeAt(0)===68&&r[t+5].charCodeAt(0)===65&&r[t+6].charCodeAt(0)===84&&r[t+7].charCodeAt(0)===65&&i(r[t+8],91)&&(R="]]>",D="cdata",U=!0):i(r[t+1],63)?(R="?>",r[t+2].charCodeAt(0)===120&&r[t+3].charCodeAt(0)===109&&r[t+4].charCodeAt(0)===109?(D="xml",le=!0):(U=!0,D="liquid")):i(r[t+1],112)&&i(r[t+2],114)&&i(r[t+3],101)&&(i(r[t+4],62)||oe(r[t+4]))?(R="</pre>",D="ignore",U=!0):(le=!0,R=">");else if(i(r[t],123)){if(x){C=!0,we=!0,s.stack.push(["script",s.count]),p(g,{token:"{",types:"script_start"});return}if(i(r[t+1],123))U=!0,R="}}",D="liquid";else if(i(r[t+1],37)){U=!0,R="%}",D="liquid";let w=r.indexOf("}",t+2);if(i(r[w-1],37)){let $=f.slice(t+2,w-1);if(i($,45)?(ke="{%-",$=$.slice(1).trimStart()):(ke="{%",$=$.trimStart()),ne=$.slice(0,$.search(/[\s%}-]/)),i($[$.length-1],45)?(R="-%}",$=$.slice(0,$.length-1).trimEnd()):(R="%}",$=$.trimEnd()),k($,w),i($,35))return D="comment",R="%}",M=R.charAt(R.length-1),b(!0)}else U=!0,R="%}",D="liquid";}else U=!0,R=r[t+1]+"}",D="liquid";}return U!==!0&&n.markup.preserveAttribute===!0&&(U=!0),we?y():(M=R.charAt(R.length-1),D==="comment"&&(i(r[t],60)||i(r[t],123)&&i(r[t+1],37))?b():t<m?pe():y())}function N(){if(n.wrap>0&&x===!0){let w=0,$=s.count,W=0;if(o.types[$].indexOf("attribute")>-1){do w=w+o.token[$].length+1,$=$-1;while(o.lexer[$]!=="markup"||o.types[$].indexOf("attribute")>-1);o.lines[$]===1&&(w=w+o.token[$].length+1);}else o.lines[$]===1&&(w=o.token[$].length+1);if(W=$-1,w>0&&o.types[W]!=="script_end")if(o.types[W].indexOf("attribute")>-1){do w=w+o.token[W].length+1,W=W-1;while(o.lexer[W]!=="markup"||o.types[W].indexOf("attribute")>-1);o.lines[W]===1&&(w=w+o.token[W].length+1);}else o.lines[W]===1&&(w=o.token[W].length+1);}s.lineOffset=0;}function pe(){let w=[],$={pipes:[],fargs:[],targs:[],logic:[]},W=0,T=0,V=c,fe=0,ae=0,de=0,se=0,ee=c,Te=c,me=0,be=!1,Be=!1,he=!1,Se=!1,Ee=!1,xe=NaN,ce=[];function ct(){if($e(w,44)){if(ne==="when"&&$.logic.push(w.length-1),n.correct===!0&&/^,\s*-?[%}]}/.test(f.slice(t)))return w.pop(),t=t+1,!0;xe===44?$.fargs[$.fargs.length-1].push(w.length-1):xe===58?($.fargs[$.fargs.length-1][0]+=1,$.fargs[$.fargs.length-1].push(w.length-1),xe=44):$.targs.push(w.length-1);}else $e(w,124)?($.pipes.push(w.length-1),xe=124):$e(w,58)&&xe===124&&($.fargs.push([w.length-1]),xe=58);if(i(r[t],10)&&ne!=="liquid"&&Be===!1&&n.liquid.preserveInternal===!1&&w.length>3&&!(i(r[t+1],45)&&i(r[t+2],37)&&i(r[t+3],125)||i(r[t+1],37)&&i(r[t+2],125))?w.pop():n.liquid.normalizeSpacing===!0&&(E(r[t],32)&&(Ve(w,39)||Ve(w,34))?E(r[t],44)&&E(r[t],93)?(w.splice(w.length-1,1,te,r[t]),E(r[t+1],32)&&E(r[t+1],61)&&E(r[t+1],125)&&w.push(te)):E(r[t+1],32)&&w.push(te):i(r[t],32)&&i(r[t-1],93)?w.pop():w.length>3&&i(r[t+1],10)&&E(r[t+2],32)?w.push(te):i(r[t],32)&&i(r[t+1],32)?w.pop():Ve(w,93)&&E(r[t],32)&&E(r[t],44)&&E(r[t],46)?w.splice(w.length-1,1,te,r[t]):Ve(w,32)&&i(r[t],32)&&i(r[t+1],32)?w.pop():i(r[t],44)&&E(r[t+1],32)?w.push(te):i(r[t],58)&&E(r[t+1],32)?w.push(te):i(r[t],32)&&Ve(w,46)||ni(w,91,32)?w.pop():E(r[t],32)&&i(r[t+1],124)?w.push(te):i(r[t],124)&&E(r[t+1],32)?w.push(te):i(r[t],32)&&(i(r[t+1],46)||i(r[t+1],93)||i(r[t+1],91)||i(r[t+1],58)||i(r[t+1],44))?w.pop():ne==="assign"&&(E(r[t],32)&&i(r[t+1],61)||i(r[t],61)&&E(r[t+1],32))?w.push(te):(ne==="if"||ne==="unless"||ne==="elsif")&&((E(r[t],32)||i(r[t],10))&&(i(r[t+1],33)||i(r[t+1],60)||i(r[t+1],62)||i(r[t+1],61)&&i(r[t+2],61))?w.push(te):i(r[t],61)&&(E(r[t+1],32)||i(r[t+1],10))&&(i(r[t-1],61)||i(r[t-1],60)||i(r[t-1],62)||i(r[t-1],33))?w.push(te):E(r[t+1],32)&&E(r[t+1],61)&&(i(r[t],60)||i(r[t],62))&&w.push(te))),oe(r[t-1])){if(V=f.slice(t),ne==="if"||ne==="elsif"||ne==="unless"){if(oe(r[t+2])&&V.startsWith("or"))return $.logic.push(w.length-1),w.pop(),w.push(V.slice(0,2)),t=t+2,!0;if(oe(r[t+3])&&V.startsWith("and"))return $.logic.push(w.length-1),w.pop(),w.push(V.slice(0,3)),t=t+3,!0;if(oe(r[t+8])&&V.startsWith("contains"))return $.logic.push(w.length-1),w.pop(),w.push(V.slice(0,8)),t=t+8,!0}else if(ne==="when"&&oe(r[t+2])&&V.startsWith("or"))return $.logic.push(w.length-1),w.pop(),w.push(V.slice(0,2)),t=t+2,!0}if(i(w[w.length-1],44)&&i(w[w.length-2],44))return Ke(114,w.join(c),Ie(w.join(c)));Be=!1;}function ze(ei){let St,Ae=c;if(ei===!0?(Ae=ce.join(c),St=z(Ae),ee=c,St[0]==="data-esthetic-ignore"&&(B=!0)):(Ae=ce.join(c),(x===!1||x&&It(Ae,125))&&(Ae=Ae.replace(et,te)),St=z(Ae),St[0]==="data-esthetic-ignore"&&(B=!0),x&&i(ce[0],123)&&i(ce[ce.length-1],125)&&(me=0)),i(Ae[0],123)&&i(Ae[1],37)&&(G=!0),Ae=Ae.replace(/^\u0020/,c).replace(/\u0020$/,c),ce=Ae.replace(/\r\n/g,X).split(X),ce.length<1&&(ce[0]=ce[0].replace(Pe,c)),Ae=d(ce.join(s.crlf),ne),n.markup.stripAttributeLines===!0&&se>=1&&(se=1),Q.length>0){let Ge=Q.length-1;u===0&&(i(Ae,61)||i(Ae,45))&&(Q[Ge][0]=Q[Ge][0]+Ae,Q[Ge][1]=se,Ae=c);}if(ei===!1&&(ut(Ae)&&(u=u+1),Bt(Ae)&&(u=u-1)),Ae!==c&&Ae!==te&&Q.push([Ae,se]),Q.length>0){let[Ge]=Q[Q.length-1];if(Ge.indexOf("=\u201C")>0)return Ke(103,Ge);if(Ge.indexOf("=\u201D")>0)return Ke(103,Ge)}ce=[],se=i(r[t],10)?1:0;}if(!s.error){do{if(i(r[t],10)&&(se=s.lines(t,se)),ke==="---"&&R==="---"&&D==="ignore"){if(w.push(r[t]),t>3&&i(r[t],45)&&i(r[t-1],45)&&i(r[t-2],45))break;t=t+1;continue}if(U===!0||oe(r[t])===!1&&E(ee,125)||i(ee,125)){if(w.push(r[t]),be===!1&&i(r[t-1],123)&&(i(r[t],123)||i(r[t],37)))be=!0;else if(be===!0&&i(r[t],125)){if(i(r[t-1],125)||i(r[t-1],37))be=!1;else if((i(r[t-2],125)||i(r[t-2],37))&&oe(r[t-1]))return Ke(111,w.join(c))}else if(be===!0&&i(r[t],10)&&n.liquid.preserveInternal===!1&&(n.liquid.delimiterPlacement==="preserve"||n.liquid.delimiterPlacement==="consistent")){if(i(r[t-1],45)&&i(r[t-3],123)&&(i(r[t-2],123)||i(r[t-2],37))||i(r[t-2],123)&&(i(r[t-1],123)||i(r[t-1],37)))Be=!0;else if(/^\s*-?[%}]}/.test(f.slice(t))===!0){for(;oe(r[t])===!0;)t=t+1,i(r[t],10)&&(se=s.lines(t,se));w.push(r[t]),Be=!0;}}if(D==="end"&&w.length>2&&i(w[0],60)&&i(w[1],47)&&(i(w[w.length-1],47)||i(w[w.length-1],60))){if(n.correct)w.pop(),w.push(">");else return Ke(106,w.join(c));break}if(i(w[0],60)&&i(w[1],62)&&i(R,62))return p(g,"(empty)",{token:"<>",types:"start"});if(i(w[0],60)&&i(w[1],47)&&i(w[2],62)&&i(R,62))return g.token="</>",g.token="end",p(g)}if(D==="cdata"&&i(r[t],62)&&i(r[t-1],93)&&E(r[t-2],93))return Ke(103,w.join(c));if(D==="comment"){if(ee=c,r[t]===M&&w.length>R.length+1){if(T=w.length,W=R.length-1,W>-1)do{if(T=T-1,E(w[T],R.charCodeAt(W)))break;W=W-1;}while(W>-1);if(W<0)break}}else if(ee===c){if(i(w[0],60)&&i(w[1],33)&&D!=="cdata"){if(D==="doctype"&&i(r[t],62))break;if(i(r[t],91)){if(i(r[t+1],60)){D="start";break}if(oe(r[t+1]))do t=t+1,i(r[t],10)&&(se=s.lines(t,se));while(t<m-1&&oe(r[t+1]));if(i(r[t+1],60)){D="start";break}}}if(x&&(i(r[t],123)?me=me+1:i(r[t],125)&&(me=me-1)),i(r[t],60)&&le===!0&&U===!1&&w.length>1&&/>{2,3}/.test(R)===!1){s.error=`Invalid structure detected ${r.slice(t,t+8).join(c)}`;break}if(oe(r[t])===!1&&he===!0&&r[t]!==M){if(_=0,he=!1,ee=Te,w.pop(),t<m)do{if(i(r[t],10)&&Ee===!1&&(se=s.lines(t,se)),n.markup.preserveAttribute===!0?w.push(r[t]):ce.push(r[t]),(E(ee,34)||E(ee,39))&&(i(r[t-1],123)&&(i(r[t],37)||i(r[t],123))?be=!0:i(r[t],125)&&(i(r[t-1],125)||i(r[t-1],37))&&(be=!1)),x===!1&&Ee===!1&&be===!0&&n.markup.preserveAttribute===!1)for(;t<m;){if(t=t+1,i(r[t],10)&&(se=s.lines(t,se)),i(ce[0],61)&&(i(ce[1],123)||i(ce[1],37))&&(i(ce[ce.length-2],125)||i(ce[ce.length-2],37))&&i(ce[ce.length-1],125)){be=!1,ee=c,ze(!1);break}if(i(ce[0],61)&&E(ce[1],123)){be=!1,ee=c,ze(!1);break}if(ce.push(r[t]),i(ce[0],61)&&i(r[t+1],62)){be=!1,Q[Q.length-1][0]+=ce.join(c),ce=[],ee=c;break}if(E(ce[0],61)&&i(r[t],125)&&(i(r[t-1],125)||i(r[t-1],37))){be=!1,ee=c,ze(!1);break}}if(x===!1&&(i(r[t],60)||i(r[t],62))&&(ee===c||i(ee,62))){if(ee===c&&i(r[t],60))ee=">",fe=1;else if(i(ee,62)){if(i(r[t],60))fe=fe+1;else if(i(r[t],62)&&(fe=fe-1,fe===0)){ee=c,_=0,ze(!1);break}}}else if(ee===c){if(r[t+1]===M){($e(ce,47)||$e(ce,63)&&D==="xml")&&(ce.pop(),U===!1||w.pop(),t=t-1),ce.length>0&&ze(!1);break}if(x===!1&&i(r[t],123)&&i(r[t-1],61)?ee="}":i(r[t],34)||i(r[t],39)?(ee=r[t],Ee===!1&&be===!1&&(Ee=!0),i(r[t-1],61)&&(i(r[t+1],60)||i(r[t+1],123)&&i(r[t+2],37)||oe(r[t+1])&&E(r[t-1],61))&&(_=t)):i(r[t],40)?(ee=")",de=1):x?(i(r[t-1],61)||oe(r[t-1]))&&i(r[t],123)?(ee="}",ae=1):i(r[t],47)&&(i(r[t+1],42)?ee="*/":i(r[t+1],47)&&(ee=X)):i(w[0],123)&&i(r[t],123)&&(i(r[t+1],123)||i(r[t+1],37))&&(ee=i(r[t+1],123)?"}}":r[t+1]+"}"),oe(r[t])&&ee===c){if(i(ce[ce.length-2],61)&&(W=t+1,W<m))do{if(oe(r[W])===!1){(i(r[W],34)||i(r[W],39))&&(t=W-1,Se=!0,ce.pop());break}W=W+1;}while(W<m);if(Se===!0)Se=!1;else if(me===0||me===1&&i(ce[0],123)){ce.pop(),ce.length>0&&ze(!1),he=!0;break}}}else if(i(r[t],40)&&i(ee,41))de=de+1;else if(i(r[t],41)&&i(ee,41)){if(de=de-1,de===0&&(ee=c,i(r[t+1],R.charCodeAt(0)))){ze(!1);break}}else if(x===!0&&(i(ee,125)||i(ee,10)&&i(r[t],10)||i(ee,42)&&i(r[t-1],42)&&i(r[t],47))){if(i(r[t],96)){t=t+1;do{if(ce.push(r[t]),i(r[t],96))break;t=t+1;}while(t<r.length)}if(i(ee,125)){if(i(r[t],125)&&r[t]!==ee)ae=ae+1;else if(r[t]===ee&&(ae=ae-1,ae===0)){me=0,ee=c,q=ce.join(c),n.markup.preserveAttribute===!1&&(x?/^\s*$/.test(q)||Q.push([q,se]):(q=q.replace(et,te),q!==te&&Q.push([q,se]))),ce=[],se=1;break}}else {Te=c,ue=!0,q=ce.join(c),q!==te&&Q.push([q,se]),ce=[],se=i(ee,10)?2:1,ee=c;break}}else if(i(r[_-1],61)&&i(r[t],123)&&i(r[t+1],37)&&(i(ee,34)||i(ee,39)))ee=ee+"{%",_=0;else if(i(r[t-1],37)&&i(r[t],125)&&(ee==='"{%'||ee==="'{%"))ee=ee[0],_=0;else if(i(r[t],60)&&i(R,62)&&i(r[_-1],61)&&(i(ee,34)||i(ee,39)))ee=ee+"<",_=0;else if(i(r[t],62)&&(ee==='"<'||ee==="'<"))ee=ee.charAt(0),_=0;else if(_===0&&E(ee,62)&&(ee.length<2||E(ee,34)&&E(ee,39))){if(T=0,W=ee.length-1,W>-1)do{if(E(r[t-T],ee.charCodeAt(W)))break;T=T+1,W=W-1;}while(W>-1);if(W<0&&be===!1&&Ee===!0&&(Ee=!1,ze(!0),r[t+1]===M))break;W===0&&i(r[t],62);}else _>0&&oe(r[t])===!1&&(_=0);t=t+1;}while(t<m)}else if(i(R,10)===!1&&(i(r[t],34)||i(r[t],39)))ee=r[t];else if(t>0&&be===!0&&E(ee,34)&&E(ee,39)){if(ct()===!0)continue}else if(D!=="comment"&&E(R,10)&&i(r[t],60)&&i(r[t+1],33)&&i(r[t+2],45)&&i(r[t+3],45)&&o.types[s.count]!=="conditional")ee="-->";else if(i(r[t],123)&&E(w[0],123)&&E(R,10)&&(i(r[t+1],123)||i(r[t+1],37))){if(i(r[t+1],123))ee="}}";else if(ee=r[t+1]+"}",ce.length<1&&(Q.length<1||oe(r[t-1]))){w.pop();do i(r[t],10)&&(se=se+1),ce.push(r[t]),t=t+1;while(t<m&&r[t-1]+r[t]!==ee);ce.push("}"),Q.push([ce.join(c),se]),ce=[],se=1,ee=c;}ee===R&&(ee=c);}else if(le&&E(R,10)&&E(r[t-1],60)&&oe(r[t]))he=!0;else if(le&&x&&i(r[t],47)&&(i(r[t+1],42)||i(r[t+1],47)))he=!0,w[w.length-1]=te,Te=i(r[t+1],42)?"*/":X,ce.push(r[t]);else if(be===!1&&(r[t]===M||i(R,10)&&i(r[t+1],60))&&(w.length>R.length+1||i(w[0],93))&&(x===!1||me===0)){if(i(R,10)){if(oe(w[w.length-1]))do w.pop(),t=t-1;while(oe(w[w.length-1]));break}if(T=w.length,W=R.length-1,W>-1)do{if(T=T-1,w[T]!==R.charAt(W))break;W=W-1;}while(W>-1);if(W<0){i(w[T],62)&&i(r[t],62)&&i(r[t-1],125)&&oe(r[t+1])&&Q.length>0&&Q[Q.length-1][1]===0&&(Q[Q.length-1][1]=i(r[t+1],32)?1:2);break}}}else if(i(r[t],ee.charCodeAt(ee.length-1))&&E(r[t-1],92)&&(x===!0&&i(R,125)&&a(t)===!1||x===!1||E(R,125))){if(T=0,W=ee.length-1,W>-1)do{if(E(r[t-T],ee.charCodeAt(W)))break;T=T+1,W=W-1;}while(W>-1);W<0&&(ee=c);}t=t+1;}while(t<m);if(_=0,ne||(ne=Ie(w.join(c))),B===!1)if(D==="liquid"){if(q=xi(w,ne,$,n),ne==="liquid")return ge()}else q=w.join(c);else q=w.join(c);return ne==="xml"?I="xml":I===c&&ne==="html"&&(I="html"),g.token=q,g.types=D,U===!1&&x===!1&&(q=q.replace(et,te)),y()}}return S()}function F(){let R=[],g=t,q=x===!0&&i(o.token[s.count],123),M="([{!=,;.?:&<>",D=c,ne=s.lineOffset,ke=c;C===!0&&(q===!0?ke="script":s.stack.index>-1?ke=Ie(o.token[s.stack.index]):ke=Ie(o.token[o.begin[s.count]]));let we={begin:s.stack.index,ender:-1,lexer:"markup",lines:ne,stack:Ie(s.stack.token)||"global",token:c,types:"content"};function B(){return o.types[s.count]==="liquid_start"&&o.token[s.count].indexOf("<!")===0&&o.token[s.count].indexOf("<![")<0&&o.token[s.count].charCodeAt(o.token[s.count].length-1)===91}function _(){let G=t-1,U=0;if(E(r[t-1],92))return !1;if(G>-1)do{if(E(r[G],92))break;U=U+1,G=G-1;}while(G>-1);return U%2===1}if(t<m){let G=c,U=c,le=c,Q=0;do{if(i(r[t],10)&&(ne=s.lines(t,ne)),C===!0){if(o.types[s.count]==="liquid_start"){let re=`end${ke}`,Le=f.indexOf(`end${ke}`,t);if(Le>-1){let ge=Le;do if(oe(r[ge])===!1&&i(r[ge],37)&&i(r[ge-1],123)){ge=ge-2;break}while(r[ge--]);if(G=r.slice(ge+1,r.indexOf("%",Le+re.length)+2).join(c),Si(re).test(G)){ne=1,le=r.slice(t,ge).join(c).replace(Pe,c),t=ge+G.length,s.external(h,le);do i(r[ge],10)&&(ne=ne+1);while(oe(r[ge--]));p(we,{token:d(G),types:"liquid_end",lines:ne});break}}}if(U===c){if(i(r[t],47))i(r[t+1],42)?U="*":i(r[t+1],47)?U="/":!x&&ke==="script"&&E(r[t-1],60)&&M.indexOf(r[t-1])>-1&&(U="r");else if(_()===!1&&(i(r[t],34)||i(r[t],39)||i(r[t],96)))U=r[t];else if(i(r[t],123)&&q===!0)Q=Q+1;else if(i(r[t],125)&&q===!0){if(Q===0){le=R.join(c).replace(ot,c).replace(Pe,c),s.external(h,le),s.stack.update(s.stack.index+1),o.types[s.count]==="end"&&o.lexer[o.begin[s.count]-1]==="script"&&(p(we,{lexer:"script",types:"separator",token:n.correct===!0?";":"x;"}),we.lexer="markup"),p(we,{token:"}",types:"script_end"}),s.stack.pop();break}Q=Q-1;}if(ke==="script"){if(G=r.slice(t+1,t+9).join(c).toLowerCase(),G==="</script"){if(le=R.join(c).trimEnd(),R.length<1)break;bt.test(le)&&kt.test(le)?(p(we,{token:"<!--",types:"comment"}),le=le.replace(bt,c).replace(kt,c),s.external("javascript",le),p(we,{token:"-->"})):s.external(h,le);break}}else if(ke==="style"&&i(r[t+1],60)&&i(r[t+2],47)&&(G=r.slice(t+1,t+8).join(c).toLowerCase(),G==="</style")){if(le=R.join(c).trimEnd(),R.length<1)break;bt.test(le)&&kt.test(le)?(p(we,{token:"<!--",types:"comment"}),le=le.replace(bt,c).replace(kt,c),s.external("css",le),p(we,{token:"-->"})):s.external(h,le);break}}else U===r[t]&&_()===!1&&(i(U,34)||i(U,39)||i(U,96)||i(U,42)&&i(r[t+1],47))?U=c:i(U,96)&&i(r[t],36)&&i(r[t+1],123)&&_()===!1?U="}":i(U,125)&&i(r[t],125)&&_()===!1?U="`":i(U,47)&&(i(r[t],10)||i(r[t],13))?U=c:U==="r"&&i(r[t],47)&&_()===!1?U=c:i(U,47)&&i(r[t],62)&&i(r[t-1],45)&&i(r[t-2],45)&&(G=f.slice(t+1,t+11).toLowerCase(),G=G.slice(0,G.length-2),ke==="script"&&G==="</script"&&(U=c),G=G.slice(0,G.length-1),ke==="style"&&G==="</style"&&(U=c));}if(B()===!0&&i(r[t],93)){t=t-1,ne=0,D=R.join(c).replace(Pe,c),p(we,{token:D});break}if(C===!1&&R.length>0&&(i(r[t],60)&&E(r[t+1],61)&&je(r[t+1])===!1&&oe(r[t+1])===!1||i(r[t],91)&&i(r[t+1],37)||i(r[t],123)&&(x===!0||i(r[t+1],123)||i(r[t+1],37)))){if(t=t-1,ne=0,D=s.stack.token==="comment"?R.join(c):R.join(c).replace(Pe,c),we.token=D,n.wrap>0&&n.markup.preserveText===!1){let _e=function(){if(i(D[re],32)){ge.push(D.slice(0,re)),D=D.slice(re+1),Le=D.length,re=n.wrap;return}do re=re-1;while(re>0&&E(D[re],32));if(re>0)ge.push(D.slice(0,re)),D=D.slice(re+1),Le=D.length,re=n.wrap;else {re=n.wrap;do re=re+1;while(re<Le&&E(D[re],32));ge.push(D.slice(0,re)),D=D.slice(re+1),Le=D.length,re=n.wrap;}};let re=n.wrap,Le=D.length,ge=[];if(o.token[o.begin[s.count]]==="<a>"&&o.token[o.begin[o.begin[s.count]]]==="<li>"&&o.lines[o.begin[s.count]]===0&&s.lineOffset===0&&D.length<n.wrap){p(we);break}if(Le<n.wrap){p(we);break}if(s.lineOffset<1&&s.count>-1){let H=s.count;do{if(re=re-o.token[H].length,o.types[H].indexOf("attribute")>-1&&(re=re-1),o.lines[H]>0&&o.types[H].indexOf("attribute")<0)break;H=H-1;}while(H>0&&re>0);re<1&&(re=D.indexOf(te));}D=R.join(c).replace(ot,c).replace(Pe,c).replace(et,te);do _e();while(re<Le);D!==c&&E(D,32)&&ge.push(D),D=ge.join(s.crlf),D=c+D+c;}else {let re=D.indexOf(X);re>-1&&(p(we,{token:D.slice(0,re)}),D=D.slice(re),Ht.test(D)?we.lines=1:(we.lines=2,D=D.replace(ot,c)));}ne=0,p(we,{token:D});break}R.push(r[t]),t=t+1;}while(t<m)}if(t>g&&t<m)if(oe(r[t])){let G=t;s.lineOffset=s.lineOffset+1;do i(r[G],10)&&(s.lineNumber=s.lineNumber+1,s.lineOffset=s.lineOffset+1),G=G-1;while(G>g&&oe(r[G]))}else s.lineOffset=0;else (t!==g||t===g&&C===!1)&&(D=R.join(c).replace(Pe,c),ne=0,we.token!==D&&(p(we,{token:D}),s.lineOffset=0));C=!1;}function ie(){s.lineOffset=1;do{if(i(r[t],10)&&(s.lineIndex=t,s.lineOffset=s.lineOffset+1,s.lineNumber=s.lineNumber+1),oe(r[t+1])===!1)break;t=t+1;}while(t<m)}(s.language==="html"||s.language==="liquid")&&(I="html");do{if(s.error)return o;if(oe(r[t])?ie():i(r[t],60)?A(c):i(r[t],123)&&(x||i(r[t+1],123)||i(r[t+1],37))?A(c):i(r[t],45)&&i(r[t+1],45)&&i(r[t+2],45)?A("---"):F(),t=t+1,t===m&&s.pairs.size>0&&s.pairs.has(s.stack.index)){console.log(s.pairs);let R=s.pairs.get(s.stack.index);R.type===2&&Ot(105,R);}}while(t<m);return o}function vi(){let{data:e,references:o,rules:n,source:f}=s,x=s.language==="json"?n.json:n.script,l=Re(f)?f:f.split(c),O=l.length,r=[],m=[],j=[],t=[0,c],h=[!1],C={count:[],index:[],word:[]},I=-1,u=0,p=c,d=c,P=[],K=0,Z=-1,a=-1,L=[],z,A,F,ie=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];function R(){C.count.pop(),C.index.pop(),C.word.pop(),I=I-1;}function g(k=c){let b={begin:s.stack.index,ender:-1,lexer:"script",lines:s.lineOffset,stack:s.stack.token,token:p,types:d};s.push(e,b,k);}function q(k,b){let v=b===!0?u:u+1,S=c;if((typeof k!="number"||k<1)&&(k=1),i(l[u],47)&&(i(l[u+1],47)?S=X:i(l[u+1],42)&&(S="/")),v<O)do{if(oe(l[v])===!1){if(i(l[v],47)&&(S===c?i(l[v+1],47)?S=X:i(l[v+1],42)&&(S="/"):i(S,47)&&i(l[v-1],42)&&(S=c)),S===c&&l[v-1]+l[v]!=="*/")return l.slice(v,v+k).join(c)}else i(S,10)&&i(l[v],10)&&(S=c);v=v+1;}while(v<O);return c}function M(k){let b=k;do k=k-1;while(i(l[k],92)&&k>0);return (b-k)%2===1}function D(k){let b=q(1,!1),v=s.stack.length===0?c:s.stack.token,S={begin:e.begin[s.count],ender:e.begin[s.count],lexer:e.lexer[s.count],lines:e.lines[s.count],stack:e.stack[s.count],token:e.token[s.count],types:e.types[s.count]};if(lt.test(p)||d==="start"||d==="type_start"||s.language==="json"||i(b,123)||i(S.token,59)||i(S.token,44)||S.stack==="class"||S.stack==="map"||S.stack==="attribute"||e.types[S.begin-1]==="generic"||v==="initializer"||i(S.token,125)&&e.stack[S.begin-1]==="global"&&e.types[S.begin-1]!=="operator"&&S.stack===e.stack[s.count-1]||S.stack==="array"&&E(S.token,93)||i(e.token[e.begin[s.count]],123)&&S.stack==="data_type"||S.types!==void 0&&S.types.indexOf("liquid")>-1&&S.types.indexOf("template_string")<0||i(b,59)&&k===!1||e.lexer[s.count-1]!=="script"&&(u<O&&O===f.length-1||O<f.length-1))return;let N=0;if(i(S.token,125)&&(S.stack==="function"||S.stack==="if"||S.stack==="else"||S.stack==="for"||S.stack==="do"||S.stack==="while"||S.stack==="switch"||S.stack==="class"||S.stack==="try"||S.stack==="catch"||S.stack==="finally"||S.stack==="block")){if(S.stack==="function"&&(e.stack[S.begin-1]==="data_type"||e.types[S.begin-1]==="type")){N=S.begin;do N=N-1;while(N>0&&E(e.token[N],41)&&e.stack[N]!=="arguments");N=e.begin[N];}else N=e.begin[S.begin-1];if(i(e.token[N],40)){if(N=N-1,e.token[N-1]==="function"&&(N=N-1),e.stack[N-1]==="object"||e.stack[N-1]==="switch"||E(e.token[N-1],61)&&E(e.token[N-1],58)&&e.token[N-1]!=="return")return}else return}if(!(S.types==="comment"||v==="method"||v==="paren"||v==="expression"||v==="array"||v==="object"||v==="switch"&&S.stack!=="method"&&i(e.token[e.begin[s.count]],40)&&e.token[e.begin[s.count]-1]!=="return"&&e.types[e.begin[s.count]-1]!=="operator")&&!(e.stack[s.count]==="expression"&&(e.token[e.begin[s.count]-1]!=="while"||e.token[e.begin[s.count]-1]==="while"&&e.stack[e.begin[s.count]-2]!=="do"))&&!(b!==c&&"=<>+*?|^:&%~,.()]".indexOf(b)>-1&&k===!1)){if(S.types==="comment"){N=s.count;do N=N-1;while(N>0&&e.types[N]==="comment");if(N<1)return;S.token=e.token[N],S.types=e.types[N],S.stack=e.stack[N];}S.token===void 0||S.types==="start"||S.types==="separator"||S.types==="operator"&&S.token!=="++"&&S.token!=="--"||S.token==="x}"||S.token==="var"||S.token==="let"||S.token==="const"||S.token==="else"||S.token.indexOf("#!/")===0||S.token==="instanceof"||S.stack==="method"&&(e.token[S.begin-1]==="function"||e.token[S.begin-2]==="function")||(x.variableList==="list"&&(C.index[I]=s.count),p=n.correct===!0?";":"x;",d="separator",N=s.lineOffset,s.lineOffset=0,g(),s.lineOffset=N,Le());}}function ne(){let k=s.count;if(e.types[k]==="comment")do k=k-1;while(k>0&&e.types[k]==="comment");e.token[k]==="from"&&(k=k-2),e.token[k]==="x;"&&s.splice({data:e,howmany:1,index:k});}function ke(){let k=s.count;do k=k-1;while(k>-1&&e.token[k]==="x}");if(e.stack[k]==="else")return g();k=k+1,s.splice({data:e,howmany:0,index:k,record:{begin:e.begin[k],ender:-1,lexer:"script",lines:s.lineOffset,stack:e.stack[k],token:p,types:d}}),g();}function we(){D(!1),Z>-1&&y(),F=at({chars:l,end:O,lexer:"script",begin:"/*",start:u,ender:"*/"}),u=F[1],e.token[s.count]==="var"||e.token[s.count]==="let"||e.token[s.count]==="const"?(z=s.pop(e),g(),s.push(e,z,c),e.lines[s.count-2]===0&&(e.lines[s.count-2]=e.lines[s.count]),e.lines[s.count]=0):F[0]!==c&&(p=F[0],d=lt.test(p)?"ignore":"comment",p.indexOf("# sourceMappingURL=")===2&&(t[0]=s.count+1,t[1]=p),s.push(e,{begin:s.stack.index,ender:-1,lexer:"script",lines:s.lineOffset,stack:s.stack.token,token:p,types:d},c)),/\/\*\s*global\s+/.test(e.token[s.count])&&e.types.indexOf("word")<0&&(o[0]=e.token[s.count].replace(/\/\*\s*global\s+/,c).replace("*/",c).replace(/,\s+/g,",").split(","));}function B(){D(!1),Le(),Z>-1&&y(),F=Rt({chars:l,end:O,lexer:"script",begin:"//",start:u,ender:X}),u=F[1],F[0]!==c&&(p=F[0],d=lt.test(p)?"ignore":"comment",p.indexOf("# sourceMappingURL=")===2&&(t[0]=s.count+1,t[1]=p),s.push(e,{begin:s.stack.index,ender:-1,lexer:"script",lines:s.lineOffset,stack:s.stack.token,token:p,types:d},c));}function _(){let k=0,b=0,v=u+1,S=!1,N=O,pe=["/"];if(v<N)do{if(pe.push(l[v]),(E(l[v-1],92)||i(l[v-2],92))&&(i(l[v],91)&&(S=!0),i(l[v],93)&&(S=!1)),i(l[v],47)&&S===!1)if(i(l[v-1],92)){if(b=0,k=v-1,k>0)do{if(i(l[k],92))b=b+1;else break;k=k-1;}while(k>0);if(b%2===0)break}else break;v=v+1;}while(v<N);return l[v+1]==="g"||l[v+1]==="i"||l[v+1]==="m"||l[v+1]==="y"||l[v+1]==="u"?(pe.push(l[v+1]),l[v+2]!==l[v+1]&&(l[v+2]==="g"||l[v+2]==="i"||l[v+2]==="m"||l[v+2]==="y"||l[v+2]==="u")?(pe.push(l[v+2]),l[v+3]!==l[v+1]&&l[v+3]!==l[v+2]&&(l[v+3]==="g"||l[v+3]==="i"||l[v+3]==="m"||l[v+3]==="y"||l[v+3]==="u")?(pe.push(l[v+3]),l[v+4]!==l[v+1]&&l[v+4]!==l[v+2]&&l[v+4]!==l[v+3]&&(l[v+4]==="g"||l[v+4]==="i"||l[v+4]==="m"||l[v+4]==="y"||l[v+4]==="u")?(pe.push(l[v+4]),l[v+5]!==l[v+1]&&l[v+5]!==l[v+2]&&l[v+5]!==l[v+3]&&l[v+5]!==l[v+4]&&(l[v+5]==="g"||l[v+5]==="i"||l[v+5]==="m"||l[v+5]==="y"||l[v+5]==="u")?(pe.push(l[v+4]),u=v+5):u=v+4):u=v+3):u=v+2):u=v+1):u=v,pe.join(c)}function ue(){let k=[l[u]],b=0,v=i(k[0],46),S=/zz/;if(u<O-2&&l[u]==="0"&&(l[u+1]==="x"?S=/[0-9a-fA-F]/:l[u+1]==="o"?S=/[0-9]/:l[u+1]==="b"&&(S=/0|1/),S.test(l[u+2]))){k.push(l[u+1]),b=u+1;do b=b+1,k.push(l[b]);while(S.test(l[b+1]));return u=b,k.join(c)}if(b=u+1,b<O)do{if(je(l[b])||i(l[b],46)&&v===!1)k.push(l[b]),i(l[b],46)&&(v=!0);else break;b=b+1;}while(b<O);if(b<O-1&&(je(l[b-1])||je(l[b-2])&&(i(l[b-1],45)||i(l[b-1],43)))&&(l[b]==="e"||l[b]==="E")&&(k.push(l[b]),(i(l[b+1],45)||i(l[b+1],43))&&(k.push(l[b+1]),b=b+1),v=!1,b=b+1,b<O))do{if(je(l[b])||i(l[b],46)&&v===!1)k.push(l[b]),i(l[b],46)&&(v=!0);else break;b=b+1;}while(b<O);return u=b-1,k.join(c)}function G(){let k=0,b=0,v=O,S=c,N=["=","<",">","+","*","?","|","^",":","&","%","~"],pe=N.length;if(Z>-1&&y(),i(l[u],47)&&s.count>-1&&(d!=="word"&&d!=="reference"||p==="typeof"||p==="return"||p==="else")&&d!=="number"&&d!=="string"&&d!=="end")return p==="return"||p==="typeof"||p==="else"||d!=="word"?(p=_(),d="regex"):(p="/",d="operator"),g(),"regex";if(i(l[u],63)&&("+-*/.?".indexOf(l[u+1])>-1||i(l[u+1],58)&&N.join(c).indexOf(l[u+2])<0)&&(i(l[u+1],46)&&je(l[u+2])===!1?S="?.":i(l[u+1],63)&&(S="??"),S===c))return "?";if(i(l[u],58)&&"+-*/".indexOf(l[u+1])>-1)return ":";if(u<O-1){if(E(l[u],60)&&i(l[u+1],60))return l[u];if(i(l[u],33)&&i(l[u+1],47))return "!";if(i(l[u],45)&&(h[h.length-1]=!1,i(l[u+1],45)?S="--":i(l[u+1],61)?S="-=":i(l[u+1],62)&&(S="->"),S===c))return "-";if(i(l[u],43)&&(h[h.length-1]=!1,i(l[u+1],43)?S="++":i(l[u+1],61)&&(S="+="),S===c))return "+";if(i(l[u],61)&&E(l[u+1],61)&&E(l[u+1],33)&&E(l[u+1],62))return h[h.length-1]=!1,"="}if(i(l[u],59))if(s.language==="typescript"){if(e.stack[s.count]==="arguments")e.token[s.count]==="?"&&(s.pop(e),S="?:",u=u-1),h[h.length-1]=!0;else if(i(p,41)&&(e.token[e.begin[s.count]-1]==="function"||e.token[e.begin[s.count]-2]==="function"))h[h.length-1]=!0;else if(d==="reference"){k=s.count;let w=!1;do{if(e.begin[k]===e.begin[s.count]){if(k<s.count&&e.token[k]===":"&&e.types[k+1]!=="type"&&(w=!0),e.token[k]==="?"&&w===!1||e.token[k]===";"||e.token[k]==="x;")break;if(e.token[k]==="var"||e.token[k]==="let"||e.token[k]==="const"||e.types[k]==="type"){h[h.length-1]=!0;break}}else {if(e.types[k]==="type_end"){h[h.length-1]=!0;break}k=e.begin[k];}k=k-1;}while(k>e.begin[s.count])}}else e.token[s.count-1]==="["&&(e.types[s.count]==="word"||e.types[s.count]==="reference")&&(s.stack.update("attribute"),e.stack[s.count]="attribute");if(S===c)if(i(l[u+1],43)&&i(l[u+2],43)||i(l[u+1],45)&&i(l[u+2],45))S=l[u];else {let w=[l[u]];if(k=u+1,k<v)do{if(i(l[k],43)&&i(l[k+1],43)||i(l[k],45)&&i(l[k+1],45))break;if(b=0,b<pe)do{if(l[k]===N[b]){w.push(N[b]);break}b=b+1;}while(b<pe);if(b===pe)break;k=k+1;}while(k<v);S=w.join(c);}if(u=u+(S.length-1),S==="=>"&&i(p,41)){k=s.count,v=e.begin[k];do e.begin[k]===v&&(e.stack[k]="method"),k=k-1;while(k>v-1)}return S}function U(){let k=[l[u]];if(u=u+1,u<O)do{if(k.push(l[u]),i(l[u],96)&&(E(l[u-1],92)||!M(u-1))||i(l[u-1],36)&&i(l[u],123)&&(E(l[u-2],92)||!M(u-2)))break;u=u+1;}while(u<O);return k.join(c)}function le(){let k=0,b=!1,v=!1,S=0,N=0,pe=0,w=c,$=c,W=c,T=[],V=h[h.length-1],fe="0123456789=<>+-*?|^:&.,;%(){}[]~";function ae(){i(p,40)&&s.stack.update("paren",s.count),s.external("html",T.join(c));}if(Z>-1&&y(),$=s.count>0?e.token[s.count-1]:c,W=s.count>0?e.types[s.count-1]:c,w=q(1,!1),s.language!=="jsx"&&s.language!=="tsx"&&je(w)===!1&&(p==="function"||$==="=>"||$==="void"||$==="."||p==="return"||d==="operator"||e.stack[s.count]==="arguments"||d==="type"&&$==="type"||d==="reference"&&(W==="operator"||$==="function"||$==="class"||$==="new")||d==="type"&&W==="operator")){let de=[],se=0,ee=0;k=u;do{if(de.push(l[k]),i(l[k],60))se=se+1;else if(i(l[k],62)&&(se=se-1,se<1))break;k=k+1;}while(k<O);if(ee=u,u=k,w=q(1,!1),i(l[k],62)&&(V===!0||$==="=>"||$==="."||W!=="operator"||W==="operator"&&(i(w,40)||i(w,61)))){d="generic",p=de.join(c).replace(/^<\s+/,"<").replace(/\s+>$/,">").replace(/,\s*/g,", "),g();return}u=ee;}if(k=s.count,e.types[k]==="comment")do k=k-1;while(k>0&&e.types[k]==="comment");if(V===!1&&q(1,!1)!==">"&&(E(l[u],60)&&fe.indexOf(l[u+1])>-1||e.token[k]==="++"||e.token[k]==="--"||oe(l[u+1])===!0||je(l[u+1])===!0&&(d==="operator"||d==="string"||d==="number"||d==="reference"||d==="word"&&p!=="return")))return d="operator",p=G(),g();if(s.language!=="typescript"&&(e.token[k]==="return"||e.types[k]==="operator"||e.types[k]==="start"||e.types[k]==="separator"||e.types[k]==="jsx_attribute_start"||i(e.token[k],125)&&s.stack.token==="global")){d="markup",s.language="jsx";do{if(T.push(l[u]),i(l[u],123))N=N+1,b=!0;else if(i(l[u],125))N=N-1,N===0&&(b=!1);else if(i(l[u],60)&&b===!1){if(i(l[u+1],60))do T.push(l[u]),u=u+1;while(u<O&&i(l[u+1],60));S=S+1,i(q(1,!1),47)&&(v=!0);}else if(i(l[u],62)&&b===!1){if(i(l[u+1],62))do T.push(l[u]),u=u+1;while(i(l[u+1],62));if(S=S-1,v===!0?pe=pe-1:E(l[u-1],47)&&(pe=pe+1),S===0&&N===0&&pe<1){if(w=q(2,!1),E(w,60))return ae();if(i(w,60)&&fe.indexOf(w.charAt(1))<0&&oe(w.charAt(1))===!1){k=u+1;do{if(k=k+1,i(l[k],62)||oe(l[k-1])&&fe.indexOf(l[k])<0)break;if(fe.indexOf(l[k])>-1)return ae()}while(k<O)}else return ae()}v=!1;}u=u+1;}while(u<O);return ae()}d="operator",p=G(),g();}function Q(){let k=!0,b="+",v=c,S=c,N=c,pe=c,w=0,$=0,W=0,T=[];function V(){$=e.begin[$]-1,e.types[$]==="end"?V():i(e.token[$-1],46)&&fe();}function fe(){$=$-2,e.types[$]==="end"?V():i(e.token[$-1],46)&&fe();}function ae(){let se=0;if(se<T.length)do s.push(e,T[se],c),se=se+1;while(se<T.length)}function de(se){return {begin:e.begin[se],ender:e.ender[se],lexer:e.lexer[se],lines:e.lines[se],stack:e.stack[se],token:e.token[se],types:e.types[se]}}if(v=e.token[s.count],S=e.token[s.count-1],N=e.token[s.count-2],v!=="++"&&v!=="--"&&S!=="++"&&S!=="--"&&($=s.count,e.types[$]==="end"?V():i(e.token[$-1],46)&&fe()),e.token[$-1]==="++"||e.token[$-1]==="--"){if("startendoperator".indexOf(e.types[$-2])>-1)return;if(W=$,W<s.count+1){do T.push(de(W)),W=W+1;while(W<s.count+1);s.splice({data:e,howmany:s.count-$,index:$});}}else {if(n.correct===!1||v!=="++"&&v!=="--"&&S!=="++"&&S!=="--")return;if(pe=q(1,!1),(v==="++"||v==="--")&&(i(l[u],59)||i(pe,59)||i(l[u],125)||i(pe,125)||i(l[u],41)||i(pe,41))){if(b=e.stack[s.count],b==="array"||b==="method"||b==="object"||b==="paren"||b==="notation"||e.token[e.begin[s.count]-1]==="while"&&b!=="while")return;W=s.count;do{if(W=W-1,e.token[W]==="return")return;if(e.types[W]==="end")do W=e.begin[W]-1;while(e.types[W]==="end"&&W>0)}while(W>0&&(i(e.token[W],46)||e.types[W]==="word"||e.types[W]==="reference"||e.types[W]==="end"));if(i(e.token[W],44)&&E(l[u],59)&&E(pe,59)&&E(l[u],125)&&E(pe,125)&&E(l[u],41)&&E(pe,41))return;if(e.types[W]==="operator")if(e.stack[W]==="switch"&&i(e.token[W],58))do{if(W=W-1,e.types[W]==="start"){if(w=w-1,w<0)break}else e.types[W]==="end"&&(w=w+1);if(i(e.token[W],63)&&w===0)return}while(W>0);else return;k=!1,b=v==="--"?"-":"+";}else if(i(N,91)||i(N,59)||i(N,123)||i(N,125)||i(N,40)||i(N,41)||i(N,44)||N==="return"||N==="x;")if(v==="++"||v==="--"){if(i(N,91)||i(N,40)||i(N,44)||N==="return")return;v==="--"&&(b="-"),k=!1;}else (S==="--"||v==="--")&&(b="-");else return;if(k===!1&&(z=s.pop(e)),$=s.count,e.types[$]==="end"?V():i(e.token[$-1],46)&&fe(),W=$,W<s.count+1)do T.push(de(W)),W=W+1;while(W<s.count+1)}k===!0?(s.splice({data:e,howmany:1,index:$-1}),p="=",d="operator",g(),ae(),p=b,d="operator",g(),p="1",d="number",g()):(p="=",d="operator",g(),ae(),p=b,d="operator",g(),p="1",d="number",g()),p=e.token[s.count],d=e.types[s.count],i(pe,125)&&E(l[u],59)&&D(!1);}function re(k,b,v){let S=0,N=!1,pe=!1,w=[k],$,W=b.split(c),T=W.length,V=u,fe=u+k.length,ae=x.quoteConvert;function de(){let ee=0;if(w=[],d=v,S=u,v==="string"&&oe(l[S+1])){ee=1;do S=S+1,i(l[S],10)&&(ee=ee+1);while(S<O&&oe(l[S+1])===!0);s.lineOffset=ee;}}function se(){let ee=c;function Te(me){if(s.language!=="javascript"&&s.language!=="typescript"&&s.language!=="jsx"&&s.language!=="tsx"){let be=he=>he.replace(/\s*$/," "),Be=he=>he.replace(/^\s*/," ");return /\{(#|\/|(%>)|(%\]))/.test(me)||/\}%(>|\])/.test(me)||(me=me.replace(/\{((\{+)|%-?)\s*/g,be),me=me.replace(/\s*((\}\}+)|(-?%\}))/g,Be)),me}return me}if(i(k,34)&&ae==="single"?(w[0]=ve,w[w.length-1]=ve):i(k,39)&&ae==="double"?(w[0]=Ce,w[w.length-1]=Ce):N===!0&&(ee=w[w.length-1],w.pop(),w.pop(),w.push(ee)),u=S,b===X&&(u=u-1,w.pop()),p=w.join(c),(i(k,34)||i(k,39)||k==="{{"||k==="{%")&&(p=Te(p)),k==="{%"||k==="{{"){$=J(p),d=$[0],g($[1]);return}if(v==="string"){if(d="string",s.language==="json")p=p.replace(/\\u[\dA-F]{4}/gi,me=>String.fromCharCode(parseInt(me.replace(/\\u/g,""),16)));else if(k.indexOf("#!")===0)p=p.slice(0,p.length-1),s.lineOffset=2;else if((s.stack.token!=="object"||s.stack.token==="object"&&E(q(1,!1),58)&&E(e.token[s.count],44)&&E(e.token[s.count],123))&&(p.length>n.wrap&&n.wrap>0||n.wrap!==0&&i(e.token[s.count],43)&&(i(e.token[s.count-1],46)||i(e.token[s.count-1],39)))){let me=p,be=c,Be=ae==="double"?Ce:ae==="single"?ve:me.charAt(0),he=n.wrap,Se=/u[0-9a-fA-F]{4}/,Ee=/x[0-9a-fA-F]{2}/;if(me=me.slice(1,me.length-1),i(e.token[s.count],43)&&(i(e.token[s.count-1],46)||i(e.token[s.count-1],39))&&(s.pop(e),Be=e.token[s.count].charAt(0),me=e.token[s.count].slice(1,e.token[s.count].length-1)+me,s.pop(e)),me.length>he&&he>0)do be=me.slice(0,he),i(be[he-5],92)&&Se.test(me.slice(he-4,he+1))?be=be.slice(0,he-5):i(be[he-4],92)&&Se.test(me.slice(he-3,he+2))?be=be.slice(0,he-4):i(be[he-3],92)&&(Se.test(me.slice(he-2,he+3))||Ee.test(me.slice(he-2,he+1)))?be=be.slice(0,he-3):i(be[he-2],92)&&(Se.test(me.slice(he-1,he+4))||Ee.test(me.slice(he-1,he+2)))?be=be.slice(0,he-2):i(be[he-1],92)&&(be=be.slice(0,he-1)),be=Be+be+Be,me=me.slice(be.length-2),p=be,d="string",g(c),s.lineOffset=0,p="+",d="operator",g(c);while(me.length>he);p=me===c?Be+Be:Be+me+Be,d="string";}}else /\{\s*\?>$/.test(p)?d="liquid_start":d=v;p.length>0&&g(c);}if(Z>-1&&y(),i(l[u-1],92)&&M(u-1)===!0&&(i(l[u],34)||i(l[u],39)))if(s.pop(e),i(e.token[0],123))i(l[u],34)?(k=Ce,b='\\"',w=[Ce]):(k=ve,b="\\'",w=[ve]),N=!0;else {if(i(l[u],34)){w=['\\"'],se();return}w=["\\'"],se();return}if(S=fe,S<O)do{if(E(e.token[0],123)&&E(e.token[0],91)&&ae!=="none"&&(i(l[S],34)||i(l[S],39))?(i(l[S-1],92)?M(S-1)===!0&&(ae==="double"&&i(l[S],39)||ae==="single"&&i(l[S],34))&&w.pop():ae==="double"&&i(l[S],34)&&i(l[u],39)?l[S]=Ce:ae==="single"&&i(l[S],39)&&i(l[u],34)&&(l[S]=ve),w.push(l[S])):S>V?(pe=!0,i(l[S],123)&&i(l[S+1],37)&&l[S+2]!==k?(se(),re("{%","%}","liquid"),de()):i(l[S],123)&&i(l[S+1],123)&&l[S+2]!==k?(se(),re("{{","}}","liquid"),de()):(pe=!1,w.push(l[S]))):w.push(l[S]),s.language!=="json"&&s.language!=="javascript"&&(i(k,34)||i(k,39))&&(pe===!0||S>V)&&E(l[S-1],92)&&E(l[S],34)&&E(l[S],39)&&(i(l[S],10)||S===O-1)){s.error="Unterminated string in script on line number "+s.lineNumber;break}if(l[S]===W[T-1]&&(E(l[S-1],92)||M(S-1)===!1)&&(T===1||w[S-fe]===W[0]&&w.slice(S-fe-T+2).join(c)===b))break;S=S+1;}while(S<O);se();}function Le(){let k=c,b=q(5,!1),v=s.count,S=s.lineOffset;if(!(s.language==="json"||m.length<1||m[m.length-1].charAt(0)!=="x"||/^x?(;|\}|\))$/.test(p)===!1)&&!(e.stack[s.count]==="do"&&b==="while"&&i(e.token[s.count],125))){if(i(p,59)&&e.token[v-1]==="x{"){if(k=e.token[e.begin[v-2]-1],e.token[v-2]==="do"||i(e.token[v-2],41)&&"ifforwhilecatch".indexOf(k)>-1){z=s.pop(e),p=n.correct===!0?"}":"x}",d="end",A=s.stack.entry,g(),m.pop(),s.lineOffset=S;return}z=s.pop(e),p=n.correct===!0?"}":"x}",d="end",A=s.stack.entry,g(),m.pop(),p=";",d="end",s.push(e,z,c),s.lineOffset=S;return}if(p=n.correct===!0?"}":"x}",d="end",e.token[s.count]!=="x}"){if(b==="else"&&e.stack[s.count]==="if"&&(i(e.token[s.count],59)||e.token[s.count]==="x;")){A=s.stack.entry,g(),m.pop(),s.lineOffset=S;return}do if(A=s.stack.entry,g(),m.pop(),e.stack[s.count]==="do")break;while(m[m.length-1]==="x{");s.lineOffset=S;}}}function ge(){let k=s.count;if(e.stack[k]==="object"&&x.objectSort===!0)p=",",d="separator",ne(),g();else {do k=k-1;while(k>0&&e.types[k-1]==="comment");s.splice({data:e,howmany:0,index:k,record:{begin:e.begin[k],ender:-1,lexer:"script",lines:s.lineOffset,stack:e.stack[k],token:",",types:"separator"}}),g();}}function _e(k){let b=!1,v=!1,S=q(1,!1),N=i(e.token[s.count],40)?s.count:e.begin[s.count];function pe(){let w=0,$=e.token[N-1]==="Array",W=$?"[":"{",T=$?"]":"}",V=$?"array":"object";if($===!0&&e.types[s.count]==="number"&&(w=Number(e.token[s.count]),z=s.pop(e)),z=s.pop(e),z=s.pop(e),z=s.pop(e),s.stack.pop(),p=W,d="start",g(V),w>0){p=",",d="separator";do g(),w=w-1;while(w>0)}p=T,d="end",g();}if(Z>-1&&y(),j.length>0&&(j[j.length-1]===0?j.pop():j[j.length-1]=j[j.length-1]-1),(i(k,41)||k==="x)"||i(k,93))&&(n.correct===!0&&Q(),ne()),(i(k,41)||k==="x)")&&D(!1),I>-1&&(i(k,125)&&(x.variableList==="list"&&C.count[I]===0||e.token[s.count]==="x;"&&x.variableList==="each")&&R(),C.count[I]=C.count[I]-1,C.count[I]<0&&R()),i(p,44)&&e.stack[s.count]!=="initializer"&&(i(k,93)&&i(e.token[s.count-1],91)||i(k,125))&&(z=s.pop(e)),i(k,41)||k==="x)"?(p=k,r.length>0&&(P=r[r.length-1],P.length>1&&E(S,123)&&(P[0]==="if"||P[0]==="for"||P[0]==="with"||P[0]==="while"&&e.stack[P[1]-2]!==void 0&&e.stack[P[1]-2]!=="do")&&(b=!0))):i(k,93)?p="]":i(k,125)&&(E(p,44)&&n.correct===!0&&Q(),s.stack.length>0&&s.stack.token!=="object"&&D(!0),x.objectSort===!0&&s.stack.token==="object"&&gt(e),d==="comment"&&(p=e.token[s.count],d=e.types[s.count]),p="}"),s.stack.token==="data_type"?d="type_end":d="end",r.pop(),A=s.stack.entry,i(k,41)&&n.correct===!0&&N-s.count<2&&(i(e.token[s.count],40)||e.types[s.count]==="number")&&(e.token[N-1]==="Array"||e.token[N-1]==="Object")&&e.token[N-2]==="new"&&(pe(),v=!0),m[m.length-1]==="x{"&&i(k,125)?(Le(),m.pop(),e.stack[s.count]!=="try"&&E(S,58)&&E(S,59)&&e.token[e.begin[u]-1]!=="?"&&Le(),p="}"):m.pop(),x.endComma!==void 0&&x.endComma!=="none"&&s.stack.token==="array"||s.stack.token==="object"||s.stack.token==="data_type")if(x.endComma==="always"&&E(e.token[s.count],44)){let w=s.stack.index,$=s.count;do{if(e.begin[$]===w){if(i(e.token[$],44))break}else $=e.begin[$];$=$-1;}while($>w);if($>w){let W=d,T=p;p=",",d="separator",g(),p=T,d=W;}}else x.endComma==="never"&&i(e.token[s.count],44)&&s.pop(e);v===!1&&(g(),i(p,125)&&e.stack[s.count]!=="object"&&e.stack[s.count]!=="class"&&e.stack[s.count]!=="data_type"&&(o.pop(),Le())),b===!0&&(p=n.correct===!0?"{":"x{",d="start",g(P[0]),m.push("x{"),P[1]=s.count),h.pop(),s.stack.token!=="data_type"&&(h[h.length-1]=!1);}function H(k){let b=s.count,v=c,S=c,N=c,pe=!1;if(m.push(k),i(k,123)&&(e.types[s.count]==="type"||e.types[s.count]==="type_end"||e.types[s.count]==="generic")){let w=0;e.types[s.count]==="type_end"&&(b=e.begin[s.count]),w=b;do if(b=b-1,e.begin[b]!==w&&e.begin[b]!==-1||i(e.token[b],58))break;while(b>e.begin[b]);i(e.token[b],58)&&e.stack[b-1]==="arguments"?(h.push(!1),pe=!0):h.push(h[h.length-1]),b=s.count;}else i(k,91)&&e.types[s.count]==="type_end"?h.push(!0):h.push(h[h.length-1]);if(Z>-1&&(y(),b=s.count),I>-1&&(C.count[I]=C.count[I]+1),e.token[b-1]==="function"?r.push(["function",b+1]):r.push([p,b+1]),p=k,h[h.length-1]===!0?d="type_start":d="start",i(k,40)||k==="x("?ne():i(k,91)&&(a>-1?(e.begin[a-1]===e.begin[e.begin[b]-1]||e.token[e.begin[b]]==="x(")&&(a=-1,n.correct===!0?_e(")"):_e("x)"),ne(),p="{",d="start"):i(p,41)&&ne(),d==="comment"&&i(e.token[b-1],41)&&(p=e.token[b],e.token[b]="{",d=e.types[b],e.types[b]="start")),v=(()=>{let w=s.count;if(e.types[w]==="comment")do w=w-1;while(w>0&&e.types[w]==="comment");return e.token[w]})(),S=e.stack[b]===void 0?c:(()=>{let w=s.count;if(e.types[w]==="comment")do w=w-1;while(w>0&&e.types[w]==="comment");return e.token[e.begin[w]-1]})(),i(p,123)&&(e.types[b]==="word"||i(e.token[b],93))){let w=b;if(i(e.token[w],93))do w=e.begin[w]-1;while(i(e.token[w],93));do{if(e.types[w]==="start"||e.types[w]==="end"||e.types[w]==="operator")break;w=w-1;}while(w>0);i(e.token[w],58)&&e.stack[w-1]==="arguments"&&(N="function",o.push(L),L=[]);}if(d==="type_start")N="data_type";else if(N===c&&(i(p,123)||p==="x{")){if(v==="else"||v==="do"||v==="try"||v==="finally"||v==="switch")N=v;else if(j[j.length-1]===0&&v!=="return")j.pop(),N="class";else if(e.token[b-1]==="class")N="class";else if(i(e.token[b],93)&&i(e.token[b-1],91))N="array";else if((e.types[b]==="word"||e.types[b]==="reference")&&(e.types[b-1]==="word"||e.types[b-1]==="reference"||e.token[b-1]==="?"&&(e.types[b-2]==="word"||e.types[b-2]==="reference"))&&e.token[b]!=="in"&&e.token[b-1]!=="export"&&e.token[b-1]!=="import")N="map";else if(e.stack[b]==="method"&&e.types[b]==="end"&&(e.types[e.begin[b]-1]==="word"||e.types[e.begin[b]-1]==="reference")&&e.token[e.begin[b]-2]==="new")N="initializer";else if(i(p,123)&&(i(v,41)||v==="x)")&&(e.types[e.begin[b]-1]==="word"||e.types[e.begin[b]-1]==="reference"||e.token[e.begin[b]-1]==="]"))S==="if"?N="if":S==="for"?N="for":S==="while"?N="while":S==="class"?N="class":S==="switch"||e.token[e.begin[b]-1]==="switch"?N="switch":S==="catch"?N="catch":N="function";else if(i(p,123)&&(i(v,59)||v==="x;"))N="block";else if(i(p,123)&&i(e.token[b],58)&&e.stack[b]==="switch")N="block";else if(e.token[b-1]==="import"||e.token[b-2]==="import"||e.token[b-1]==="export"||e.token[b-2]==="export")N="object";else if(i(v,41)&&(P[0]==="function"||P[0]==="if"||P[0]==="for"||P[0]==="class"||P[0]==="while"||P[0]==="switch"||P[0]==="catch"))N=P[0];else if(e.stack[b]==="notation")N="function";else if((e.types[b]==="number"||e.types[b]==="string"||e.types[b]==="word"||e.types[b]==="reference")&&(e.types[b-1]==="word"||e.types[b-1]==="reference")&&e.token[e.begin[b]-1]!=="for")N="function";else if(s.stack.length>0&&E(e.token[b],58)&&s.stack.token==="object"&&(i(e.token[e.begin[b]-2],123)||i(e.token[e.begin[b]-2],44)))N="function";else if(e.types[P[1]-1]==="markup"&&e.token[P[1]-3]==="function")N="function";else if(v==="=>")N="function";else if(pe===!0||e.types[s.count]==="type_end"&&e.stack[e.begin[s.count]-2]==="arguments")N="function";else if(i(v,41)&&e.stack[b]==="method"&&(e.types[e.begin[b]-1]==="word"||e.types[e.begin[b]-1]==="property"||e.types[e.begin[b]-1]==="reference"))N="function";else if(i(p,123)&&e.types[b]==="word"&&e.token[b]!=="return"&&e.token[b]!=="in"&&e.token[b]!=="import"&&e.token[b]!=="const"&&e.token[b]!=="let"&&e.token[b]!==c)N="block";else if(i(p,123)&&"if|else|for|while|function|class|switch|catch|finally".indexOf(e.stack[b])>-1&&(e.token[b]==="x}"||i(e.token[b],125)))N="block";else if(e.stack[b]==="arguments")N="function";else if(e.types[b]==="generic")do{if(b=b-1,e.token[b]==="function"||e.stack[b]==="arguments"){N="function";break}if(e.token[b]==="interface"){N="map";break}if(i(e.token[b],59)){N="object";break}}while(b>e.begin[s.count]);else N="object";N!=="object"&&N!=="class"&&(N==="function"?(o.push(L),L=[]):o.push([]));}else i(p,91)?N="array":(i(p,40)||p==="x(")&&(v==="function"||e.token[b-1]==="function"||e.token[b-1]==="function*"||e.token[b-2]==="function"?N="arguments":i(e.token[b-1],46)||i(e.token[e.begin[b]-2],46)||e.types[b]==="generic"||i(e.token[b],125)&&e.stack[b]==="function"?N="method":v==="if"||v==="for"||v==="class"||v==="while"||v==="catch"||v==="finally"||v==="switch"||v==="with"?N="expression":e.types[b]==="word"||e.types[b]==="property"||e.types[b]==="reference"?N="method":N="paren");g(N),j.length>0&&(j[j.length-1]=j[j.length-1]+1);}function J(k){let b=2,v=0,S=c,N=k.slice(0,2),pe=k.length;if(i(k[2],45)&&(b=b+1),oe(k.charAt(b))===!0)do b=b+1;while(oe(k.charAt(b))===!0&&b<pe);v=b;do v=v+1;while(oe(k.charAt(v))===!1&&k.charAt(v)!=="("&&v<pe);if(v===pe&&(v=k.length-2),S=k.slice(b,v),S==="else"||N==="{%"&&(S==="elseif"||S==="when"||S==="elif"||S==="elsif"))return ["liquid_else",`liquid_${S}`];if(N==="{{")return S==="end"?["liquid_end",c]:S==="define"||S==="form"||S==="if"||S==="unless"||S==="range"||S==="with"?["liquid_start",`liquid_${S}`]:["liquid",c];if(v=ie.length-1,v>-1)do{if(S===ie[v]&&S!=="block")return ["liquid_start",`liquid_${S}`];if(S==="end"+ie[v])return ["liquid_end",c];v=v-1;}while(v>-1);return ["liquid",c]}function y(){let k=Z,b=1,v=c,S=c,N=p,pe=d,w=[];function $(){m.push("x{"),s.splice({data:e,howmany:1,index:s.count-3});}function W(T,V,fe){let ae=e.begin[T],de=0;do{if(e.token[T]===V&&e.types[T]==="word"){if(fe===!0)e.types[T]="reference";else if(e.begin[T]>ae&&e.token[e.begin[T]]==="{"&&e.stack[T]!=="object"&&e.stack[T]!=="class"&&e.stack[T]!=="data_type")if(e.stack[T]==="function")e.types[T]="reference";else {de=e.begin[T];do{if(e.stack[de]==="function"){e.types[T]="reference";break}de=e.begin[de];}while(de>ae)}}T=T-1;}while(T>ae)}do w.push(l[k]),i(l[k],92),k=k+1;while(k<u);if(p.charAt(0)==="\u201C"?s.error=`Quote looking character (\u201C, \\u201c) used instead of actual quotes on line number ${s.lineNumber}`:p.charAt(0)==="\u201D"&&(s.error=`Quote looking character (\u201D, \\u201d) used instead of actual quotes on line number ${s.lineNumber}`),v=w.join(c),Z=-1,s.count>0&&v==="function"&&i(e.token[s.count],40)&&(i(e.token[s.count-1],123)||e.token[s.count-1]==="x{")&&(e.types[s.count]="start"),s.count>1&&v==="function"&&i(p,40)&&(i(e.token[s.count-1],125)||e.token[s.count-1]==="x}"))if(i(e.token[s.count-1],125)){if(k=s.count-2,k>-1)do{if(e.types[k]==="end"?b=b+1:(e.types[k]==="start"||e.types[k]==="end")&&(b=b-1),b===0)break;k=k-1;}while(k>-1);if(i(e.token[k],123)&&i(e.token[k-1],41)){if(b=1,k=k-2,k>-1)do{if(e.types[k]==="end"?b=b+1:(e.types[k]==="start"||e.types[k]==="end")&&(b=b-1),b===0)break;k=k-1;}while(k>-1);e.token[k-1]!=="function"&&e.token[k-2]!=="function"&&(e.types[s.count]="start");}}else e.types[s.count]="start";if(n.correct===!0&&(v==="Object"||v==="Array")&&i(l[u+1],40)&&i(l[u+2],41)&&i(e.token[s.count-1],61)&&e.token[s.count]==="new")v==="Object"?(e.token[s.count]="{",p="}",e.stack[s.count]="object",s.stack.update("object")):(e.token[s.count]="[",p="]",e.stack[s.count]="array",s.stack.update("array")),e.types[s.count]="start",d="end",l[u+1]=c,l[u+2]=c,u=u+2;else {if(b=s.count,k=b,x.variableList!=="none"&&(v==="var"||v==="let"||v==="const")){if(e.types[b]==="comment")do b=b-1;while(b>0&&e.types[b]==="comment");if(x.variableList==="list"&&I>-1&&C.index[I]===b&&v===C.word[I]){p=",",d="separator",e.token[b]=p,e.types[b]=d,C.count[I]=0,C.index[I]=b,C.word[I]=v;return}I=I+1,C.count.push(0),C.index.push(b),C.word.push(v),b=k;}else I>-1&&v!==C.word[I]&&s.count===C.index[I]&&i(e.token[C.index[I]],59)&&p!==C.word[I]&&x.variableList==="list"&&R();if(v==="from"&&e.token[s.count]==="x;"&&i(e.token[s.count-1],125)&&ne(),v==="while"&&e.token[s.count]==="x;"&&i(e.token[s.count-1],125)){let T=0,V=s.count-2;if(V>-1)do{if(e.types[V]==="end"?T=T+1:e.types[V]==="start"&&(T=T-1),T<0){i(e.token[V],123)&&e.token[V-1]==="do"&&ne();return}V=V-1;}while(V>-1)}if(pe==="comment"){let T=s.count;do T=T-1;while(T>0&&e.types[T]==="comment");pe=e.types[T],N=e.token[T];}if(S=q(2,!1),v==="void")N===":"&&e.stack[s.count-1]==="arguments"?d="type":d="word";else if((s.stack.token==="object"||s.stack.token==="class"||s.stack.token==="data_type")&&(i(e.token[s.count],123)||i(e.token[e.begin[s.count]],123)&&i(e.token[s.count],44)||e.types[s.count]==="liquid_end"&&(i(e.token[e.begin[s.count]-1],123)||i(e.token[e.begin[s.count]-1],44))))v==="return"||v==="break"?d="word":d="property";else if(h[h.length-1]===!0||(s.language==="typescript"||s.language==="flow")&&N==="type")d="type";else if(o.length>0&&(N==="function"||N==="class"||N==="const"||N==="let"||N==="var"||N==="new"||N==="void"))d="reference",o[o.length-1].push(v),s.language==="javascript"||s.language==="jsx"||s.language==="typescript"||s.language==="tsx"?N==="var"||N==="function"&&e.types[s.count-1]!=="operator"&&e.types[s.count-1]!=="start"&&e.types[s.count-1]!=="end"?W(s.count,v,!0):W(s.count,v,!1):W(s.count,v,!1);else if(s.stack.token==="arguments"&&d!=="operator")d="reference",L.push(v);else if(i(N,44)&&e.stack[s.count]!=="method"&&(e.stack[s.count]!=="expression"||e.token[e.begin[s.count]-1]==="for")){let T=s.count,V=s.stack.index;do{if(e.begin[T]===V){if(e.token[T]===";"||e.token[T]==="var"||e.token[T]==="let"||e.token[T]==="const"||e.token[T]==="type")break}else e.types[T]==="end"&&(T=e.begin[T]);T=T-1;}while(T>V);o.length>0&&e.token[T]==="var"?(d="reference",o[o.length-1].push(v),s.language==="javascript"||s.language==="jsx"||s.language==="typescript"||s.language==="tsx"?W(T,v,!0):W(T,v,!1)):o.length>0&&(e.token[T]==="let"||e.token[T]==="const"||e.token[T]==="type"&&(s.language==="typescript"||s.language==="tsx"))?(d="reference",o[o.length-1].push(v),W(T,v,!1)):d="word";}else if(s.stack.token!=="object"||s.stack.token==="object"&&p!==","&&p!=="{"){let T=o.length,V=0;if(T>0){do if(T=T-1,V=o[T].length,V>0){do if(V=V-1,v===o[T][V])break;while(V>0);if(v===o[T][V])break}while(T>0);o[T][V]===v&&N!=="."?d="reference":d="word";}else d="word";}else d="word";p=v,v==="from"&&e.token[s.count]==="}"&&ne();}if(g(),v==="class"&&j.push(0),v==="do"&&(S=q(1,!0),S!=="{"&&(p=n.correct===!0?"{":"x{",d="start",m.push("x{"),g("do"))),v==="else"){S=q(2,!0);let T=s.count-1;if(e.types[T]==="comment")do T=T-1;while(T>0&&e.types[T]==="comment");e.token[T]==="x}"&&(e.token[s.count]==="else"?e.stack[s.count-1]!=="if"&&e.types[s.count-1]!=="comment"&&e.stack[s.count-1]!=="else"?(m.pop(),s.splice({data:e,howmany:0,index:s.count-1,record:{begin:e.begin[e.begin[e.begin[s.count-1]-1]-1],ender:-1,lexer:"script",lines:0,stack:"if",token:n.correct===!0?"}":"x}",types:"end"}}),s.stack.length>1&&(s.stack.splice(s.stack.length-2,1),s.stack.update(s.count))):(e.token[s.count-2]==="x}"&&A[0]!=="if"&&e.stack[s.count]==="else"||e.token[s.count-2]==="}"&&e.stack[s.count-2]==="if"&&A[0]==="if"&&e.token[A[1]-1]!=="if"&&e.token[e.begin[s.count-1]]==="x{")&&$():e.token[s.count]==="x}"&&e.stack[s.count]==="if"&&$()),S!=="if"&&E(S,123)&&(p=n.correct===!0?"{":"x{",d="start",m.push("x{"),g("else"));}(v==="for"||v==="if"||v==="switch"||v==="catch")&&e.token[s.count-1]!=="."&&(S=q(1,!0),S!=="("&&(a=s.count,n.correct===!0?H("("):H("x(")));}function Y(){s.lineOffset=1;do{if(i(l[u],10)&&(s.lineIndex=u,s.lineOffset=s.lineOffset+1,s.lineNumber=s.lineNumber+1),oe(l[u+1])===!1)break;u=u+1;}while(u<O)}do oe(l[u])?(Z>-1&&y(),Y(),s.lineOffset>1&&K<s.count&&E(l[u+1],59)&&E(l[u+1],125)&&(D(!1),K=s.count)):i(l[u],123)&&i(l[u+1],37)?re("{%","%}","liquid"):i(l[u],123)&&i(l[u+1],123)?re("{{","}}","liquid"):i(l[u],60)&&i(l[u+1],33)&&i(l[u+2],45)&&i(l[u+3],45)?re("<!--","-->","comment"):i(l[u],60)?le():i(l[u],47)&&(u===O-1||i(l[u+1],42))?we():(s.count<0||e.lines[s.count]>0)&&i(l[u],35)&&i(l[u+1],33)&&(i(l[u+2],47)||i(l[u+3],91))?re("#!"+l[u+2],X,"string"):i(l[u],47)&&(u===O-1||i(l[u+1],47))?B():i(l[u],96)||i(l[u],125)&&s.stack.token==="template_string"?(Z>-1&&y(),p=U(),i(p,125)&&p.slice(p.length-2)==="${"?(d="template_string_else",g("template_string")):p.slice(p.length-2)==="${"?(d="template_string_start",g("template_string")):i(p[0],125)?(d="template_string_end",g()):(d="string",g())):i(l[u],34)||i(l[u],39)?re(l[u],l[u],"string"):i(l[u],45)&&u<O-1&&E(l[u+1],61)&&E(l[u+1],45)&&(d==="number"||d==="word"||d==="reference")&&p!=="return"&&(d==="word"||d==="reference"||d==="number"||i(p,41)||i(p,93))?(Z>-1&&y(),p="-",d="operator",g()):Z===-1&&(l[u]!=="0"||l[u]==="0"&&l[u+1]!=="b")&&(je(l[u])||u!==O-2&&i(l[u],45)&&i(l[u+1],46)&&je(l[u+2])||u!==O-1&&(i(l[u],45)||i(l[u],46))&&je(l[u+1]))?(Z>-1&&y(),d==="end"&&i(l[u],45)?(p="-",d="operator"):(p=ue(),d="number"),g()):i(l[u],58)&&i(l[u+1],58)?(Z>-1&&y(),n.correct===!0&&Q(),ne(),u=u+1,p="::",d="separator",g()):i(l[u],44)?(Z>-1&&y(),n.correct===!0&&Q(),h[h.length-1]===!0&&e.stack[s.count].indexOf("type")<0&&(h[h.length-1]=!1),d==="comment"?ge():I>-1&&C.count[I]===0&&x.variableList==="each"?(ne(),p=";",d="separator",g(),p=C.word[I],d="word",g(),C.index[I]=s.count):(p=",",d="separator",ne(),g())):i(l[u],46)?(Z>-1&&y(),h[h.length-1]=!1,i(l[u+1],46)&&i(l[u+2],46)?(p="...",d="operator",u=u+2):(ne(),p=".",d="separator"),oe(l[u-1])&&(s.lineOffset=1),g()):i(l[u],59)?(Z>-1&&y(),h[h.length-1]===!0&&e.stack[s.count].indexOf("type")<0&&(h[h.length-1]=!1),j[j.length-1]===0&&j.pop(),I>-1&&C.count[I]===0&&(x.variableList==="each"?R():C.index[I]=s.count+1),n.correct===!0&&Q(),p=";",d="separator",e.token[s.count]==="x}"?ke():g(),Le()):i(l[u],40)||i(l[u],91)||i(l[u],123)?H(l[u]):i(l[u],41)||i(l[u],93)||i(l[u],125)?_e(l[u]):Z<0&&e.stack[s.count]==="object"&&i(l[u],42)&&E(l[u+1],61)&&je(l[u+1])===!1&&oe(l[u+1])===!1?Z=u:i(l[u],61)||i(l[u],38)||i(l[u],60)||i(l[u],62)||i(l[u],43)||i(l[u],45)||i(l[u],42)||i(l[u],47)||i(l[u],33)||i(l[u],63)||i(l[u],124)||i(l[u],94)||i(l[u],58)||i(l[u],37)||i(l[u],94)?(p=G(),p==="regex"?p=e.token[s.count]:i(p,42)&&e.token[s.count]==="function"?e.token[s.count]="function*":(d="operator",E(p,33)&&p!=="++"&&p!=="--"&&ne(),g())):Z<0&&l[u]!==c&&(Z=u),I>-1&&s.count===C.index[I]+1&&i(e.token[C.index[I]],59)&&p!==C.word[I]&&d!=="comment"&&x.variableList==="list"&&R(),u=u+1;while(u<O);return Z>-1&&y(),(E(e.token[s.count],125)&&i(e.token[0],123)||E(e.token[0],123))&&(E(e.token[s.count],93)&&i(e.token[0],91)||E(e.token[0],91))&&D(!1),t[0]===s.count&&(p=X+t[1],d="string",g()),e.token[s.count]==="x;"&&(i(e.token[s.count-1],125)||i(e.token[s.count-1],93))&&e.begin[s.count-1]===0&&s.pop(e),x.objectSort&&e.begin.length>0&&Ct(0,s.count+1),e}function Ri(){let{data:e,rules:o,source:n}=s,f=n.split(c),x=n.length,l=[],O=[],r=0,m=c,j=c;function t(a){s.push(e,{begin:s.stack.index,ender:-1,lexer:"style",lines:s.lineOffset,stack:s.stack.token,token:j,types:m},a);}function h(a){let L=a;do a=a-1;while(i(f[a],92)&&a>0);return (L-a)%2===1}function C(a){let L=a.replace(/\s*!important/," !important").split(c),z=/-?transition$/.test(e.token[s.count-2]),A=[],F=/(\s|\(|,)-?0+\.?\d+([a-z]|\)|,|\s)/g,ie=/(\s|\(|,)-?\.?\d+([a-z]|\)|,|\s)/g,R=0,g=0,q=c,M=L.length,D=[],ne=G=>G;function ke(G){return G=G.replace(/\s*/g,c),/\/\d/.test(G)&&a.indexOf("url(")===0?G:` ${G.charAt(0)} ${G.charAt(1)}`}function we(G){return o.style.noLeadZero===!0?G.replace(/^-?\D0+(\.|\d)/,U=>U.replace(/0+/,c)):/0*\./.test(G)?G.replace(/0*\./,"0."):/0+/.test(/\d+/.exec(G)[0])?/^\D*0+\D*$/.test(G)?G.replace(/0+/,"0"):G.replace(/\d+/.exec(G)[0],/\d+/.exec(G)[0].replace(/^0+/,c)):G}function B(G){return G.replace(",",", ")}function _(G){return `${G} `}function ue(){let G=R-1,U=G;if(G<1)return !0;do U=U-1;while(U>0&&i(L[U],92));return (G-U)%2===1}if(R<M)do D.push(L[R]),(E(L[R-1],92)||ue()===!1)&&(q===c?i(L[R],34)?(q=Ce,g=g+1):i(L[R],39)?(q=ve,g=g+1):i(L[R],40)?(q=")",g=g+1):i(L[R],91)&&(q="]",g=g+1):i(L[R],40)&&i(q,41)||i(L[R],91)&&i(q,93)?g=g+1:L[R]===q&&(g=g-1,g===0&&(q=c))),q===c&&i(L[R],32)&&(D.pop(),A.push(ne(D.join(c))),D=[]),R=R+1;while(R<M);if(A.push(ne(D.join(c))),M=A.length,R=0,R<M)do o.style.noLeadZero===!0&&/^-?0+\.\d+[a-z]/.test(A[R])===!0?A[R]=A[R].replace(/0+\./,"."):o.style.noLeadZero===!1&&/^-?\.\d+[a-z]/.test(A[R])?A[R]=A[R].replace(".","0."):F.test(A[R])||ie.test(A[R])?A[R]=A[R].replace(F,we).replace(ie,we):/^(0+([a-z]{2,3}|%))$/.test(A[R])&&z===!1?A[R]="0":/^(0+)/.test(A[R])?(A[R]=A[R].replace(/0+/,"0"),/\d/.test(A[R].charAt(1))&&(A[R]=A[R].substr(1))):/^url\((?!('|"))/.test(A[R])&&A[R].charCodeAt(A[R].length-1)===41&&(q=A[R].charAt(A[R].indexOf("url(")+4),q!=="@"&&E(q,40)&&E(q,60)&&(o.style.quoteConvert==="double"?A[R]=A[R].replace(/url\(/,'url("').replace(/\)$/,'")'):A[R]=A[R].replace(/url\(/,"url('").replace(/\)$/,"')"))),/^(\+|-)?\d+(\.\d+)?(e-?\d+)?\D+$/.test(A[R])&&(ye.css.units.has(A[R].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,c))||(A[R]=A[R].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,_))),/^\w+\(/.test(A[R])&&A[R].charAt(A[R].length-1)===")"&&(A[R].indexOf("url(")!==0||A[R].indexOf("url(")===0&&A[R].indexOf(te)>0)&&(A[R]=A[R].replace(/,\S/g,B)),R=R+1;while(R<M);return q=A.join(te),q.charAt(0)+q.slice(1).replace(/\s*(\/|\+|\*)\s*(\d|\$)/,ke)}function I(){let a=[],L=[],z=o.style.quoteConvert,A=r,F=0,ie=c,R=null,g=!1;function q(){if(L.push(f[A]),oe(f[A+1]))do A=A+1;while(A<x&&oe(f[A+1]))}if(A<x)do{if(i(f[A],34)||i(f[A],39)?(R===null&&(R=!1),a[a.length-1]===f[A]&&(E(f[A-1],92)||h(A-1)===!1)?(a.pop(),z==="double"?f[A]=Ce:z==="single"&&(f[A]=ve)):E(a[a.length-1],34)&&E(a[a.length-1],39)&&(E(f[A-1],92)||h(A-1)===!1)?(a.push(f[A]),z==="double"?f[A]=Ce:z==="single"&&(f[A]=ve)):i(f[A-1],92)&&z!=="none"?h(A-1)===!0&&(z==="double"&&i(f[A],39)||z==="single"&&i(f[A],34))&&L.pop():z==="double"&&i(f[A],34)?f[A]='\\"':z==="single"&&i(f[A],39)&&(f[A]="\\'"),L.push(f[A])):E(f[A-1],92)||h(A-1)===!1?i(f[A],40)?(R===null&&(R=!0),a.push(")"),q()):i(f[A],91)?(R=!1,a.push("]"),q()):(i(f[A],35)||i(f[A],64))&&i(f[A+1],123)?(R=!1,L.push(f[A]),A=A+1,a.push("}"),q()):f[A]===a[a.length-1]?(L.push(f[A]),a.pop()):L.push(f[A]):L.push(f[A]),s.stack.token==="map"&&a.length===0&&(i(f[A+1],44)||i(f[A+1],41)))if(i(f[A+1],41)&&i(e.token[s.count],40))s.pop(e),s.stack.pop(),L.splice(0,0,"(");else break;if(i(f[A+1],58)){if(F=A,oe(f[F]))do F=F-1;while(oe(f[F]));ie=f.slice(F-6,F+1).join(c),(ie.indexOf("filter")===ie.length-6||ie.indexOf("progid")===ie.length-6)&&(ie="filter");}if(a.length===0){if(i(f[A+1],59)&&h(A+1)===!0||i(f[A+1],58)&&E(f[A],58)&&E(f[A+2],58)&&ie!=="filter"&&ie!=="progid"||i(f[A+1],123)||i(f[A+1],125)||i(f[A+1],47)&&(i(f[A+2],42)||i(f[A+2],47))){if(F=L.length-1,oe(L[F]))do F=F-1,A=A-1,L.pop();while(oe(L[F]));break}if(i(f[A+1],44))break}A=A+1;}while(A<x);r=A,s.stack.token==="map"&&i(L[0],40)&&(l[l.length-1]=l[l.length-1]-1),j=L.join(c).replace(/\s+/g,te).replace(/^\s/,c).replace(/\s$/,c),R===!0&&(ye.css.atrules(j)&&o.style.atRuleSpace===!0?e.token[s.count]=e.token[s.count].replace(/\s*\(/g," (").replace(/\s*\)\s*/g,") ").replace(/,\(/g,", ("):j=j.replace(/\s+\(/g,"(").replace(/\s+\)/g,")").replace(/,\(/g,", (")),m==="colon"&&e.types[s.count-1]==="start"?ye.css.pseudoClasses.has(j)&&(e.token[s.count]=j=":"+j,m="pseudo",g=!0):s.count>-1&&e.token[s.count].indexOf("extend(")===0?m="pseudo":R===!0&&je(j.charAt(0))===!1&&/^rgba?\(/.test(j)===!1&&j.indexOf("url(")!==0&&(j.indexOf(te)<0||j.indexOf(te)>j.indexOf("("))&&j.charAt(j.length-1)===")"?(i(e.token[s.count],58)?m="value":(j=j.replace(/,\u0020?/g,", "),m="function"),j=C(j)):s.count>-1&&ve.indexOf(e.token[s.count].charAt(0))>-1&&e.types[s.count]==="variable"?m="item":i(L[0],64)||L[0]==="$"?(e.types[s.count]==="colon"&&o.language==="css"&&(e.types[s.count-1]==="property"||e.types[s.count-1]==="variable")?m="value":s.count>-1&&(m="item",ie=e.token[s.count],A=ie.indexOf("("),i(ie[ie.length-1],41)&&A>0&&(ie=ie.slice(A+1,ie.length-1),e.token[s.count]=e.token[s.count].slice(0,A+1)+C(ie)+")")),j=C(j)):m="item",g===!1?t(c):g=!1;}function u(a){let L=s.count,z=0,A=c,F=[];function ie(){if(!(s.count<0)){if(L>0&&(e.types[L]==="comment"||e.types[L]==="ignore"))do L=L-1,F.push(e.token[L]);while(L>0&&e.lexer[L]==="style"&&(e.types[L]==="comment"||e.types[L]==="ignore"));if(z=L-1,z>0&&(e.types[z]==="comment"||e.types[z]==="ignore"))do z=z-1;while(z>0&&e.lexer[L]==="style"&&(e.types[z]==="comment"||e.types[z]==="ignore"));z<0&&(z=0),L<0&&(L=0),A=e.token[L][0];}}function R(q){return q.replace(/\s*&/," &").replace(/\s*&\s*{/," & {").replace(/\s*>\s*/g," > ").replace(/\s*\+\s*/g," + ")}function g(q){let M=q,D=e.begin[M];if(e.token[q]=e.token[q].replace(/\s*&/," &").replace(/\s*&\s*{/," & {").replace(/\s*>\s*/g," > ").replace(/\s*\+\s*/g," + ").replace(/:\s+/g,": ").replace(/^\s+/,c).replace(/\s+$/,c).replace(/\s+::\s+/,"::"),E(e.token[M],44)&&e.types[M]!=="comment"&&(e.types[M]="selector"),i(e.token[M-1],44)||i(e.token[M-1],58)||e.types[M-1]==="comment"||e.types[M-1]==="pseudo")if(e.types[M-1]==="colon"&&(e.types[M]==="selector"||e.types[M]==="at_rule")&&(e.types[M-2]==="template"||e.types[M-2]==="liquid_start"||e.types[M-2]==="liquid_else"||e.types[M-2]==="liquid_end"))e.token[M-1]=":"+e.token[M]+te,e.types[M-1]="selector",s.splice({data:e,howmany:1,index:M});else if(e.types[M-1]==="pseudo")e.token[M-1]=`${e.token[M-1]}${e.token[M]}`,e.types[M-1]="selector",s.splice({data:e,howmany:1,index:M});else if(e.types[M-2]==="comment")e.token[M-1]=R(`${e.token[M-1]}${e.token[M]}`),e.types[M-1]="selector",s.splice({data:e,howmany:1,index:M});else do if(M=M-1,e.begin[M]===D){if(i(e.token[M],59))break;E(e.token[M],44)&&e.types[M]!=="comment"&&(e.types[M]="selector"),e.token[M]===":"&&E(e.token[M-1],59)&&(e.token[M-1]=R(`${e.token[M-1]}:${e.token[M+1]}`),s.splice({data:e,howmany:2,index:M}));}else break;while(M>0);if(M=s.count,o.style.sortSelectors===!0&&i(e.token[M-1],44)){let ne=[e.token[M]];do{if(M=M-1,e.types[M]==="comment"||e.types[M]==="ignore")do M=M-1;while(M>0&&(e.types[M]==="comment"||e.types[M]==="ignore"));i(e.token[M],44)&&(M=M-1),ne.push(e.token[M]);}while(M>0&&(i(e.token[M-1],44)||e.types[M-1]==="selector"||e.types[M-1]==="comment"||e.types[M-1]==="ignore"));ne.sort(),M=s.count,e.token[M]=ne.pop();do{if(M=M-1,e.types[M]==="comment"||e.types[M]==="ignore")do M=M-1;while(M>0&&(e.types[M]==="comment"||e.types[M]==="ignore"));i(e.token[M],44)&&(M=M-1),e.token[M]=ne.pop();}while(M>0&&(i(e.token[M-1],44)||e.types[M-1]==="selector"||e.types[M-1]==="comment"||e.types[M-1]==="ignore"))}L=s.count,ie();}ie(),a==="start"&&(e.types[L]==="value"||e.types[L]==="variable")&&(e.types[L]="item"),e.lexer[s.count-1]!=="style"||z<0?a==="colon"?i(A,36)||i(A,64)?e.types[L]="variable":e.stack[L]!=="global"&&(e.types[L]!=="comment"||e.types[L]!=="ignore")&&(e.types[L]="property"):e.lexer[L]==="style"&&(e.types[L]="selector",g(L)):a==="start"&&e.types[L]==="function"&&e.lexer[L]==="style"?(e.types[L]="selector",g(L)):e.types[L]==="item"&&e.lexer[L]==="style"&&(a==="start"?(g(L),e.types[L]="selector",e.token[L]===":"&&(e.types[z]="selector"),e.token[L].indexOf("=\u201C")>0?s.error=`Invalid Quote (\u201C, \\201c) used on line number ${s.lineNumber}`:e.token[L].indexOf("=\u201D")>0&&(s.error=`Invalid Quote (\u201D, \\201d) used on line number ${s.lineNumber}`)):a==="end"?(i(A,36)||i(A,64)?e.types[L]="variable":e.types[L]="value",e.token[L]=C(e.token[L])):a==="separator"?e.types[z]==="colon"||i(e.token[z],44)||i(e.token[z],123)?(E(f[r],59)&&(e.types[z]==="selector"||e.types[z]==="at_rule"||i(e.token[z],123))?(e.types[L]="selector",g(L)):i(e.token[L],36)||i(e.token[L],64)?e.types[L]="variable":e.types[L]="value",e.token[L]=C(e.token[L]),e.token[L].charAt(0)==="\u201C"?s.error=`Invalid Quote (\u201C, \\201c) used on line number ${s.lineNumber}`:e.token[L].charAt(0)==="\u201D"&&(s.error=`Invalid (\u201D, \\201d) used on line number ${s.lineNumber}`)):i(A,36)||i(A,64)?e.types[L]="variable":e.types[z]==="value"||e.types[z]==="variable"?(e.token[z]=e.token[z]+e.token[L],s.pop(e)):e.types[L]="value":a==="colon"?i(A,36)||i(A,64)?e.types[L]="variable":e.types[L]="property":i(e.token[z],64)&&(e.types[z-2]!=="variable"&&e.types[z-2]!=="property"||e.types[z-1]==="separator")?(e.types[z]="variable",m="variable",e.token[z]=C(e.token[z])):a==="comment"&&(i(A,46)||i(A,35))&&(e.types[L]="selector"));}function p(){let a=s.count;do a=a-1;while(a>0&&e.types[a]==="comment");e.token[a]!==";"&&s.splice({data:e,howmany:0,index:a+1,record:{begin:s.stack.index,ender:-1,lexer:"style",lines:s.lineOffset,stack:s.stack.token,token:";",types:"separator"}});}function d(a,L){let z=[],A=c,F=c,ie=0,R=a.length;function g(q){let M=s.count>0?e.types[s.count-1]:e.types[s.count];m==="item"&&(M==="colon"?e.types[s.count]="value":u(M)),i(f[r+1],32),m=q,j=qt(j,F,o.liquid),m.indexOf("start")>-1||m.indexOf("else")>-1?t(j):t(c);}if(O[O.length-1]=!0,r<x)do{if(z.push(f[r]),A===c){if(i(f[r],34))A=Ce;else if(i(f[r],39))A=ve;else if(i(f[r],47))i(f[r+1],47)?A="/":i(f[r+1],42)&&(A="*");else if(f[r+1]===L.charAt(0)){do ie=ie+1,r=r+1,z.push(f[r]);while(r<x&&ie<L.length&&f[r+1]===L.charAt(ie));if(ie===L.length){if(A=z.join(c),oe(A.charAt(R)))do R=R+1;while(oe(A.charAt(R)));ie=R;do ie=ie+1;while(ie<L.length&&!oe(A.charAt(ie)));if(ie===A.length&&(ie=ie-L.length),a==="{%"&&(F=Ie(A)),m==="item"&&e.types[s.count-1]==="colon"&&(e.types[s.count-2]==="property"||e.types[s.count-2]==="variable")){m="value",e.types[s.count]="value",Number.isNaN(Number(e.token[s.count]))===!0&&e.token[s.count].charAt(e.token[s.count].length-1)!==")"?e.token[s.count]=e.token[s.count]+A:e.token[s.count]=e.token[s.count]+te+A;return}if(j=A,a==="{%"){let q=Array.from(ye.liquid.tags),M=q.length-1;if(F=F.slice(0,F.indexOf(te)),F.indexOf("(")>0&&(F=F.slice(0,F.indexOf("("))),ye.liquid.else.has(F)){g("liquid_else");return}if(M=q.length-1,M>-1)do{if(F===q[M]){g("liquid_start");return}if(F==="end"+q[M]){g("liquid_end");return}M=M-1;}while(M>-1)}else if(a==="{{"){let q=A.slice(2),M=q.length,D=0;do D=D+1;while(D<M&&oe(q.charAt(D))===!1&&q.charCodeAt(R)!==40);if(q=q.slice(0,D),i(q[q.length-2],125)&&(q=q.slice(0,q.length-2)),q==="end"){g("liquid_end");return}}g("liquid");return}ie=0;}}else A===f[r]&&(i(A,34)||i(A,39)?A=c:i(A,47)&&(i(f[r],13)||i(f[r],10))?A=c:i(A,42)&&i(f[r+1],47)&&(A=c));r=r+1;}while(r<x)}function P(a){let L;a?(L=Rt({chars:f,start:r,end:x,lexer:"style",begin:"//",ender:X}),j=L[0],m=vt.test(j)?"ignore":"comment"):(L=at({chars:f,start:r,end:x,lexer:"style",begin:"/*",ender:"*/"}),j=L[0],m=hi.test(j)?"ignore":"comment"),t(c),r=L[1];}function K(){let a=s.lineOffset,L={data:{margin:[c,c,c,c,!1],padding:[c,c,c,c,!1]},last:{margin:0,padding:0},removes:[]},z=s.stack.index;function A(g){if(e.token[ie-2]===g){let q=e.token[ie].replace(/\s*!important\s*/g,c).split(te),M=q.length;e.token[ie].indexOf("!important")>-1&&(L.data[g[4]]=!0),M>3?(L.data[g][0]===c&&(L.data[g][0]=q[0]),L.data[g][1]===c&&(L.data[g][1]=q[1]),L.data[g][2]===c&&(L.data[g][2]=q[2]),L.data[g][3]===c&&(L.data[g][3]=q[3])):M>2?(L.data[g][0]===c&&(L.data[g][0]=q[0]),L.data[g][1]===c&&(L.data[g][1]=q[1]),L.data[g][2]===c&&(L.data[g][2]=q[2]),L.data[g][3]===c&&(L.data[g][3]=q[1])):M>1?(L.data[g][0]===c&&(L.data[g][0]=q[0]),L.data[g][1]===c&&(L.data[g][1]=q[1]),L.data[g][2]===c&&(L.data[g][2]=q[0]),L.data[g][3]===c&&(L.data[g][3]=q[1])):(L.data[g][0]===c&&(L.data[g][0]=q[0]),L.data[g][1]===c&&(L.data[g][1]=q[0]),L.data[g][2]===c&&(L.data[g][2]=q[0]),L.data[g][3]===c&&(L.data[g][3]=q[0]));}else if(e.token[ie-2]===`${g}-bottom`)L.data[g][2]===c&&(L.data[g][2]=e.token[ie]);else if(e.token[ie-2]===`${g}-left`)L.data[g][3]===c&&(L.data[g][3]=e.token[ie]);else if(e.token[ie-2]===`${g}-right`)L.data[g][1]===c&&(L.data[g][1]=e.token[ie]);else if(e.token[ie-2]===`${g}-top`)L.data[g][0]===c&&(L.data[g][0]=e.token[ie]);else return;L.removes.push([ie,g]),L.last[g]=ie;}function F(){let g=0,q=c,M=/^(0+([a-z]+|%))/,D=L.removes.length,ne=L.data.margin[0]!==c&&L.data.margin[1]!==c&&L.data.margin[2]!==c&&L.data.margin[3]!==c,ke=L.data.padding[0]!==c&&L.data.padding[1]!==c&&L.data.padding[2]!==c&&L.data.padding[3]!==c;function we(B){if(M.test(L.data[B][0])===!0&&(L.data[B][0]="0"),M.test(L.data[B][1])===!0&&(L.data[B][1]="0"),M.test(L.data[B][2])===!0&&(L.data[B][2]="0"),M.test(L.data[B][3])===!0&&(L.data[B][3]="0"),L.data[B][0]===L.data[B][1]&&L.data[B][0]===L.data[B][2]&&L.data[B][0]===L.data[B][3]?q=L.data[B][0]:L.data[B][0]===L.data[B][2]&&L.data[B][1]===L.data[B][3]&&L.data[B][0]!==L.data[B][1]?q=`${L.data[B][0]} ${L.data[B][1]}`:L.data[B][1]===L.data[B][3]&&L.data[B][0]!==L.data[B][2]?q=`${L.data[B][0]} ${L.data[B][1]} ${L.data[B][2]}`:q=`${L.data[B][0]} ${L.data[B][1]} ${L.data[B][2]} ${L.data[B][3]}`,L.data[B[4]]===!0&&(q=`${q.replace(" !important",c)} !important`),L.last[B]>s.count){g=z<1?1:z+1;do{if(e.begin[g]===z&&e.types[g]==="value"&&e.token[g-2].indexOf(B)===0){L.last[B]=g;break}g=g+1;}while(g<s.count)}e.token[L.last[B]]=q,e.token[L.last[B]-2]=B;}if(D>1&&(ne===!0||ke===!0))do L.removes[g][0]!==L.last.margin&&L.removes[g][0]!==L.last.padding&&(ne===!0&&L.removes[g][1]==="margin"||ke===!0&&L.removes[g][1]==="padding")&&s.splice({data:e,howmany:e.types[L.removes[g][0]+1]==="separator"?4:3,index:L.removes[g][0]-2}),g=g+1;while(g<D-1);ne===!0&&we("margin"),ke===!0&&we("padding"),R===!0&&(z<0?s.error="Brace mismatch. There appears to be more closing braces than starting braces.":Ct(z,s.count+1));}let ie=s.count,R=!1;do ie=ie-1,e.begin[ie]===z?e.types[ie]==="value"&&e.types[ie-2]==="property"&&(e.token[ie-2].indexOf("margin")===0?A("margin"):e.token[ie-2].indexOf("padding")===0&&A("padding")):(R=!0,ie=e.begin[ie]);while(ie>z);F(),s.lineOffset=a;}function Z(){s.lineOffset=1;do{if(i(f[r],10)&&(s.lineIndex=r,s.lineOffset=s.lineOffset+1,s.lineNumber=s.lineNumber+1),oe(f[r+1])===!1)break;r=r+1;}while(r<x)}do oe(f[r])?Z():i(f[r],47)&&i(f[r+1],42)?P(!1):i(f[r],47)&&i(f[r+1],47)?P(!0):i(f[r],123)&&i(f[r+1],37)?d("{%","%}"):i(f[r],123)&&i(f[r+1],123)?d("{{","}}"):i(f[r],123)||i(f[r],40)&&i(e.token[s.count],58)&&e.types[s.count-1]==="variable"?(u("start"),m="start",j=f[r],i(f[r],40)?(t("map"),l.push(0)):e.types[s.count]==="at_rule"||e.types[s.count]==="selector"||e.types[s.count]==="variable"?i(e.token[s.count],64)?(e.types[s.count]="at_rule",t(e.token[s.count])):t(e.token[s.count]):e.types[s.count]==="colon"?t(e.token[s.count-1]):t("block"),O.push(!1)):i(f[r],125)||f[r]===")"&&s.stack.token==="map"&&l[l.length-1]===0?i(f[r],125)&&i(e.token[s.count-1],123)&&e.types[s.count]==="item"&&e.token[s.count-2]!==void 0&&e.token[s.count-2].charCodeAt(e.token[s.count-2].length-1)===64?(e.token[s.count-2]=e.token[s.count-2]+"{"+e.token[s.count]+"}",s.pop(e),s.pop(e),s.stack.pop()):(i(f[r],41)&&l.pop(),u("end"),i(f[r],125)&&E(e.token[s.count],59)&&(e.types[s.count]==="value"||e.types[s.count]==="function"||e.types[s.count]==="variable"&&(i(e.token[s.count-1],58)||i(e.token[s.count-1],59))?(o.correct===!0?j=";":j="x;",m="separator",t(c)):e.types[s.count]==="comment"&&p()),O.pop(),j=f[r],m="end",i(f[r],125)&&K(),o.style.sortProperties===!0&&i(f[r],125)&&gt(e),t(c)):i(f[r],59)||i(f[r],44)?(e.types[s.count-1]==="selector"||e.types[s.count-1]==="at_rule"||e.types[s.count]!=="function"&&i(e.token[s.count-1],125)?u("start"):u("separator"),e.types[s.count]!=="separator"&&h(r)===!0&&(j=f[r],m="separator",t(c))):s.count>-1&&i(f[r],58)&&e.types[s.count]!=="end"?(u("colon"),j=":",m="colon",t(c)):(s.stack.token==="map"&&i(f[r],40)&&(l[l.length-1]=l[l.length-1]+1),I()),r=r+1;while(r<x);return o.style.sortProperties===!0&&gt(e),e}function Zt(e){if(e===1)return Ut();if(e===3)return Ri();if(e===2)return vi()}function Ai(){let{rules:e}=s,{lineBreakValue:o}=e.markup,n=s.start,f=-1,x=0,l=0,O=isNaN(e.indentLevel)?0:e.indentLevel,r=s.data,m=s.ender<1||s.ender>r.token.length?r.token.length:s.ender+1,j={},t=e.language==="jsx"||e.language==="tsx",h=new Map,C=s.start>0?Array(s.start).fill(0,0,s.start):[],I=ne(),u=L(),p=[];function d(B,_){return r.types[B]===_}function P(B,_){return r.token[B]===_}function K(B,_){return B>-1&&(r.types[B]||c).indexOf(_)}function Z(B,_=!0){let ue=[],G=e.preserveLine+1,U=Math.min(r.lines[n+1]-1,G),le=0;if(B<0&&(B=0),_)do ue.push(s.crlf),le=le+1;while(le<U);if(B>0){le=0;do ue.push(u),le=le+1;while(le<B)}return ue.join(c)}function a(){let B,_=r.lines[n+1];d(n,"comment")&&(i(r.token[n][1],37)&&e.liquid.preserveComment===!1||E(r.token[n][1],37)&&e.markup.preserveComment===!1)?B=r.token[n].split(s.crlf).map(Q=>Q.trimStart()):B=r.token[n].split(s.crlf);let ue=d(n,"attribute"),G=B.length-1,U=I[n-1]>-1?ue?I[n-1]+1:I[n-1]:(()=>{let Q=n-1,re=Q>-1&&K(Q,"start")>-1;if(I[n]>-1&&d(n,"attribute"))return I[n]+1;do{if(Q=Q-1,I[Q]>-1)return d(n,"content")&&re===!1?I[Q]:I[Q]+1;K(Q,"start")>-1&&(re=!0);}while(Q>0);return Q===-2?0:1})(),le=0;r.lines[n+1]=0;do d(n,"comment")?(le===0&&(i(r.token[n][1],37)&&e.liquid.commentNewline===!0||i(r.token[n][1],37)===!1&&e.markup.commentNewline===!0)&&(e.preserveLine===0||p.length>0&&p[p.length-1].lastIndexOf(X)+1<2)&&p.push(Z(U)),B[le]!==c?(le>0&&(i(r.token[n][1],37)&&e.liquid.commentIndent===!0||i(r.token[n][1],37)===!1&&e.markup.commentIndent===!0)&&p.push(u),B[le+1].trimStart()!==c?p.push(B[le],Z(U)):p.push(B[le],X)):B[le+1].trimStart()===c?p.push(X):p.push(Z(U))):ue?o==="align"||o==="force-align"?p.push(B[le].trim(),Z(I[n])):o==="indent"||o==="force-indent"?le+1===G?p.push(B[le].trim(),Z(I[n])):p.push(B[le].trim(),Z(U)):(p.push(B[le]),o==="force-preserve"&&(le+1===G||le===0)?p.push(Z(I[n])):p.push(s.crlf)):p.push(B[le],Z(U)),le=le+1;while(le<G);if(ue&&E(B[G],60)&&h.get(n-1)>=2&&$e(B[G],62)&&e.markup.delimiterTerminus!=="inline"){h.delete(n-1);let Q=Z(I[n-1]-1);p[p.length-1]===Q&&p.push(e.indentChar.repeat(e.indentSize)),d(n-1,"singleton")&&Ve(B[G],47)?p.push(B[G].slice(0,-2),Q,"/>"):p.push(B[G].slice(0,-1),Q,">");}else p.push(B[G]);r.lines[n+1]=_,d(n,"comment")&&(d(n+1,"liquid_end")||d(n-1,"liquid_end"))?p.push(Z(I[n])):I[n]===-10?p.push(te):p.push(Z(I[n]));}function L(){let B=[e.indentChar],_=e.indentSize-1,ue=0;if(ue<_)do B.push(e.indentChar),ue=ue+1;while(ue<_);return B.join(c)}function z(){let B=n+1,_=0;if(d(B,void 0))return B-1;if(d(B,"comment")||n<m-1&&K(B,"attribute")>-1)do{if(d(B,"jsx_attribute_start")){_=B;do{if(d(B,"jsx_attribute_end")&&r.begin[B]===_)break;B=B+1;}while(B<m)}else if(d(B,"comment")===!1&&K(B,"attribute")<0)return B;B=B+1;}while(B<m);return B}function A(){let B=/(?!=)\/?>$/,_=r.token[n],ue=B.exec(_);if(ue===null)return;let G=n+1,U=!1,le=e.markup.selfCloseSpace===!0&&ue[0]==="/>"?te:c;r.token[n]=_.replace(B,c);do{if(d(G,"jsx_attribute_end")&&r.begin[r.begin[G]]===n)U=!1;else if(r.begin[G]===n){if(d(G,"jsx_attribute_start"))U=!0;else if(K(G,"attribute")<0&&U===!1)break}else if(U===!1&&(r.begin[G]<n||K(G,"attribute")<0))break;G=G+1;}while(G<m);d(G-1,"comment_attribute")&&(le=Z(I[G-2]-1)),r.token[G-1]=`${r.token[G-1]}${le}${ue[0]}`,d(G,"comment")&&r.lines[n+1]<2&&(I[n]=-10);}function F(){if(d(n,"end")===!1&&E(r.token[n],60)&&h.get(r.begin[n])>=2&&$e(r.token[n],62)){h.delete(r.begin[n]);let B=Z(I[n-1]-1).replace(/\n+/,X),_=`${r.token[n].slice(0,-1)}${B}>`;d(r.begin[n],"singleton")&&i(r.token[n][r.token[n].length-2],47)?r.token[n]=`${r.token[n].slice(0,-2)}${B}/>`:r.token[n]=_;}}function ie(){let B=r.begin[n],_=n;do if(_=_-1,P(_,"</li>")&&P(_-1,"</a>")&&r.begin[r.begin[_]]===B&&r.begin[_-1]===r.begin[_]+1)_=r.begin[_];else return;while(_>B+1);_=n;do _=_-1,d(_+1,"attribute")?C[_]=-10:P(_,"</li>")===!1&&(C[_]=-20);while(_>B+1)}function R(){let B=n,_=!1;if(r.lines[n+1]===0&&e.markup.forceIndent===!1){do{if(r.lines[B]>0){_=!0;break}B=B-1;}while(B>f);B=n;}else _=!0;if(_===!0){d(r.begin[B]-1,"liquid")&&(C[r.begin[B]-1]=O);let ue=d(x,"end")||d(x,"liquid_end")?O+1:O;do C.push(ue),B=B-1;while(B>f);ue===O+1&&(C[n]=O),(d(B,"attribute")||d(B,"liquid_attribute")||d(B,"jsx_attribute_start"))&&(console.log(r.token[B],ue),C[r.begin[B]]=ue,C[B]=ue);}else {do C.push(-20),B=B-1;while(B>f);C[B]=-20;}f=-1;}function g(){let B=O;if(e.markup.forceIndent===!0||e.markup.forceAttribute===!0){C.push(O);return}if(x<m&&(K(x,"end")>-1||K(x,"start")>-1)&&r.lines[x]>0?(C.push(O),B=B+1,n>0&&d(n,"singleton")&&K(n-1,"attribute")>-1&&d(r.begin[n-1],"singleton")&&(r.begin[n]<0||d(r.begin[n-1],"singleton")&&r.begin[r.ender[n]-1]!==n?C[n-1]=O:C[n-1]=O+1)):n>0&&d(n,"singleton")&&K(n-1,"attribute")>-1?(C[n-1]=O,l=r.token[n].length,C.push(-10)):r.lines[x]===0?C.push(-20):(e.wrap===0||n<m-2&&r.token[n]!==void 0&&r.token[n+1]!==void 0&&r.token[n+2]!==void 0&&r.token[n].length+r.token[n+1].length+r.token[n+2].length+1>e.wrap&&K(n+2,"attribute")>-1||r.token[n]!==void 0&&r.token[n+1]!==void 0&&r.token[n].length+r.token[n+1].length>e.wrap)&&(d(n+1,"singleton")||d(n+1,"liquid"))?C.push(O):(l=l+1,C.push(-10)),n>0&&K(n-1,"attribute")>-1&&r.lines[n]<1&&(C[n-1]=-20),l>e.wrap){let _=n,ue=Math.max(r.begin[n],0);if(d(n,"content")&&e.markup.preserveText===!1){let G=0,U=r.token[n].replace(/\s+/g,te).split(te);do if(_=_-1,C[_]<0)G=G+r.token[_].length,C[_]===-10&&(G=G+1);else break;while(_>0);_=0,ue=U.length;do U[_].length+G>e.wrap?(U[_]=s.crlf+U[_],G=U[_].length):(U[_]=` ${U[_]}`,G=G+U[_].length),_=_+1;while(_<ue);i(U[0],32)?r.token[n]=U.join(c).slice(1):(C[n-1]=B,r.token[n]=U.join(c).replace(s.crlf,c)),r.token[n].indexOf(s.crlf)>0&&(l=r.token[n].length-r.token[n].lastIndexOf(s.crlf));}else {do{if(_=_-1,C[_]>-1){l=r.token[n].length,r.lines[n+1]>0&&(l=l+1);return}if(K(_,"start")>-1){l=0;return}if(r.lines[_+1]>0&&(d(_,"attribute")===!1||d(_,"attribute")&&d(_+1,"attribute"))&&(d(_,"singleton")===!1||d(_,"attribute")&&d(_+1,"attribute"))){l=r.token[n].length,r.lines[n+1]>0&&(l=l+1);break}}while(_>ue);C[_]=B;}}}function q(){let B=n;r.types[B-1]==="script_start"&&i(r.token[B-1],123)&&(C[B-1]=-20);do{if(r.lexer[n+1]==="markup"&&r.begin[n+1]<B&&d(n+1,"start")===!1&&d(n+1,"singleton")===!1)break;C.push(0),n=n+1;}while(n<m);j[B]=n,r.types[n+1]==="script_end"&&r.token[n+1]==="}"?C.push(-20):(r.types[n+1],C.push(O-1)),x=z(),r.lexer[x]==="markup"&&r.stack[n].indexOf("attribute")<0&&(r.types[x]==="end"||r.types[x]==="liquid_end")&&(O=O-1);}function M(B){let _=r.token[B].replace(/\s+/g,te).split(te),ue=_.length,G=1,U=_[0].length;do U+_[G].length>e.wrap?(U=_[G].length,_[G]=s.crlf+_[G]):(_[G]=` ${_[G]}`,U=U+_[G].length),G=G+1;while(G<ue);r.token[B]=_.join(c);}function D(){let B=n-1,_=n,ue=!1,G=!1,U=K(B+1,"end"),le=r.token[B].length+1,Q=0,re=(()=>{if(K(n,"start")>0){let ge=n;do{if(d(ge,"end")&&r.begin[ge]===n&&ge<m-1&&K(ge+1,"attribute")>-1){ue=!0;break}ge=ge+1;}while(ge<m)}else n<m-1&&K(n+1,"attribute")>-1&&(ue=!0);return d(x,"end")||d(x,"liquid_end")?d(B,"singleton")?O+2:O+1:d(B,"singleton")?O+1:O})();if(ue===!1&&d(n,"comment_attribute")){C.push(O),C[B]=r.types[B]==="singleton"?O+1:O;return}function Le(ge){e.markup.forceAttribute===!1?C.push(-10):e.markup.forceAttribute===!0||ge>=e.markup.forceAttribute?e.liquid.indentAttribute===!0?(d(n-1,"liquid_attribute_start")&&(C[n-1]=re+Q),C.push(re+Q)):C.push(re):C.push(-10);}re<1&&(re=1),U=0;do U=U+1;while(K(n+U,"attribute")>-1&&(d(n+U,"end")===!1||d(n+U,"singleton")===!1||d(n+U,"start")===!1||d(n+U,"comment")===!1));(o==="force-preserve"||o==="force-align"||o==="force-indent")&&(Ye(e.markup.forceAttribute)&&e.markup.forceAttribute===!1||st(e.markup.forceAttribute)&&U<=e.markup.forceAttribute)&&(U=1/0);do{if(l=l+r.token[n].length+1,r.types[n].indexOf("attribute")>0)d(n,"comment_attribute")?C.push(re):K(n,"start")>0&&K(n,"liquid")<0?(G=!0,n<m-2&&r.types[n+2].indexOf("attribute")>0?(C.push(-20),n=n+1,j[n]=n):(B===n-1&&ue===!1?t?C.push(-20):C.push(re):t?C.push(-20):C.push(re+1),r.lexer[n+1]!=="markup"&&(n=n+1,q()))):e.liquid.indentAttribute===!0?d(n,"liquid_attribute_start")?(Q>0?C.push(re+Q):C.push(re),Q=Q+1):d(n,"liquid_attribute_else")?C[n-1]=re+Q-1:d(n,"liquid_attribute_end")?(Q=Q-1,C[n-1]=re+Q):Le(U):K(n,"end")>0&&d(n,"liquid_attribute_end")===!1?(C[n-1]!==-20&&(C[n-1]=C[r.begin[n]]-1),r.lexer[n+1]!=="markup"?C.push(-20):C.push(re)):K(n,"liquid_attribute")>-1?(le=le+r.token[n].length+1,e.markup.preserveAttribute===!0?C.push(-10):e.markup.forceAttribute===!0||e.markup.forceAttribute>=1||G===!0||n<m-1&&K(n+1,"attribute")>-1?Le(U):C.push(-10)):C.push(re);else if(d(n,"attribute"))le=le+r.token[n].length+1,e.markup.preserveAttribute===!0?C.push(-10):e.markup.forceAttribute===!0||e.markup.forceAttribute>=1||G===!0||n<m-1&&K(n+1,"attribute")>-1?Le(U):C.push(-10);else if(r.begin[n]<B+1)break;n=n+1;}while(n<m);if(n=n-1,K(n,"liquid")<0&&K(n,"end")>-1&&K(n,"attribute")>0&&d(B,"singleton")===!1&&C[n-1]>0&&ue===!0&&(C[n-1]=C[n-1]-1),C[n]!==-20&&(t===!0&&K(B,"start")>-1&&d(n+1,"script_start")?C[n]=re:P(n,"/")&&C[n-1]!==10?C[n-1]=-10:C[n]=C[B]),e.markup.forceAttribute===!0)l=0,C[B]=re,U>=2&&e.markup.delimiterTerminus==="force"&&h.set(B,U);else if(e.markup.forceAttribute>=1)if(U>=e.markup.forceAttribute){C[B]=re;let ge=n-1;do(d(ge,"liquid")&&C[ge]===-10||d(ge,"attribute")&&C[ge]===-10)&&(C[ge]=re),ge=ge-1;while(ge>B);(e.markup.delimiterTerminus==="force"&&U>=2||e.markup.delimiterTerminus==="adapt"&&U===1/0)&&h.set(B,U);}else C[B]=-10;else C[B]=-10;if(e.markup.preserveAttribute===!0||P(B,"<%xml%>")||P(B,"<?xml?>")){l=0;return}if(_=n,_>B+1){if(e.markup.selfCloseSpace===!1&&(le=le-1),le>e.wrap&&e.wrap>0&&e.markup.forceAttribute===!1){C[B]=re,l=r.token[n].length,_=_-1;do r.token[_].length>e.wrap&&oe(r.token[_])&&M(_),(K(_,"liquid")>-1&&C[_]===-10||d(_,"attribute")&&C[_]===-10)&&(C[_]=re),_=_-1;while(_>B)}}else e.wrap>0&&d(n,"attribute")&&r.token[n].length>e.wrap&&oe(r.token[n])&&M(n);}function ne(){do r.lexer[n]==="markup"?(d(n,"doctype")&&(C[n-1]=O),K(n,"attribute")>-1?D():d(n,"comment")?(f<0&&(f=n),R()):d(n,"comment")===!1&&(x=z(),(d(x,"end")||d(x,"liquid_end"))&&(O>-1&&(O=O-1),d(x,"liquid_end")&&d(n,"liquid_else")&&O>-1&&(O=O-1),(P(n,"</ol>")||P(n,"</ul>")||P(n,"</dl>"))&&ie()),d(n,"script_end")&&d(x,"end")?r.lines[x]<1?C.push(-20):r.lines[x]>1?C.push(O):C.push(-10):(e.markup.forceIndent===!1||e.markup.forceIndent===!0&&d(x,"script_start"))&&(d(n,"content")||d(n,"singleton")||d(n,"liquid"))?(l=l+r.token[n].length,r.lines[x]>0&&d(x,"script_start")?C.push(-10):e.wrap>0&&d(n,"singleton")===!1&&(K(n,"liquid")<0||x<m&&K(n,"liquid")>-1&&K(x,"liquid")<0)?g():x<m&&(K(x,"end")>-1||K(x,"start")>-1)&&(r.lines[x]>0||K(n,"liquid_")>-1)?C.push(O):r.lines[x]===0?C.push(-20):r.lines[x]===1?C.push(-10):C.push(O)):d(n,"start")||d(n,"liquid_start")?(O=O+1,d(x,"liquid_when")&&e.liquid.dedentTagList.includes("case")===!1&&(O=O+1),t===!0&&P(n+1,"{")?r.lines[x]===0?C.push(-20):r.lines[x]>1?C.push(O):C.push(-10):d(n,"start")&&d(x,"end")||d(n,"liquid_start")&&d(x,"liquid_end")?r.stack[n]==="liquid"||K(x-1,"comment")>-1?C.push(O):C.push(-20):d(n,"start")&&d(x,"script_start")?C.push(-10):e.markup.forceIndent===!0?C.push(O):r.lines[x]===0&&(d(x,"content")||d(x,"singleton")||d(n,"start")&&d(x,"liquid"))?C.push(-20):C.push(O)):e.markup.forceIndent===!1&&r.lines[x]===0&&(d(x,"content")||d(x,"singleton"))||d(n+2,"script_end")?C.push(-20):d(n,"liquid_else")||d(n,"liquid_when")?(C[n-1]=O-1,d(x,"liquid_end")&&(C[n-1]=O-1),C.push(O)):e.markup.forceIndent===!0&&(d(n,"content")&&(d(x,"liquid")||d(x,"content"))||d(n,"liquid")&&(d(x,"content")||d(x,"liquid")))?r.lines[x]<1?C.push(-20):r.lines[x]>1?C.push(O):C.push(-10):d(n,"liquid_start_bad")?(O=O+1,C.push(O)):d(x,"liquid_end_bad")?(O=O-1,C.push(O)):P(n,"{% endcase %}")&&e.liquid.dedentTagList.includes("case")===!1?(C[n-1]--,O=O-1):C.push(O)),d(n,"content")===!1&&d(n,"singleton")===!1&&d(n,"liquid")===!1&&d(n,"attribute")===!1&&(l=0)):(l=0,q()),n=n+1;while(n<m);return C}function ke(){let B=r.token[n].split(X),_=B.length,ue=0,G=X;n-1>0||B[0].length===2||B[0].length,G+=Z(I[n-1],!1)+"  ";do{if(ue===0)if(ue+1===_-1&&(B[ue+1].length===2||B[ue+1].length===3)){G.length>1&&(G=G.slice(0,-2)),p.push(B[ue],G,B[ue+1]);break}else p.push(B[ue],G);else ue===_-1?p.push(B[ue]):(ue+1===_-1&&(B[ue+1].length===2||B[ue+1].length===3)&&(G=G.slice(0,-2)),p.push(B[ue],G));ue=ue+1;}while(ue<_)}function we(){n=s.start;let B=e.indentLevel;do{if(r.lexer[n]==="markup")(d(n,"start")||d(n,"singleton")||d(n,"xml"))&&n<m-1&&K(n,"attribute")<0&&De(r.types[n+1])===!1&&K(n+1,"attribute")>-1&&A(),De(r.token[n])===!1&&r.token[n].indexOf(s.crlf)>0&&(d(n,"content")&&e.markup.preserveText===!1||d(n,"comment")||d(n,"attribute"))?a():d(n,"comment")&&(i(r.token[n][1],37)&&e.liquid.preserveComment===!1&&e.liquid.commentNewline===!0||i(r.token[n][1],37)===!1&&e.markup.preserveComment===!1&&e.markup.commentNewline===!0)&&(e.preserveLine===0||p.length>0&&p[p.length-1].lastIndexOf(X)+1<2)?p.push(Z(I[n]),r.token[n],Z(I[n])):K(n,"_preserve")>-1?p.push(r.token[n]):d(n+1,"ignore")&&d(n+2,"ignore")?(p.push(r.token[n],Z(I[n]).replace(pi,c),r.token[n+1],Xe(r.lines[n+2]-1===0?1:r.lines[n+2]-1,X)),n=n+1):(B=I[n],e.markup.delimiterTerminus==="force"&&F(),/\n/.test(r.token[n])&&K(n,"liquid")>-1&&!d(n,"liquid_end")?ke():p.push(r.token[n]),I[n]===-10&&n<m-1?p.push(te):I[n]>-1&&K(n+1,"_preserve")<0&&p.push(Z(I[n])));else {s.start=n,s.ender=j[n],B>0&&e.liquid.dedentTagList.includes(r.stack[n])&&(p.splice(p.length-1,1,Z(I[n]-1)),B=B-1);let _=s.external(B);e.language==="jsx"&&(r.types[n-1]==="template_string_end"||r.types[n-1]==="jsx_attribute_start"||r.types[n-1]==="script_start")?p.push(_):(p.push(_),(e.markup.forceIndent||I[s.iterator]>-1&&n in j&&j[n]>n)&&(n=s.iterator,p.push(Z(I[n])))),n!==s.iterator&&(n=s.iterator);}n=n+1;}while(n<m);return s.iterator=m-1,(p[0]===s.crlf||i(p[0],32))&&(p[0]=c),e.endNewline===!0?p.join(c).replace(/\s*$/,s.crlf):p.join(c).trimEnd()}return we()}function Bi(){let {data:e,rules:o}=s,n=s.language==="json"?o.json:o.script,x=0,l={},O="script",r=s.ender<1||s.ender>e.token.length?e.token.length:s.ender+1,m=(()=>{let t=s.start,h=o.indentLevel,C=!1,I=!1,u=c,p=c,d=e.types[0],P=e.token[0],K=[-1],Z=[],a=s.start>0?Array(s.start).fill(0,0,s.start):[],L=[],z=[[]],A=[],F=[],ie=[],R=[!1],g=[],q=[];function M(){D(!1,!1);let H=n.commentIndent===!0?h:0;if(C===!1&&/\/\u002a\s*global\s/.test(e.token[t])){let J=e.token[t].replace(/\/\u002a\s*global\s+/,c).replace(/\s*\u002a\/$/,c).split(","),y=J.length;do y=y-1,J[y]=J[y].replace(/\s+/g,c),J[y]!==c&&s.stack.push([J[y],-1]);while(y>0)}if(e.types[t-1]==="comment"||e.types[t+1]==="comment")a[t-1]=H;else if(e.lines[t]<2){let J=t+1;if(e.types[J]==="comment")do J=J+1;while(J<r&&e.types[J]==="comment");if(t<r-1&&e.stack[J]!=="block"&&(i(e.token[J],123)||e.token[J]==="x{")){let y=s.stack.length;if(e.begin.splice(t,0,e.begin[J]),e.ender.splice(t,0,e.ender[J]),e.lexer.splice(t,0,e.lexer[J]),e.lines.splice(t,0,e.lines[J]),e.stack.splice(t,0,e.stack[J]),e.token.splice(t,0,e.token[J]),e.types.splice(t,0,e.types[J]),y>0)do if(y=y-1,s.stack[y][1]===J)s.stack[y][1]=t;else if(s.stack[y][1]<t)break;while(y>0);J=J+1,e.begin.splice(J,1),e.ender.splice(J,1),e.lexer.splice(J,1),e.lines.splice(J,1),e.stack.splice(J,1),e.token.splice(J,1),e.types.splice(J,1),y=t+1;do e.begin[y]=t,e.stack[y]=e.stack[J],y=y+1;while(y<J);y=y+1;do{if(e.begin[y]===e.begin[J]&&(e.begin[y]=t,e.types[y]==="end"))break;y=y+1;}while(y<r-1);e.begin[J]=t,t=t-1;}else a[t-1]=-10,e.stack[t]==="paren"||e.stack[t]==="method"?a.push(h+2):a.push(h),n.commentIndent===!0&&a[t]>-1&&e.lines[t]<3&&(e.lines[t]=3);e.types[t+1]!=="comment"&&(C=!0);return}else i(e.token[t-1],44)?a[t-1]=H:i(P,61)&&e.types[t-1]!=="comment"&&/^\/\*{2}\s*@[A-Za-z_]+/.test(p)===!0?a[t-1]=-10:i(P,123)&&e.types[t-1]!=="comment"&&e.lines[0]<2?e.stack[t]==="function"?a[t-1]=H:a[t-1]=/\n/.test(p)?H:-10:a[t-1]=H;e.types[t+1]!=="comment"&&(C=!0),i(e.token[e.begin[t]],40)?a.push(h+1):a.push(h),a[t]>-1&&e.lines[t]<3&&(e.types[t-1]==="comment"&&p.startsWith("//")?e.lines[t]=2:e.lines[t]=3),n.commentNewline===!0&&p.startsWith("//")===!1&&e.lines[t]>=3&&(e.lines[t]=2);}function D(H,J){let y=t-1,Y=H===!0?0:1,k=z[z.length-1]===void 0?[]:z[z.length-1],b=J===!1&&e.stack[t]==="array"&&H===!0&&E(p,91);if(!(F[F.length-1]===!1||e.stack[t]==="array"&&n.arrayFormat==="inline"||e.stack[t]==="object"&&n.objectIndent==="inline")){F[F.length-1]=!1;do{if(e.types[y]==="end"?Y=Y+1:e.types[y]==="start"&&(Y=Y-1),e.stack[y]==="global")break;if(Y===0){if(e.stack[t]==="class"||e.stack[t]==="map"||b===!1&&(H===!1&&e.token[y]!=="("&&e.token[y]!=="x("||H===!0&&i(e.token[y],44)))e.types[y+1]==="liquid_start"?e.lines[y]<1?a[y]=-20:a[y]=h-1:k.length>0&&k[k.length-1]>-1?a[y]=h-1:a[y]=h;else if(e.stack[t]==="array"&&e.types[t]==="operator"&&(i(e.token[y],44)&&(a[y]=h),y===e.begin[t]))break;if(H===!1)break}if(Y<0){e.types[y+1]==="liquid_start"||e.types[y+1]==="template_string_start"?e.lines[y]<1?a[y]=-20:a[y]=h-1:k.length>0&&k[k.length-1]>-1?a[y]=h-1:a[y]=h;break}y=y-1;}while(y>-1)}}function ne(){let H=De(z[z.length-1])?[]:z[z.length-1];function J(){let y=t,Y=!1,k=e.begin[y];do{if(y=y-1,e.lexer[y]==="markup"){Y=!0;break}e.begin[y]!==k&&(y=e.begin[y]);}while(y>k);if(Y===!0){y=t;do y=y-1,e.begin[y]!==k?y=e.begin[y]:i(e.token[y],44)&&(a[y]=h+1);while(y>k);a[k]=h+1,a[t-1]=h;}else a[t-1]=-20;}if(i(p,41)&&i(e.token[t+1],46)&&E(e.token[H[0]],58)&&H[H.length-1]>-1){let y=e.begin[t],Y=!1,k=!1;do y=y-1;while(y>0&&a[y]<-9);Y=a[y]===h,y=t+1;do{if(y=y+1,i(e.token[y],123)){k=!0;break}if(e.begin[y]===e.begin[t+1]&&(e.types[y]==="separator"||e.types[y]==="end"))break}while(y<r);Y===!1&&k===!0&&z.length>1&&(z[z.length-2].push(e.begin[t]),h=h+1);}if(d!=="separator"&&B(),i(e.token[t+1],58)&&(e.stack[t]==="object"||e.stack[t]==="array")&&D(!0,!1),i(e.token[e.begin[t]-1],44)&&(i(e.token[t+1],125)||i(e.token[t+1],93))&&(e.stack[t]==="object"||e.stack[t]==="array")&&D(!0,!1),e.stack[t]!=="attribute"&&(E(p,41)&&p!=="x)"&&(e.lexer[t-1]!=="markup"||e.lexer[t-1]==="markup"&&e.token[t-2]!=="return")&&(h=h-1),i(p,125)&&e.stack[t]==="switch"&&n.noCaseIndent===!1&&(h=h-1)),i(p,125)||p==="x}"){if(e.types[t-1]!=="comment"&&P!=="{"&&P!=="x{"&&d!=="end"&&d!=="string"&&d!=="number"&&d!=="separator"&&P!=="++"&&P!=="--"&&(t<2||e.token[t-2]!==";"||e.token[t-2]!=="x;"||P==="break"||P==="return")){let y=t-1,Y=!1,k=e.begin[t],b=Z.length;do{if(e.begin[y]===k){if((i(e.token[y],61)||i(e.token[y],59)||e.token[y]==="x;")&&(Y=!0),i(e.token[y],46)&&a[y-1]>-1){F[F.length-1]=!1,a[k]=h+1,a[t-1]=h;break}if(y>0&&e.token[y]==="return"&&(e.token[y-1]===")"||e.token[y-1]==="x)"||e.token[y-1]==="{"||e.token[y-1]==="x{"||e.token[y-1]==="}"||e.token[y-1]==="x}"||e.token[y-1]===";"||e.token[y-1]==="x;")){h=h-1,a[t-1]=h;break}if(i(e.token[y],58)&&L.length===0||i(e.token[y],44)&&Y===!1)break;if(y===0||e.token[y-1]==="{"||e.token[y-1]==="x{"||e.token[y]==="for"||e.token[y]==="if"||e.token[y]==="do"||e.token[y]==="function"||e.token[y]==="while"||e.token[y]==="var"||e.token[y]==="let"||e.token[y]==="const"||e.token[y]==="with"){Z[b-1]===!1&&b>1&&(t===r-1||e.token[t+1]!==")"&&e.token[t+1]!=="x)")&&e.stack[t]!=="object"&&(h=h-1);break}}else y=e.begin[y];y=y-1;}while(y>k)}K.pop();}if(n.bracePadding===!1&&p!=="}"&&d!=="markup"&&d!=="liquid"&&(a[t-1]=-20),n.bracePadding===!0&&d!=="start"&&P!==";"&&(a[e.begin[t]]<-9||F[F.length-1]===!0))a[e.begin[t]]=-10,a[t-1]=-10,a.push(-20);else if(e.stack[t]==="attribute")a[t-1]=-20,a.push(h);else if(e.stack[t]==="array"&&(H.length>0||A[A.length-1]===!0))ke(),F[F.length-1]=!1,a[e.begin[t]]=h+1,a[t-1]=h,a.push(-20);else if(H.length>0&&(e.stack[t]==="object"||e.begin[t]===0&&i(p,125)))ke(),F[F.length-1]=!1,a[e.begin[t]]=h+1,a[t-1]=h,a.push(-20);else if(p===")"||p==="x)"){let y=p===")"&&E(P,40)&&q.length>0?q.pop()+1:0,Y=e.token[e.begin[t]-1]==="if"?(()=>{let k=t;do if(k=k-1,e.token[k]===")"&&a[k-1]>-1)return y;while(k>e.begin[t]);return y+5})():y;if(y>0&&(s.language!=="jsx"||s.language==="jsx"&&e.token[e.begin[t]-1]!=="render")){let k=o.wrap,b=e.begin[t],v=q.length,S=t-2;if(Y>k){a[e.begin[t]]=h+1,a[t-1]=h;do e.begin[S]===b?e.token[S]==="&&"||e.token[S]==="||"?a[S]=h+1:a[S]>-1&&e.types[S]!=="comment"&&e.token[S+1]!=="."&&(a[S]=a[S]+1):a[S]>-1&&e.token[S+1]!=="."&&(a[S]=a[S]+1),S=S-1;while(S>b)}else v>0&&(q[v-1]=q[v-1]+y);}else if(p===")"&&t>e.begin[t]+2&&e.lexer[e.begin[t]+1]===O&&e.token[e.begin[t]+1]!=="function"){let k=e.begin[t]<0?0:e.begin[t],b=o.wrap,v=H.length,S=0,N=0,pe=0,w=0,$=0,W=!1,T=!1,V=h+1,fe=!1,ae=!1,de=!1;if(a[k]<-9){N=k;do N=N+1;while(N<t&&a[N]<-9);w=N;do S=S+e.token[N].length,a[N]===-10&&(S=S+1),e.token[N]==="("&&pe>0&&pe<b-1&&w===t&&(pe=-1),e.token[N]===")"?$=$-1:e.token[N]==="("&&($=$+1),N===k&&$>0&&(pe=S),N=N-1;while(N>k&&a[N]<-9);if(e.token[N+1]==="."&&(V=a[N]+1),S>b-1&&b>0&&E(P,40)&&pe!==-1&&F[F.length-2]===!1&&(e.token[k-1]==="if"&&Z[Z.length-1]===!0||e.token[k-1]!=="if")&&(a[k]=V,e.token[k-1]==="for")){N=k;do N=N+1,i(e.token[N],59)&&e.begin[N]===k&&(a[N]=V);while(N<t)}}N=t,S=0;do N=N-1,e.stack[N]==="function"?N=e.begin[N]:e.begin[N]===k?(i(e.token[N],63)?de=!0:i(e.token[N],44)&&W===!1?(W=!0,S>=b&&b>0&&(fe=!0)):e.types[N]==="markup"&&ae===!1&&(ae=!0),a[N]>-9&&E(e.token[N],44)&&e.types[N]!=="markup"?S=0:(a[N]===-10&&(S=S+1),S=S+e.token[N].length,S>=b&&b>0&&(W===!0||ae===!0)&&(fe=!0))):a[N]>-9?S=0:(S=S+e.token[N].length,S>=b&&b>0&&(W===!0||ae===!0)&&(fe=!0));while(N>k&&fe===!1);if(W===!1&&i(e.token[e.begin[t]+1],96))a[e.begin[t]]=-20,a[t-1]=-20;else if((W===!0||ae===!0)&&S>=b&&b>0||a[k]>-9){if(de===!0){if(V=a[k],i(e.token[k-1],91)){N=t;do if(N=N+1,e.types[N]==="end"||i(e.token[N],44)||i(e.token[N],59))break;while(N<r);i(e.token[N],93)&&(V=V-1,T=!0);}}else v>0&&H[v-1]>N&&(V=V-v);F[F.length-1]=!1,N=t;do if(N=N-1,e.begin[N]===k)if(e.token[N].indexOf("=")>-1&&e.types[N]==="operator"&&e.token[N].indexOf("!")<0&&e.token[N].indexOf("==")<0&&e.token[N]!=="<="&&e.token[N].indexOf(">")<0){S=N;do if(S=S-1,e.begin[S]===k&&(e.token[S]===";"||e.token[S]===","||S===k))break;while(S>k)}else i(e.token[N],44)?a[N]=V:a[N]>-9&&T===!1&&(e.token[k-1]!=="for"||e.token[N+1]==="?"||e.token[N+1]===":")&&(e.token[e.begin[t]]!=="("||e.token[N]!=="+")&&(a[N]=a[N]+1);else a[N]>-9&&T===!1&&(a[N]=a[N]+1);while(N>k);a[k]=V,a[t-1]=V-1;}else a[t-1]=-20;e.token[e.begin[t]-1]==="+"&&a[e.begin[t]]>-9&&(a[e.begin[t]-1]=-10);}else s.language==="jsx"||s.language==="tsx"?J():a[t-1]=-20;a.push(-20);}else if(F[F.length-1]===!0)i(p,93)&&e.begin[t]-1>0&&e.token[e.begin[e.begin[t]-1]]==="["&&(F[F.length-2]=!1),e.begin[t]<a.length&&(a[e.begin[t]]=-20),s.language==="jsx"||s.language==="tsx"?J():i(p,93)&&a[e.begin[t]]>-1?a[t-1]=a[e.begin[t]]-1:a[t-1]=-20,a.push(-20);else if(e.types[t-1]==="comment"&&e.token[t-1].substring(0,2)==="//")e.token[t-2]==="x}"&&(a[t-3]=h+1),a[t-1]=h,a.push(-20);else if(d.indexOf("liquid")<0&&e.types[t-1]!=="comment"&&(i(P,123)&&i(p,125)||i(P,91)&&i(p,93)))a[t-1]=-20,a.push(-20);else if(i(p,93)){if(Z[Z.length-1]===!0&&F[F.length-1]===!1&&n.arrayFormat!=="inline"||i(P,93)&&a[t-2]===h+1?(a[t-1]=h,a[e.begin[t]]=h+1):a[t-1]===-10&&(a[t-1]=-20),e.token[e.begin[t]+1]==="function")a[t-1]=h;else if(Z[Z.length-1]===!1){(i(P,125)||P==="x}")&&(a[t-1]=h);let y=t-1,Y=1;do{if(i(e.token[y],93)&&(Y=Y+1),i(e.token[y],91)&&(Y=Y-1,Y===0)){if(y>0&&(i(e.token[y+1],123)||i(e.token[y+1],91)||e.token[y+1]==="x{")){a[y]=h+1;break}if(E(e.token[y+1],91)||I===!1){a[y]=-20;break}break}Y===1&&e.token[y]==="+"&&a[y]>1&&(a[y]=a[y]-1),y=y-1;}while(y>-1)}else (s.language==="jsx"||s.language==="tsx")&&J();if(n.arrayFormat==="inline"){let y=t,Y=e.begin[t];do if(y=y-1,e.types[y]==="end")break;while(y>Y);y>Y?(a[e.begin[t]]=h+1,a[t-1]=h):(a[e.begin[t]]=-20,a[t-1]=-20);}else a[e.begin[t]]>-1&&(a[t-1]=a[e.begin[t]]-1);a.push(-20);}else i(p,125)||p==="x}"||Z[Z.length-1]===!0?(i(p,125)&&P==="x}"&&e.token[t+1]==="else"?(a[t-2]=h+2,a.push(-20)):a.push(h),a[t-1]=h):a.push(-20);e.types[t-1]==="comment"&&(a[t-1]=h),ke(),I=Z[Z.length-1],Z.pop(),z.pop(),A.pop(),ie.pop(),g.pop(),F.pop(),R.pop();}function ke(){let H=0,J=z[z.length-1];if(J!==void 0){if(H=J.length-1,H<1&&J[H]<0&&(i(p,59)||p==="x;"||i(p,41)||p==="x)"||i(p,125)||p==="x}")){J.pop();return}if(!(H<0||J[H]<0)){if(i(p,58)){if(E(e.token[J[H]],63))do J.pop(),H=H-1,h=h-1;while(H>-1&&J[H]>-1&&E(e.token[J[H]],63));J[H]=t,a[t-1]=h;}else do J.pop(),H=H-1,h=h-1;while(H>-1&&J[H]>-1);(e.stack[t]==="array"||i(p,44))&&J.length<1&&J.push(-1);}}}function we(){let H=t;do{if(e.lexer[t+1]===O&&e.begin[t+1]<H||e.token[H-1]==="return"&&e.types[t]==="end"&&e.begin[t]===H)break;a.push(0),t=t+1;}while(t<r);l[H]=t,a.push(h-1);}function B(){let H=t-1,J=e.begin[t];if(!(h<1))do{if(J!==e.begin[H])H=e.begin[H];else if(e.types[H]==="separator"||e.types[H]==="operator"){e.token[H]==="."&&a[H-1]>0&&(e.token[J-1]==="if"?h=h-2:h=h-1);break}H=H-1;}while(H>0&&H>J)}function _(){(e.token[t+1]!==","&&p.indexOf("/>")!==p.length-2||e.token[t+1]===","&&e.token[e.begin[t]-3]!=="React")&&D(!1,!1),P==="return"||P==="?"||P===":"?(a[t-1]=-10,a.push(-20)):d==="start"||e.token[t-2]==="return"&&e.stack[t-1]==="method"?a.push(h):a.push(-20);}function ue(){let H=De(z[z.length-1])?[]:z[z.length-1];function J(){let y=e.token[t+1],Y=0,k=0,b=t,v=p==="+"?h+2:h,S=0;if(o.wrap<1){a.push(-10);return}do{if(b=b-1,i(e.token[e.begin[t]],40)&&(b===e.begin[t]&&(S=Y),i(e.token[b],44)&&e.begin[b]===e.begin[t]&&Z[Z.length-1]===!0)||Y>o.wrap-1||a[b]>-9||e.types[b]==="operator"&&e.token[b]!=="="&&e.token[b]!=="+"&&e.begin[b]===e.begin[t]||(Y=Y+e.token[b].length,b===e.begin[t]&&e.token[b]==="["&&Y<o.wrap-1)||e.token[b]==="."&&a[b]>-9)break;a[b]===-10&&(Y=Y+1);}while(b>0);if(S>0&&(S=S+y.length),Y=Y+y.length,k=b,Y>o.wrap-1&&a[b]<-9)do k=k-1;while(k>0&&a[k]<-9);if(e.token[k+1]==="."&&e.begin[t]<=e.begin[k]?v=v+1:e.types[k]==="operator"&&(v=a[k]),k=y.length,Y+k<o.wrap){a.push(-10);return}if(i(e.token[e.begin[t]],40)&&(e.token[H[0]]===":"||e.token[H[0]]==="?")?v=h+3:e.stack[t]==="method"?(a[e.begin[t]]=h,Z[Z.length-1]===!0?v=h+3:v=h+1):(e.stack[t]==="object"||e.stack[t]==="array")&&D(!0,!1),(e.token[b]==="var"||e.token[b]==="let"||e.token[b]==="const")&&(Y=Y-o.indentSize*o.indentChar.length*2),S>0?b=o.wrap-S:b=o.wrap-Y,b>0&&b<5){a.push(v),(e.token[t].charAt(0)==='"'||e.token[t].charAt(0)==="'")&&(t=t+1,a.push(-10));return}if(e.token[e.begin[t]]!=="("||S>o.wrap-1||S===0){if(S>0&&(Y=S),Y-y.length<o.wrap-1&&(y.charAt(0)==='"'||y.charAt(0)==="'")){if(t=t+1,Y=Y+3,Y-y.length>o.wrap-4){a.push(v);return}a.push(-10);return}a.push(v);return}a.push(-10);}if(B(),H.length>0&&H[H.length-1]>-1&&e.stack[t]==="array"&&(A[A.length-1]=!0),p!==":"&&(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&F.length>0&&D(!0,!1),p!=="?"&&e.token[H[H.length-1]]===".")){let y=0,Y=t,k=e.begin[Y];do{if(e.begin[Y]===k){if(e.token[Y+1]==="{"||e.token[Y+1]==="["||e.token[Y]==="function")break;if(i(e.token[Y],44)||i(e.token[Y],59)||e.types[Y]==="end"||i(e.token[Y],58)){H.pop(),h=h-1;break}if(e.token[Y]==="?"||i(e.token[Y],58)){e.token[H[H.length-1]]==="."&&y<2&&(H[H.length-1]=k+1);break}e.token[Y]==="."&&(y=y+1);}Y=Y+1;}while(Y<r)}if(p==="!"||p==="..."){(i(P,125)||P==="x}")&&(a[t-1]=h),a.push(-20);return}if(P===";"||P==="x;"){e.token[e.begin[t]-1]!=="for"&&(a[t-1]=h),a.push(-20);return}if(p==="*"){P==="function"||P==="yield"?a[t-1]=-20:a[t-1]=-10,a.push(-10);return}if(p==="?"){if(e.lines[t]===0&&e.types[t-2]==="word"&&e.token[t-2]!=="return"&&e.token[t-2]!=="in"&&e.token[t-2]!=="instanceof"&&e.token[t-2]!=="typeof"&&(d==="reference"||d==="word")&&(e.types[t+1]==="word"||e.types[t+1]==="reference"||(i(e.token[t+1],40)||e.token[t+1]==="x(")&&e.token[t-2]==="new")){if(a[t-1]=-20,e.types[t+1]==="word"||e.types[t+1]==="reference"){a.push(-10);return}a.push(-20);return}if(e.token[t+1]===":"){a[t-1]=-20,a.push(-20);return}if(L.push(t),n.ternaryLine===!0)a[t-1]=-10;else {let y=t-1;do y=y-1;while(y>-1&&a[y]<-9);if(H.push(t),h=h+1,a[y]===h&&e.token[y+1]!==":"&&(h=h+1,H.push(t)),a[t-1]=h,i(e.token[e.begin[t]],40)&&(H.length<2||H[0]===H[1])){F[F.length-1]=!1,t-2===e.begin[t]?a[e.begin[t]]=h-1:a[e.begin[t]]=h,y=t-2;do{if(e.types[y]==="end"&&a[y-1]>-1)break;a[y]>-1&&(a[y]=a[y]+1),y=y-1;}while(y>e.begin[t])}}a.push(-10);return}if(p===":"){if(e.stack[t]==="map"||e.types[t+1]==="type"||e.types[t+1]==="type_start"){a[t-1]=-20,a.push(-10);return}if(L.length>0&&e.begin[L[L.length-1]]===e.begin[t]){let y=t,Y=e.begin[t];do if(y=y-1,e.begin[y]===Y){if(i(e.token[y],44)||i(e.token[y],59)){a[t-1]=-20;break}if(e.token[y]==="?"){L.pop(),ke(),n.ternaryLine===!0&&(a[t-1]=-10),a.push(-10);return}}else e.types[y]==="end"&&(y=e.begin[y]);while(y>Y)}if(e.token[t-2]==="where"&&e.stack[t-2]===e.stack[t]){a[t-1]=-10,a.push(-10);return}if(d==="reference"&&e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("){a[t-1]=-20,a.push(-10);return}if((i(P,41)||P==="x)")&&e.token[e.begin[t-1]-2]==="function"){a[t-1]=-20,a.push(-10);return}if(e.stack[t]==="attribute"){a[t-1]=-20,a.push(-10);return}if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&(d==="reference"||i(P,41)||i(P,93)||P==="?")&&(e.stack[t]==="map"||e.stack[t]==="class"||e.types[t+1]==="reference")&&(L.length===0||L[L.length-1]<e.begin[t])&&("mapclassexpressionmethodglobalparen".indexOf(e.stack[t])>-1||e.types[t-2]==="word"&&e.stack[t]!=="switch")){a[t-1]=-20,a.push(-10);return}if(e.stack[t]==="switch"&&(L.length<1||L[L.length-1]<e.begin[t])){a[t-1]=-20,n.caseSpace===!0?a.push(-10):a.push(h);return}e.stack[t]==="object"?a[t-1]=-20:L.length>0?a[t-1]=h:a[t-1]=-10,a.push(-10);return}if(p==="++"||p==="--"){d==="number"||d==="reference"?(a[t-1]=-20,a.push(-10)):t<r-1&&(e.types[t+1]==="number"||e.types[t+1]==="reference")?a.push(-20):a.push(-10);return}if(p==="+"){if(d==="start"?a[t-1]=-20:a[t-1]=-10,o.wrap<1||e.token[e.begin[t]]==="x("){a.push(-10);return}let y=e.token[t+1];if(y===void 0){a.push(-10);return}if(e.types[t-1]==="operator"||e.types[t-1]==="start"){if(e.types[t+1]==="reference"||y==="("||y==="["){a.push(-20);return}if(Number(y.slice(1,-1))>-1&&(/\d/.test(y.charAt(1))===!0||y.charAt(1)==="."||y.charAt(1)==="-"||y.charAt(1)==="+")){a.push(-20);return}}return J()}if(e.types[t-1]!=="comment"&&(i(P,40)?a[t-1]=-20:p==="*"&&e.stack[t]==="object"&&e.types[t+1]==="reference"&&(i(P,123)||i(P,44))?a[t-1]=h:(p!=="?"||L.length===0)&&(a[t-1]=-10)),p.indexOf("=")>-1&&p!=="=="&&p!=="==="&&p!=="!="&&p!=="!=="&&p!==">="&&p!=="<="&&p!=="=>"&&e.stack[t]!=="method"&&e.stack[t]!=="object"){let y=t+1,Y=0,k=!1,b=c;if((i(e.token[e.begin[t]],40)||e.token[e.begin[t]]==="x(")&&e.token[t+1]!=="function")return;do{if(e.types[y]==="start"){if(k===!0&&e.token[y]!=="["){R[R.length-1]===!0&&(R[R.length-1]=!1);break}Y=Y+1;}if(e.types[y]==="end"&&(Y=Y-1),Y<0){R[R.length-1]===!0&&(R[R.length-1]=!1);break}if(Y===0){if(b=e.token[y],k===!0){if(e.types[y]==="operator"||i(e.token[y],59)||e.token[y]==="x;"||e.token[y]==="?"||e.token[y]==="var"||e.token[y]==="let"||e.token[y]==="const"){b!==void 0&&(b==="?"||b.indexOf("=")>-1&&b!=="=="&&b!=="==="&&b!=="!="&&b!=="!=="&&b!==">="&&b!=="<=")&&R[R.length-1]===!1&&(R[R.length-1]=!0),(b===";"||b==="x;"||b==="var"||b==="let"||b==="const")&&R[R.length-1]===!0&&(R[R.length-1]=!1);break}R[R.length-1]===!0&&(b==="return"||b==="break"||b==="continue"||b==="throw")&&(R[R.length-1]=!1);}(b===";"||b==="x;"||b===",")&&(k=!0);}y=y+1;}while(y<r);a.push(-10);return}if(p==="-"&&P==="return"||i(P,61)){a.push(-20);return}if(d==="operator"&&e.types[t+1]==="reference"&&P!=="--"&&P!=="++"&&p!=="&&"&&p!=="||"){a.push(-20);return}return J()}function G(){let H=()=>{let J=e.begin[t];if(J<0)s.stack.push([e.token[t],-1]);else {if(e.stack[J+1]!=="function")do J=e.begin[J];while(J>-1&&e.stack[J+1]!=="function");s.stack.push([e.token[t],J]);}};if(e.types[t-1]==="comment"?a[t-1]=h:d==="end"&&P!==")"&&e.token[e.begin[t-1]-1]!==")"?a[t-1]=-10:d!=="separator"&&d!=="start"&&d!=="end"&&d.indexOf("template_string")<0&&(d==="word"||d==="operator"||d==="property"||d==="type"||d==="reference"?a[t-1]=-10:a[t-1]=-20),P==="var"&&e.lexer[t-1]===O)H();else if(P==="function")s.stack.push([e.token[t],t]);else if(P==="let"||P==="const")s.stack.push([e.token[t],t]);else if(e.stack[t]==="arguments")s.stack.push([e.token[t],t]);else if(i(P,44)){let J=t;do J=J-1;while(J>e.begin[t]&&e.token[J]!=="var"&&e.token[J]!=="let"&&e.token[J]!=="const");e.token[J]==="var"?H():(e.token[J]==="let"||e.token[J]==="const")&&s.stack.push([e.token[t],t]);}a.push(-10);}function U(){let H=De(z[z.length-1])?[]:z[z.length-1],J=()=>{if(n.methodChain>0){let y=t,Y=e.begin[t],k=[t],b=e.token[Y-1]==="if";do if(y=y-1,e.types[y]==="end"&&(y=e.begin[y]),e.begin[y]===Y){if(e.types[y]==="string"&&e.token[y].indexOf("${")===e.token[y].length-2)break;if(e.token[y]==="."){if(a[y-1]>0){a[t-1]=b===!0?h+1:h;return}k.push(y);}else if(e.token[y]===";"||e.token[y]===","||e.types[y]==="operator"||(e.types[y]==="word"||e.types[y]==="reference")&&(e.types[y-1]==="word"||e.types[y-1]==="reference"))break}while(y>Y);if(k.length<n.methodChain){a[t-1]=-20;return}y=0,Y=k.length;do a[k[y]-1]=b===!0?h+1:h,y=y+1;while(y<Y);y=k[k.length-1]-1;do a[y]>-1&&(a[y]=a[y]+1),y=y+1;while(y<t);h=b===!0?h+2:h+1;}a[t-1]=h;};if(p==="::"){a[t-1]=-20,a.push(-20);return}if(p==="."){e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&H.length>0&&(e.stack[t]==="object"||e.stack[t]==="array"?D(!0,!1):D(!1,!1)),n.methodChain===0?a[t-1]=-20:n.methodChain<0?e.lines[t]>0?J():a[t-1]=-20:J(),a.push(-20);return}if(p===","){if(B(),Z[Z.length-1]===!1&&(e.stack[t]==="object"||e.stack[t]==="array"||e.stack[t]==="paren"||e.stack[t]==="expression"||e.stack[t]==="method")&&(Z[Z.length-1]=!0,i(e.token[e.begin[t]],40))){let y=t;do y=y-1,e.begin[y]===e.begin[t]&&e.token[y]==="+"&&a[y]>-9&&(a[y]=a[y]+2);while(y>e.begin[t])}if(e.stack[t]==="array"&&n.arrayFormat==="indent"){a[t-1]=-20,a.push(h);return}if(e.stack[t]==="array"&&n.arrayFormat==="inline"){a[t-1]=-20,a.push(-10);return}if(e.stack[t]==="object"&&n.objectIndent==="indent"){a[t-1]=-20,a.push(h);return}if(e.stack[t]==="object"&&n.objectIndent==="inline"){a[t-1]=-20,a.push(-10);return}if(H.length>0){H[H.length-1]>-1&&ke(),a[t-1]=-20,a.push(h);return}if(e.token[t-2]===":"&&e.token[t-4]==="where"){a[t-1]=-20,a.push(-10);return}if(a[t-1]=-20,e.types[t+1]!=="end"&&(ie[ie.length-1]=ie[ie.length-1]+1),(i(e.token[e.begin[t]],40)||e.token[e.begin[t]]==="x(")&&s.language!=="jsx"&&e.stack[t]!=="global"&&(e.types[t-1]!=="string"&&e.types[t-1]!=="number"||e.token[t-2]!=="+"||e.types[t-1]==="string"&&e.types[t-1]!=="number"&&i(e.token[t-2],43)&&e.types[t-3]!=="string"&&e.types[t-3]!=="number")){a.push(-10);return}if(d==="reference"&&e.types[t-2]==="word"&&"var-let-const-from".indexOf(e.token[t-2])<0&&(e.types[t-3]==="end"||e.token[t-3]===";")){g[g.length-1]=!0,a.push(-10);return}if(g[g.length-1]===!0||e.stack[t]==="notation"){a.push(-10);return}if(ie[ie.length-1]>3&&(e.stack[t]==="array"||e.stack[t]==="object")){if(F[F.length-1]===!0&&D(!0,!0),a[t-1]=-20,A[A.length-1]===!0){a.push(h);return}let y=e.begin[t],Y=t;do e.types[Y]==="end"?Y=e.begin[Y]:i(e.token[Y],44)&&e.types[Y+1]!=="comment"&&(a[Y]=h),Y=Y-1;while(Y>y);a[y]=h,A[A.length-1]=!0;return}if(e.stack[t]==="object"&&F[F.length-1]===!0&&e.types[e.begin[t]-1]!=="word"&&e.types[e.begin[t]-1]!=="reference"&&e.token[e.begin[t]-1]!=="("&&e.token[e.begin[t]-1]!=="x("){let y=e.begin[t],Y=t-1;do{if(e.begin[Y]===y){if(i(e.token[Y],44))break;if(i(e.token[Y],58)){D(!0,!1);break}}Y=Y-1;}while(Y>y)}if(F[F.length-1]===!1||i(e.token[t-2],43)&&(d==="string"||d==="number")&&a[t-2]>0&&(i(P,34)||i(P,39))){if(e.stack[t]==="method"){if(i(e.token[t-2],43)&&(i(P,34)||i(P,39))&&(e.token[t-3].charAt(0)==='"'||e.token[t-3].charAt(0)==="'")){a.push(h+2);return}if(e.token[t-2]!=="+"){a.push(-10);return}}a.push(h);return}if(F[F.length-1]===!0&&e.stack[t]!=="object"){a.push(-10);return}if(ie[ie.length-1]<4&&(e.stack[t]==="array"||e.stack[t]==="object")){a.push(-10);return}a.push(h);return}if(i(p,59)||p==="x;"){if(B(),e.token[t+1]!==void 0&&e.types[t+1].indexOf("attribute")>0&&e.types[t+1].indexOf("end")>0){a[t-1]=-20,a.push(h-1);return}if(K[K.length-1]>-1&&e.stack[K[K.length-1]]!=="expression"){let y=t;do{if(y=y-1,i(e.token[y],59))break;if(i(e.token[y],44)){h=h-1;break}e.types[y]==="end"&&(y=e.begin[y]);}while(y>0&&y>e.begin[t])}if(K[K.length-1]=-1,ke(),e.token[e.begin[t]-1]!=="for"&&D(!1,!1),g[g.length-1]=!1,a[t-1]=-20,e.begin[t]>0&&e.token[e.begin[t]-1]==="for"&&e.stack[t]!=="for"){a.push(-10);return}a.push(h);return}a.push(-20);}function le(){let H=e.stack[t+1],J=t===0?e.stack[t]:e.stack[t-1];if((i(P,41)||E(P,93)&&(J==="object"||J==="array"))&&(H!=="method"||H==="method"&&E(e.token[t+1],41)&&E(e.token[t+2],41))&&(i(P,41)&&(H!=="function"||i(e.token[e.begin[e.begin[t-1]-1]],40)||e.token[e.begin[e.begin[t-1]-1]]==="x(")?D(!1,!1):e.types[t+1]!=="end"&&e.types[t+2]!=="end"&&D(!0,!1)),Z.push(!1),z.push([]),R.push(!1),A.push(!1),g.push(!1),ie.push(0),n.neverFlatten===!0||H==="attribute"||d==="generic"||n.arrayFormat==="indent"&&H==="array"||H==="class"&&E(P,40)&&P!=="x("||i(p,91)&&e.token[t+1]==="function"?F.push(!1):H==="expression"||H==="method"||(H==="object"||H==="class")&&(i(P,40)||P==="x("||d==="word"||d==="reference")||H==="array"||i(p,40)||p==="x("||i(p,123)&&H==="object"&&d!=="operator"&&d!=="start"&&d!=="string"&&d!=="number"&&J!=="object"&&J!=="array"&&t>0?F.push(!0):F.push(!1),E(p,40)&&p!=="x("&&e.stack[t+1]!=="attribute"&&(h=h+1),i(p,123)||p==="x{"){if(K.push(-1),e.types[t-1]!=="comment"&&(d==="markup"?a[t-1]=h:n.braceAllman===!0&&d!=="operator"&&P!=="return"?a[t-1]=h-1:e.stack[t+1]!=="block"&&(H==="function"||i(P,41)||P==="x)"||i(P,44)||i(P,125)||d==="markup")?a[t-1]=-10:(i(P,123)||P==="x{"||i(P,91)||i(P,125)||P==="x}")&&(a[t-1]=h-1)),H==="object"){if(n.objectIndent==="indent"){F[F.length-1]=!1,a.push(h);return}if(n.objectIndent==="inline"){F[F.length-1]=!0,a.push(-20);return}}if(H==="switch"){if(n.noCaseIndent===!0){a.push(h-1);return}h=h+1,a.push(h);return}if(F[F.length-1]===!0&&d!=="word"&&d!=="reference"){a.push(-20);return}a.push(h);return}if(i(p,40)||p==="x("){if(o.wrap>0&&i(p,40)&&e.token[t+1]!==")"&&q.push(1),i(P,45)&&(i(e.token[t-2],40)||e.token[t-2]==="x(")&&(a[t-2]=-20),d==="end"&&J!=="if"&&J!=="for"&&J!=="catch"&&J!=="else"&&J!=="do"&&J!=="try"&&J!=="finally"&&J!=="catch"&&(e.types[t-1]==="comment"?a[t-1]=h:a[t-1]=-20),P==="async"?a[t-1]=-10:(H==="method"||e.token[t-2]==="function"&&d==="reference")&&(P==="import"||P==="in"||n.functionNameSpace===!0?a[t-1]=-10:i(P,125)&&e.stack[t-1]==="function"||d==="word"||d==="reference"||d==="property"?a[t-1]=-20:J!=="method"&&H!=="method"&&(a[t-1]=h)),i(P,43)&&(i(e.token[t-2],34)||i(e.token[t-2],39))){a.push(h);return}if(i(P,125)||P==="x}"){a.push(-20);return}(i(P,45)&&(t<2||E(e.token[t-2],41)&&E(e.token[t-2],93)&&e.token[t-2]!=="x)"&&e.types[t-2]!=="reference"&&e.types[t-2]!=="string"&&e.types[t-2]!=="number")||n.functionSpace===!1&&P==="function")&&(a[t-1]=-20),a.push(-20);return}if(i(p,91)){if(i(P,91)&&(Z[Z.length-2]=!0),P==="return"||P==="var"||P==="let"||P==="const"?a[t-1]=-10:e.types[t-1]!=="comment"&&e.stack[t-1]!=="attribute"&&(d==="end"||d==="word"||d==="reference")?a[t-1]=-20:(i(P,91)||i(P,123)||P==="x{")&&(a[t-1]=h-1),e.stack[t]==="attribute"){a.push(-20);return}if(n.arrayFormat==="indent"){F[F.length-1]=!1,a.push(h);return}if(n.arrayFormat==="inline"){F[F.length-1]=!0,a.push(-20);return}if(H==="method"||F[F.length-1]===!0){a.push(-20);return}let y=t+1;do{if(i(e.token[y],93)){a.push(-20);return}if(i(e.token[y],44)){a.push(h);return}y=y+1;}while(y<r);a.push(-20);}}function Q(){p.length===1?(a.push(-20),e.lines[t]===0&&(a[t-1]=-20)):p.indexOf("#!/")===0?a.push(h):d!=="liquid"&&e.types[t+1]!=="liquid"&&a.push(-10),(i(P,44)||d==="start")&&(e.stack[t]==="object"||e.stack[t]==="array")&&F[F.length-1]===!1&&t>0&&(a[t-1]=h);}function re(){u==="liquid_else"?d==="string"?(e.lines[t-1]<=1&&(a[t-1]=-20),e.lines[t]>0?(h=h-1,a.push(h)):a.push(-20)):(a[t-1]=h-1,a.push(h)):u==="liquid_start"?d==="string"?(e.lines[t-1]<=1&&(a[t-1]=-20),e.lines[t]>0?(h=h+1,a.push(h)):a.push(-20)):(h=h+1,e.lines[t-1]<1&&(a[t-1]=-20),e.lines[t]>0?a.push(h):a.push(-20)):u==="liquid_end"?d==="string"?(e.lines[t-1]<=1&&(a[t-1]=-20),e.lines[t]>1&&(a[t-1]=h-1,a.push(h))):(h=h-1,d==="liquid_start"||e.lines[t-1]<1?a[t-1]=-20:a[t-1]=h,e.lines[t]>0?a.push(h):a.push(-20)):u==="liquid"&&(i(P,58)&&a[t-2]===-10&&(a[t-2]=-20),e.lines[t]>0?a.push(h):a.push(-20));}function Le(){u==="template_string_start"?(h=h+1,a.push(h)):u==="template_string_else"?(B(),a[t-1]=h-1,a.push(h)):(B(),h=h-1,a[t-1]=h,a.push(-10)),t>2&&(e.types[t-2]==="template_string_else"||e.types[t-2]==="template_string_start")&&(n.bracePadding===!0?(a[t-2]=-10,a[t-1]=-10):(a[t-2]=-20,a[t-1]=-20));}function ge(){i(e.token[t-1],44)||i(e.token[t-1],58)&&e.stack[t-1]!=="data_type"?a[t-1]=-10:a[t-1]=-20,(e.types[t]==="type"||e.types[t]==="type_end")&&a.push(-10),e.types[t]==="type_start"&&a.push(-20);}function _e(){if((i(P,41)||P==="x)")&&e.stack[t]==="class"&&(e.token[e.begin[t-1]-1]==="static"||e.token[e.begin[t-1]-1]==="final"||e.token[e.begin[t-1]-1]==="void")&&(a[t-1]=-10,a[e.begin[t-1]-1]=-10),i(P,93)&&(a[t-1]=-10),p==="else"&&i(P,125)&&(e.token[t-2]==="x}"&&(a[t-3]=a[t-3]-1),(n.braceAllman===!0||n.elseNewline===!0)&&(a[t-1]=h)),p==="new"&&ye.js.keywords.has(e.token[t+1])&&(x=x+1),p==="from"&&d==="end"&&t>0&&(e.token[e.begin[t-1]-1]==="import"||i(e.token[e.begin[t-1]-1],44))&&(a[t-1]=-10),p==="function"){if(n.functionSpace===!1&&t<r-1&&(i(e.token[t+1],40)||e.token[t+1]==="x(")){a.push(-20);return}a.push(-10);return}if(i(P,45)&&t>1)e.types[t-2]==="operator"||i(e.token[t-2],44)?a[t-1]=-20:e.types[t-2]==="start"&&(a[t-2]=-20,a[t-1]=-20);else if(p==="while"&&(i(P,125)||P==="x}")){let H=t-1,J=0;do{if((i(e.token[H],125)||e.token[H]==="x}")&&(J=J+1),(i(e.token[H],123)||e.token[H]==="x{")&&(J=J-1),J===0){if(e.token[H-1]==="do"){a[t-1]=-10;break}a[t-1]=h;break}H=H-1;}while(H>-1)}else if(p==="in"||(i(P,125)||P==="x}")&&(p==="catch"||p==="else"&&n.elseNewline===!1&&n.braceAllman===!1))a[t-1]=-10;else if(p==="var"||p==="let"||p==="const"){if(K[K.length-1]=t,d==="end"&&(a[t-1]=h),e.token[e.begin[t]-1]!=="for"){let H=t+1,J=0;do{if(e.types[H]==="end"&&(J=J-1),e.types[H]==="start"&&(J=J+1),J<0||J===0&&(i(e.token[H],59)||i(e.token[H],44)))break;H=H+1;}while(H<r);i(e.token[H],44)&&(h=h+1);}a.push(-10);return}if(d!=="word"&&e.stack[t]==="switch"&&(p==="default"||p==="case")){a[t-1]=h-1,a.push(-10);return}if(p==="catch"&&P==="."){a[t-1]=-20,a.push(-20);return}if(p==="catch"||p==="finally"){a[t-1]=-10,a.push(-10);return}if(n.bracePadding===!1&&t<r-1&&i(e.token[t+1],125)){a.push(-20);return}if(e.stack[t]==="object"&&(i(P,123)||i(P,44))&&(i(e.token[t+1],40)||e.token[t+1]==="x(")){a.push(-20);return}e.types[t-1]==="comment"&&i(e.token[e.begin[t]],40)&&(a[t-1]=h+1),o.script.inlineReturn===!0&&p==="return"&&d==="start"&&e.stack[t]==="if"&&P==="x{"?(a[t-1]=-20,a.push(-20),console.log(P,d,p,u,a[t],h)):a.push(-10);}do e.lexer[t]===O?(u=e.types[t],p=e.token[t],u==="comment"?M():u==="regex"?a.push(-20):u==="string"?Q():u.indexOf("template_string")===0?Le():u==="separator"?U():u==="start"?le():u==="end"?ne():u==="type"||u==="type_start"||u==="type_end"?ge():u==="operator"?ue():u==="word"?_e():u==="reference"?G():u==="markup"?_():u.indexOf("liquid")===0?re():u==="generic"?(E(P,35)&&P!=="return"&&d!=="operator"&&P!=="public"&&P!=="private"&&P!=="static"&&P!=="final"&&P!=="implements"&&P!=="class"&&P!=="void"&&(a[t-1]=-20),i(e.token[t+1],40)||e.token[t+1]==="x("?a.push(-20):a.push(-10)):a.push(-10),u!=="comment"&&(d=u,P=p),q.length>0&&E(e.token[t],41)&&(e.types[t]==="comment"&&q[q.length-1]>-1?q[q.length-1]=o.wrap+1:a[t]>-1||i(e.token[t],96)&&e.token[t].indexOf(X)>0?q[q.length-1]=-1:q[q.length-1]>-1&&(q[q.length-1]=q[q.length-1]+e.token[t].length,a[t]===-10&&(q[q.length-1]=q[q.length-1]+1)))):we(),t=t+1;while(t<r);return a})();return (()=>{let t=[],h=o.indentChar.repeat(o.indentSize),C=o.preserveLine+1,I=["x;","x}","x{","x(","x)"],u=s.start,p=o.indentLevel;function d(K){let Z=(()=>u===r-1?1:e.lines[u+1]-1>C?C:e.lines[u+1]>1?e.lines[u+1]-1:1)();return s.crlf.repeat(Z)+h.repeat(K)}if(n.vertical===!0){let K=function(Z){let a=0,L=0,z=Z-1,A=0,F=0,ie=e.begin[u],R=[];do{if((e.begin[z]===ie||i(e.token[z],93)||i(e.token[z],41))&&(i(e.token[z+1],61)||i(e.token[z+1],59)&&e.stack[z]==="object")){A=z,L=0;do{if(e.begin[A]===ie){if(i(e.token[A],58)||i(e.token[A],59)||e.token[A]==="x;"||m[A]>-1&&e.types[A]!=="comment"){i(e.token[A+1],46)&&(L=L+o.indentSize*o.indentChar.length);break}}else if(m[A]>-1)break;e.types[A]!=="comment"&&(m[A-1]===-10&&(L=L+1),L=e.token[A].length+L),A=A-1;}while(A>ie);if(F=A,i(e.token[F],44)&&i(e.token[z+1],61))do{if(e.types[F]==="end"&&(F=e.begin[F]),e.begin[F]===ie){if(i(e.token[F],59)||e.token[F]==="x;")break;if(e.token[F]==="var"||e.token[F]==="const"||e.token[F]==="let"){L=L+o.indentSize*o.indentChar.length;break}}F=F-1;}while(F>ie);L>a&&(a=L),R.push([z,L]),z=A;}else e.types[z]==="end"&&(z=e.begin[z]);z=z-1;}while(z>ie);if(z=R.length,z>0)do if(z=z-1,A=R[z][1],A<a)do e.token[R[z][0]]=e.token[R[z][0]]+te,A=A+1;while(A<a);while(z>0)};u=r;do u=u-1,e.lexer[u]==="script"&&i(e.token[u],125)&&E(e.token[u-1],123)&&m[e.begin[u]]>0?K(u):u=e.begin[u];while(u>0)}u=s.start;do{if(e.lexer[u]===O){if(e.types[u]==="comment"&&n.commentIndent===!0&&/\n/.test(e.token[u])){let K=e.begin[u]>-1?i(e.token[u][2],42)?Xe(m[u],h)+o.indentChar:Xe(m[u],h):o.indentChar,Z=e.token[u].split(/\n/),a=1;do Z[a]=K+Z[a].trimStart(),a=a+1;while(a<Z.length);e.token.splice(u,1,Z.join(X));}I.indexOf(e.token[u])<0&&(E(e.token[u],59)||n.noSemicolon===!1?t.push(e.token[u]):m[u]<0&&e.types[u+1]!=="comment"&&t.push(";")),u<r-1&&e.lexer[u+1]!==O&&e.begin[u]===e.begin[u+1]&&e.types[u+1].indexOf("end")<0&&E(e.token[u],44)?t.push(te):m[u]>-1?((m[u]>-1&&i(e.token[u],123)||m[u]>-1&&i(e.token[u+1],125))&&e.lines[u]<3&&n.braceNewline===!0&&e.lines[u+1]<3&&t.push(d(0)),s.mode===2?s.ender!==u&&t.push(d(m[u])):u!==r-1&&t.push(d(m[u])),p=m[u]):m[u]===-10&&(t.push(te),e.lexer[u+1]!==O&&(p=p+1));}else if(l[u]===u)t.push(e.token[u]);else {s.ender=l[u],s.start=u;let K=s.external(p);t.push(K),u=s.iterator,m[u]===-10?t.push(te):m[u]>-1&&t.push(d(m[u]));}u=u+1;}while(u<r);return s.iterator=r-1,t.join(c)})()}function Ni(){let e=[],{data:o,rules:n,crlf:f}=s,x=s.ender>0?s.ender+1:o.token.length,l=n.preserveLine+1,O=n.indentChar.repeat(n.indentSize),r=n.indentLevel,m=s.start,j=[c,c];function t(C,I){return o.types[C]===I}function h(C){let I=[],u=(()=>m===x-1?1:o.lines[m+1]-1>l?l:o.lines[m+1]>1?o.lines[m+1]-1:1)(),p=0;C<0&&(C=0);do I.push(f),p=p+1;while(p<u);if(C>0){p=0;do I.push(O),p=p+1;while(p<C)}e.push(I.join(c));}do(t(m+1,"end")||t(m+1,"liquid_end")||t(m+1,"liquid_else"))&&(r=r-1),t(m,"liquid")&&o.lines[m]>0?(e.push(o.token[m]),E(o.token[m+1],59)&&ye.css.units.has(o.token[m+1])===!1&&h(r)):t(m-1,"selector")&&t(m,"liquid")&&t(m+1,"selector")?(e.push(o.token[m]),$e(o.token[m-1],45)&&(i(o.token[m+1],46)||i(o.token[m+1],35)||i(o.token[m+1],38))&&e.push(te)):t(m,"liquid_else")?(e.push(o.token[m]),r=r+1,h(r)):t(m,"start")||t(m,"liquid_start")?(r=r+1,e.push(o.token[m]),t(m+1,"end")===!1&&t(m+1,"liquid_end")===!1&&h(r)):i(o.token[m],59)||t(m,"end")||t(m,"liquid_end")||t(m,"comment")?(e.push(o.token[m]),t(m+1,"value")?o.lines[m+1]===1?e.push(te):o.lines[m+1]>1&&h(r):t(m+1,"separator")===!1?t(m+1,"comment")===!1||t(m+1,"comment")&&o.lines[m+1]>1?h(r):e.push(te):t(m,"comment")&&t(m+1,"comment")===!1&&o.lines[m]>1&&h(r)):i(o.token[m],58)?(e.push(o.token[m]),t(m+1,"selector")===!1&&E(o.token[m+1],44)&&e.push(te)):t(m,"selector")||t(m,"at_rule")?(n.style.classPadding===!0&&t(m-1,"end")&&o.lines[m]<3&&h(r),o.token[m].indexOf("and(")>0?(o.token[m]=o.token[m].replace(/and\(/,"and ("),e.push(o.token[m])):o.token[m].indexOf("when(")>0?(j=o.token[m].split("when("),e.push(j[0].replace(/\s+$/,c)),h(r+1),e.push(`when (${j[1]}`)):e.push(o.token[m]),t(m+1,"start")&&e.push(te)):i(o.token[m],44)?(t(m+1,"value")&&h(r),e.push(o.token[m]),t(m+1,"selector")||t(m+1,"property")?h(r):e.push(te)):o.stack[m]==="map"&&i(o.token[m+1],41)&&m-o.begin[m]>5?(e.push(o.token[m]),h(r)):o.token[m]==="x;"?h(r):(t(m,"variable")||t(m,"function"))&&n.style.classPadding===!0&&t(m-1,"end")&&o.lines[m]<3?(e.push(f),e.push(o.token[m])):E(o.token[m],59)&&e.push(o.token[m]),m=m+1;while(m<x);return s.iterator=x-1,(e[0]===s.crlf||i(e[0],32))&&(e[0]=c),n.endNewline===!0?e.join(c).replace(/\s*$/,s.crlf):e.join(c).replace(/\s+$/,c)}function Xt(e){if(e===1)return Ai();if(e===3)return Ni();if(e===2)return Bi()}var jt={crlf:!1,correct:!1,preset:"default",language:"auto",endNewline:!1,indentChar:" ",indentLevel:0,indentSize:2,preserveLine:2,wrap:0,wrapFraction:0,liquid:{commentNewline:!1,commentIndent:!0,delimiterTrims:"preserve",delimiterPlacement:"preserve",forceFilter:0,forceArgument:0,ignoreTagList:[],indentAttribute:!1,lineBreakSeparator:"before",normalizeSpacing:!0,preserveComment:!1,preserveInternal:!1,dedentTagList:[],quoteConvert:"none"},markup:{attributeCasing:"preserve",attributeSort:!1,commentNewline:!1,commentIndent:!0,delimiterTerminus:"inline",forceAttribute:3,forceAttributeValue:!0,forceIndent:!1,ignoreCSS:!1,ignoreJS:!0,ignoreJSON:!1,lineBreakValue:"preserve",preserveComment:!1,preserveText:!1,preserveAttribute:!1,selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!1,quoteConvert:"none"},json:{arrayFormat:"default",braceAllman:!1,bracePadding:!1,objectIndent:"default",objectSort:!1,braceStyle:"none",caseSpace:!1,commentIndent:!1,commentNewline:!1,correct:!1,elseNewline:!1,functionNameSpace:!1,functionSpace:!1,methodChain:4,neverFlatten:!1,noCaseIndent:!1,preserveComment:!1,styleGuide:"none",ternaryLine:!1,variableList:"none",quoteConvert:"double",endComma:"never",noSemicolon:!0,vertical:!1},style:{commentIndent:!1,commentNewline:!1,atRuleSpace:!0,classPadding:!1,noLeadZero:!1,preserveComment:!1,sortSelectors:!1,sortProperties:!1,quoteConvert:"none"},script:{arrayFormat:"default",braceNewline:!1,bracePadding:!1,braceStyle:"none",braceAllman:!1,caseSpace:!1,commentIndent:!1,commentNewline:!1,elseNewline:!1,endComma:"never",functionNameSpace:!1,functionSpace:!1,inlineReturn:!0,methodChain:4,neverFlatten:!1,noCaseIndent:!1,noSemicolon:!1,objectSort:!1,objectIndent:"default",preserveComment:!1,quoteConvert:"none",styleGuide:"none",ternaryLine:!1,variableList:"none",vertical:!1}};var Yt=class extends Array{get entry(){return this[this.length-1]}get token(){return this[this.length-1][0]}get index(){return this[this.length-1][1]}update(o,n){let f=this.length-1;return f>0?(n===void 0?typeof o=="string"?this[f][0]=o:this[f][1]=o:(this[f][0]=o,this[f][1]=n),this[f]):(this.push([o,n]),this[f+1])}pop(){let o=this.length-1,n=this[o];return o>0&&this.splice(o,1),n}},Ue=class{constructor(){this.hooks={parse:null,format:null};this.start=0;this.ender=0;this.iterator=0;this.attributes=new Map;this.regions=new Map;this.pairs=new Map;this.error=null;this.crlf=`
`;this.references=[[]];this.count=-1;this.lineColumn=0;this.lineNumber=1;this.lineDepth=2;this.lineOffset=0;this.lineIndex=0;this.rules=jt;this.data={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};}get source(){return this.mode===2?Ue.region:We.env==="node"&&Buffer.isBuffer(Ue.input)?Ue.input.toString():Ue.input}set source(o){Ue.input=We.env!=="node"||Buffer.isBuffer(o)?o:Buffer.from(o);}get current(){return {begin:this.data.begin[this.count],ender:this.data.ender[this.count],lexer:this.data.lexer[this.count],lines:this.data.lines[this.count],stack:this.data.stack[this.count],token:this.data.token[this.count],types:this.data.types[this.count]}}reset(){this.error=null,this.count=-1,this.start=0,this.ender=0,this.lineColumn=0,this.lineNumber=1,this.lineDepth=2,this.lineIndex=0,this.lineOffset=0,this.data.begin=[],this.data.ender=[],this.data.lexer=[],this.data.lines=[],this.data.stack=[],this.data.token=[],this.data.types=[],this.references=[[]],this.stack=new Yt(["global",-1]),this.mode=1,this.pairs.size>0&&this.pairs.clear(),this.attributes.size>0&&this.attributes.clear(),this.regions.size>0&&this.regions.clear();}get(o){return {begin:this.data.begin[o],ender:this.data.ender[o],lexer:this.data.lexer[o],lines:this.data.lines[o],stack:this.data.stack[o],token:this.data.token[o],types:this.data.types[o]}}document(o,n=3){return this.reset(),Zt(o),n===1?this.data:(this.mode=3,Xt(o))}external(o,n){if(this.mode===1){this.mode=2;let f=pt(o);Ue.region=n,this.language=o,this.lexer=Ne(this.language),this.regions.set(this.count+1,{lexer:f,id:this.language}),Zt(f),this.mode=1,this.lexer=Ne(this.rules.language),this.language=this.rules.language;}else {if(this.regions.size===0)return this.source;let{id:f,lexer:x}=this.regions.get(this.start);this.mode=2,this.language=f,this.rules.indentLevel=o;let l=Xt(x);return this.mode=3,this.rules.indentLevel=0,this.language=this.rules.language,this.lexer=Ne(this.language),l}}final(o){let n=this.count,f=o.begin[n];if(!(o.lexer[n]==="style"&&this.rules.style.sortProperties||o.lexer[n]==="script"&&(this.rules.script.objectSort||this.rules.json.objectSort))){do o.begin[n]===f||o.begin[o.begin[n]]===f&&o.types[n].indexOf("attribute")>-1&&o.types[n].indexOf("attribute_end")<0?o.ender[n]=this.count:n=o.begin[n],n=n-1;while(n>f);n>-1&&(o.ender[n]=this.count);}}syntactic(o,n){if(o.types==="liquid_start"||o.types==="start")this.pairs.set(this.count,{index:this.count,line:this.lineNumber,token:o.token,type:o.types==="start"?2:3,stack:n});else if(this.pairs.has(this.stack.index)&&(o.types==="end"||o.types==="liquid_end")){let f=this.pairs.get(this.stack.index);f.type===3?o.token.indexOf(`end${f.stack}`)>-1?this.pairs.delete(this.stack.index):Ot(112,f):f.type===2&&`</${f.stack}>`===o.token&&this.pairs.delete(this.stack.index);}}push(o,n,f=c){if(o.begin.push(n.begin),o.ender.push(n.ender),o.lexer.push(n.lexer),o.stack.push(n.stack),o.token.push(n.token),o.types.push(n.types),o.lines.push(n.lines),o===this.data){if(this.count=this.count+1,n.lexer!=="style"&&f.replace(/[{}<>%]/g,c)===c&&(f=n.types==="else"?"else":Ie(n.token)),this.lineOffset=0,n.types==="start"||n.types.indexOf("_start")>0)this.stack.push([f,this.count]),this.lineDepth=this.lineDepth+this.rules.indentSize;else if(n.types==="end"||n.types.indexOf("_end")>0){let x=0,l=this.stack.length;l>2&&(o.types[this.stack[l-1][1]]==="else"||o.types[this.stack[l-1][1]].indexOf("_else")>0)&&(o.types[this.stack[l-2][1]]==="start"||o.types[this.stack[l-2][1]].indexOf("_start")>0)&&(o.types[this.stack[l-2][1]+1]==="else"||o.types[this.stack[l-2][1]+1].indexOf("_else")>0)&&(this.stack.pop(),o.begin[this.count]=this.stack.index,o.stack[this.count]=this.stack.token,o.ender[this.count-1]=this.count,x=o.ender[o.begin[this.count]+1]),this.final(o),x>0&&(o.ender[o.begin[this.count]+1]=x),this.stack.pop(),this.lineDepth=this.lineDepth-this.rules.indentSize;}else (n.types==="else"||n.types.indexOf("_else")>0)&&(f===c&&(f="else"),this.count>0&&(o.types[this.count-1]==="start"||o.types[this.count-1].indexOf("_start")>0)?this.stack.push([f,this.count]):(this.final(o),this.stack.update(f===c?"else":f,this.count)));this.hooks.parse!==null&&this.hooks.parse[0].call({line:this.lineNumber,stack:this.stack.entry,language:this.language},n,this.count);}}pop(o){return o===this.data&&(this.count=this.count-1),{begin:o.begin.pop(),ender:o.ender.pop(),lexer:o.lexer.pop(),lines:o.lines.pop(),stack:o.stack.pop(),token:o.token.pop(),types:o.types.pop()}}concat(o,n){o.begin=o.begin.concat(n.begin),o.ender=o.ender.concat(n.ender),o.lexer=o.lexer.concat(n.lexer),o.stack=o.stack.concat(n.stack),o.token=o.token.concat(n.token),o.types=o.types.concat(n.types),o.lines=o.lines.concat(n.lines),o===this.data&&(this.count=o.token.length-1);}splice(o){let n=this.data.begin[this.count],f=this.data.token[this.count];o.record!==void 0&&o.record.token!==c?(o.data.begin.splice(o.index,o.howmany,o.record.begin),o.data.ender.splice(o.index,o.howmany,o.record.ender),o.data.token.splice(o.index,o.howmany,o.record.token),o.data.lexer.splice(o.index,o.howmany,o.record.lexer),o.data.stack.splice(o.index,o.howmany,o.record.stack),o.data.types.splice(o.index,o.howmany,o.record.types),o.data.lines.splice(o.index,o.howmany,o.record.lines),o.data===this.data&&(this.count=this.count-o.howmany+1,(n!==this.data.begin[this.count]||f!==this.data.token[this.count])&&(this.lineOffset=0))):(o.data.begin.splice(o.index,o.howmany),o.data.ender.splice(o.index,o.howmany),o.data.token.splice(o.index,o.howmany),o.data.lexer.splice(o.index,o.howmany),o.data.stack.splice(o.index,o.howmany),o.data.types.splice(o.index,o.howmany),o.data.lines.splice(o.index,o.howmany),o.data===this.data&&(this.count=this.count-o.howmany,this.lineOffset=0));}is(o,n){return this.count>0?this.data[o][this.count]===n:!1}lines(o,n){return this.lineNumber=this.lineNumber+1,this.lineIndex=o,n+1}spacer(o){this.lineOffset=1;do{if(o.array[o.index]===X&&(this.lineOffset=this.lineOffset+1,this.lineNumber=this.lineNumber+1),oe(o.array[o.index+1])===!1)break;o.index=o.index+1;}while(o.index<o.end);return o.index}},yt=Ue;yt.input=c,yt.region=c;var s=new yt;function ji(e){let o=[],n=0,f=/(((var)|(let)|(const)|(function)|(import))\s+(\w|\$)+[a-zA-Z0-9]*)/.test(e)&&/@import/.test(e)===!1,x=/((((final)|(public)|(private))\s+static)|(static\s+void))/.test(e);function l(){return /\n\s*#+\s+/.test(e)||/^#+\s+/.test(e)?{language:"markdown",lexer:"markup"}:/\$[a-zA-Z]/.test(e)||/\{\s*(\w|\.|\$|#)+\s*\{/.test(e)||/^[.#]?[\w][\w-]+\s+\{(?:\s+[a-z][a-z-]+:\s*\S+;)+\s+[&>+]?\s+[.#:]?[\w][\w-]\s+\{/.test(e)&&/:\s*@[a-zA-Z];/.test(e)===!1?{language:"scss",lexer:"style"}:/@[a-zA-Z]:/.test(e)||/\.[a-zA-Z]\(\);/.test(e)?{language:"less",lexer:"style"}:{language:"css",lexer:"style"}}function O(){let m=1,j=c,t=!1,h=!1,C=/((public)|(private))\s+(static\s+)?(((v|V)oid)|(class)|(final))/.test(e);function I(){return e.indexOf("(")>-1||e.indexOf("=")>-1||e.indexOf(";")>-1&&e.indexOf("{")>-1?x===!0||/\w<\w+(,\s+\w+)*>/.test(e)||/(?:var|let|const)\s+\w+\s*:/.test(e)||/=\s*<\w+/.test(e)?{language:"typescript",lexer:"script"}:{language:"javascript",lexer:"script"}:{language:"unknown",lexer:"text"}}function u(){return /:\s*(?:number|string|boolean|any|unknown)(?:\[\])?/.test(e)||/(?:public|private)\s+/.test(e)||/(?:export|declare)\s+type\s+\w+\s*=/.test(e)||/(?:namespace|interface|enum|implements|declare)\s+\w+/.test(e)||/(?:typeof|keyof|as)\s+\w+/.test(e)||/\w+\s+as\s+\w+/.test(e)||/\[\w+(?:(?::\s*\w+)|(?:\s+in\s+\w+))\]:/.test(e)||/\):\s*\w+(?:\[\])?\s*(?:=>|\{)\s+/.test(e)||/(var|const|let)\s+\w+:\s*(string|number|boolean|string|any)(\[\])?/.test(e)?{language:"typescript",lexer:"script"}:/\s(class|var|const|let)\s+\w/.test(e)===!1&&/<[a-zA-Z](?:-[a-zA-Z])?/.test(e)&&/<\/[a-zA-Z-](?:-[a-zA-Z])?/.test(e)&&(/\s?\{%/.test(e)||/{{/.test(e))?{language:"liquid",lexer:"markup"}:/^(\s*[$@])/.test(e)===!1&&/([}\]];?\s*)$/.test(e)&&(/^\s*import\s+\*\s+as\s+\w+\s+from\s+['"]/.test(e)||/module\.export\s+=\s+/.test(e)||/export\s+default\s+\{/.test(e)||/[?:]\s*[{[]/.test(e)||/^(?:\s*return;?(?:\s+[{[])?)/.test(e))?{language:"javascript",lexer:"script"}:/{%/.test(e)&&/{{/.test(e)&&/<\w/.test(e)?{language:"liquid",lexer:"markup"}:/{\s*(?:\w|\.|@|#)+\s*\{/.test(e)?{language:"less",lexer:"style"}:/\$(\w|-)/.test(e)?{language:"scss",lexer:"style"}:/[;{:]\s*@\w/.test(e)===!0?{language:"less",lexer:"style"}:{language:"css",lexer:"style"}}if(m<n)do t===!1?i(o[m],42)&&i(o[m-1],47)?(o[m-1]=c,t=!0):h===!1&&m<n-6&&o[m].charCodeAt(0)===102&&o[m+1].charCodeAt(0)===105&&o[m+2].charCodeAt(0)===108&&o[m+3].charCodeAt(0)===116&&o[m+4].charCodeAt(0)===101&&o[m+5].charCodeAt(0)===114&&i(o[m+6],58)&&(h=!0):t===!0&&i(o[m],42)&&m!==n-1&&i(o[m+1],47)?(t=!1,o[m]=c,o[m+1]=c):h===!0&&i(o[m],59)&&(h=!1,o[m]=c),(t===!0||h===!0)&&(o[m]=c),m=m+1;while(m<n);return j=o.join(c),/\s\/\//.test(e)===!1&&/\/\/\s/.test(e)===!1&&/^(\s*(\{|\[)(?!%))/.test(e)===!0&&/((\]|\})\s*)$/.test(e)&&e.indexOf(",")!==-1?{language:"json",lexer:"script"}:/((\}?(\(\))?\)*;?\s*)|([a-z0-9]("|')?\)*);?(\s*\})*)$/i.test(e)===!0&&(f===!0||C===!0||/console\.log\(/.test(e)===!0||/export\s+default\s+class\s+/.test(e)===!0||/export\s+(const|var|let|class)s+/.test(e)===!0||/document\.get/.test(e)===!0||/((=|(\$\())\s*function)|(\s*function\s+(\w*\s+)?\()/.test(e)===!0||e.indexOf("{")===-1||/^(\s*if\s+\()/.test(e)===!0)?I():e.indexOf("{")>-1&&(/^(\s*[\u007b\u0024\u002e#@a-z0-9])/i.test(e)||/^(\s*\/(\*|\/))/.test(e)||/^(\s*\*\s*\{)/.test(e))&&/^(\s*if\s*\()/.test(e)===!1&&/=\s*(\{|\[|\()/.test(j)===!1&&(/(\+|-|=|\?)=/.test(j)===!1||/\/\/\s*=+/.test(j)||/=+('|")?\)/.test(e)&&/;\s*base64/.test(e))&&/function(\s+\w+)*\s*\(/.test(j)===!1?u():e.indexOf("{%")>-1?{language:"liquid",lexer:"markup"}:{language:"unknown",lexer:"text"}}function r(){function m(){return /{%-?\s*(schema|for|if|unless|render|include)/.test(e)||/{%-?\s*end\w+/.test(e)||/{{-?\s*content_for/.test(e)||/{{-?\s*[a-zA-Z0-9_'".[\]]+\s*-?}}/.test(e)||/{%/.test(e)&&/%}/.test(e)&&/{{/.test(e)&&/}}/.test(e)?{language:"liquid",lexer:"markup"}:{language:"html",lexer:"markup"}}return /^(\s*<!doctype\s+html>)/i.test(e)||/^(\s*<html)/i.test(e)||/<form\s/i.test(e)&&/<label\s/i.test(e)&&/<input\s/i.test(e)||/<img(\s+\w+=['"]?\S+['"]?)*\s+src\s*=/.test(e)||/<a(\s+\w+=['"]?\S+['"]?)*\s+href\s*=/.test(e)||/<ul\s/i.test(e)&&/<li\s/i.test(e)&&/<\/li>/i.test(e)&&/<\/ul>/i.test(e)||/<head\s*>/.test(e)&&/<\/head>/.test(e)||/^(\s*<!DOCTYPE\s+((html)|(HTML))\s+PUBLIC\s+)/.test(e)&&/XHTML\s+1\.1/.test(e)===!1&&/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(e)===!1?m():/\s?{[{%]-?/.test(e)?{language:"liquid",lexer:"markup"}:{language:"xml",lexer:"markup"}}return e===null||e.replace(/\s+/g,c)===c?{language:"unknown",lexer:"text"}:(/\n\s*#{1,6}\s+/.test(e)||/\n\s*(?:\*|-|(?:\d+\.))\s/.test(e))&&(/\[( |x|X)\]/.test(e)||/\s[*_~]{1,2}\w+[*_~]{1,2}/.test(e)||/\n\s*```[a-zA-Z]*?\s+/.test(e)||/-+\|(-+\|)+/.test(e))?{language:"markdown",lexer:"text"}:/^(\s*<!DOCTYPE\s+html>)/i.test(e)?r():/^\s*@(?:charset|import|include|keyframes|media|namespace|page)\b/.test(e)||x===!1&&/=(>|=|-|\+|\*)/.test(e)===!1&&/^(?:\s*((if)|(for)|(function))\s*\()/.test(e)===!1&&/(?:\s|;|\})((if)|(for)|(function\s*\w*))\s*\(/.test(e)===!1&&f===!1&&/return\s*\w*\s*(;|\})/.test(e)===!1&&(e===void 0||/^(?:\s*#(?!(!\/)))/.test(e)||/\n\s*(\.|@)\w+(\(|(\s*:))/.test(e)&&/>\s*<\w/.test(e)===!1||/^\s*:root\s*\{/.test(e)||/-{2}\w+\s*\{/.test(e)||/^\s*(?:body|button|hr|section|h[1-6]|p|strong|\*)\s+\{\s+/.test(e))?l():(o=e.replace(/\[[a-zA-Z][\w-]*=['"]?[a-zA-Z][\w-]*['"]?\]/g,c).split(c),n=o.length,/^(\s*({{|{%|<))/.test(e)?r():x===!0||/^(?:[\s\w-]*<)/.test(e)===!1&&/(?:>[\s\w-]*)$/.test(e)===!1?O():(/^(?:\s*<\?xml)/.test(e)||/(?:>[\w\s:]*)?<(?:\/|!|#)?[\w\s:\-[]+/.test(e)||/^\s*</.test(e)&&/<\/\w+(\w|\d)+>\s*$/.test(e))&&(/^(?:[\s\w]*<)/.test(e)||/(?:>[\s\w]*)$/.test(e))||/^(?:\s*<s((cript)|(tyle)))/i.test(e)&&/(?:<\/s((cript)|(tyle))>\s*)$/i.test(e)?/^(?:[\s\w]*<)/.test(e)===!1||/(?:>[\s\w]*)$/.test(e)===!1?O():r():{language:"unknown",lexer:"text"})}function Pt(e,o,n){if(e==="global")switch(o){case"indentChar":return zi(e,o,n);case"preset":case"language":return Fe(e,o,n);case"crlf":case"correct":case"endNewline":return ft(e,o,n);case"indentLevel":case"indentSize":case"preserveLine":case"wrap":case"wrapFraction":return Kt(e,o,n);default:return !1}else if(e==="liquid")switch(o){case"commentNewline":case"commentIndent":case"indentAttribute":case"normalizeSpacing":case"preserveComment":case"preserveInternal":return ft(e,o,n);case"forceArgument":case"forceFilter":return Kt(e,o,n);case"ignoreTagList":case"dedentTagList":return Pi(e,o,n);case"lineBreakSeparator":case"delimiterPlacement":case"delimiterTrims":case"quoteConvert":return Fe(e,o,n)}else if(e==="markup")switch(o){case"forceAttribute":if(st(n))return Kt(e,o,n);if(Ye(n))return ft(e,o,n);throw qe({message:`Invalid ${e} rule (${o}) type "${typeof n}" provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["boolean","number"]});case"attributeSort":if(Ye(n))return ft(e,o,n);if(Re(n))return Pi(e,o,n);throw qe({message:`Invalid ${e} rule (${o}) type "${typeof n}" provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["boolean","number"]});case"commentNewline":case"commentIndent":case"forceIndent":case"forceAttributeValue":case"ignoreCSS":case"ignoreJS":case"ignoreJSON":case"preserveComment":case"preserveText":case"preserveAttribute":case"selfCloseSpace":case"selfCloseSVG":case"stripAttributeLines":return ft(e,o,n);case"attributeCasing":case"delimiterTerminus":case"lineBreakValue":case"quoteConvert":return Fe(e,o,n)}else if(e==="style")switch(o){case"correct":case"atRuleSpace":case"classPadding":case"noLeadZero":case"sortSelectors":case"sortProperties":return Ye(n);case"quoteConvert":return Fe(e,o,n)}else if(e==="json")switch(o){case"arrayFormat":case"objectIndent":return Fe(e,o,n);case"allowComments":case"braceAllman":case"bracePadding":case"objectSort":return ft(e,o,n)}}function Pi(e,o,n){if(Re(n)){if(n.length===0)return !0;for(let f=0;f<n.length;f++)if(ht(n[f])===!1)throw qe({message:`Invalid ${e} rule (${o}) type "${typeof n}" provided`,option:`${e} \u2192 ${o} (index: ${f})`,provided:n,expected:["string"]});return !0}throw qe({message:`Invalid ${e} rule (${o}) type "${typeof n}" provided`,option:e==="global"?o:`${e} \u2192 ${o}`,provided:n,expected:["string[]"]})}function zi(e,o,n){if(typeof n=="string")return !0;throw qe({message:`Invalid ${e} rule (${o}) type "${typeof n}" provided`,option:e==="global"?o:`${e} \u2192 ${o}`,provided:n,expected:["string"]})}function Kt(e,o,n){if(st(n)&&isNaN(n)===!1)return !0;throw qe({message:`Invalid ${e} rule (${o}) type "${typeof n}" provided`,option:e==="global"?o:`${e} \u2192 ${o}`,provided:n,expected:["number"]})}function ft(e,o,n){if(st(n))return n!==0;if(Ye(n))return !0;throw qe({message:`Invalid ${e} rule (${o}) type "${typeof n}" provided`,option:e==="global"?o:`${e} \u2192 ${o}`,provided:n,expected:["boolean"]})}function Fe(e,o,n){if(ht(n)===!1)throw qe({message:`Invalid ${e} rule (${o}) type "${typeof n}" provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["string"]});if(o==="language"){switch(n){case"text":case"markup":case"html":case"liquid":case"xml":case"javascript":case"typescript":case"jsx":case"tsx":case"json":case"less":case"scss":case"sass":case"css":return !0}throw qe({message:`Unsupported "${o}" identifier provided`,option:e===`${o} (global)`?o:`${e} \u2192 ${o}`,provided:n,expected:["text","auto","markup","html","liquid","xml","javascript","typescript","jsx","tsx","json","less","scss","sass","css"]})}else if(o==="preset"){switch(n){case"default":case"strict":case"recommended":case"warrington":case"prettier":return !0}throw qe({message:`Unsupported "${o}" provided`,option:e===`${o} (global)`?o:`${e} \u2192 ${o}`,provided:n,expected:["default","strict","recommended","warrington","prettier"]})}else if(o==="attributeCasing")switch(n){case"preserve":case"lowercase":case"lowercase-name":case"lowercase-value":return !0;default:throw qe({message:`Invalid "${o}" option provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["preserve","lowercase","lowercase-name","lowercase-value"]})}else if(o==="delimiterTrims")switch(n){case"preserve":case"never":case"always":case"tags":case"outputs":case"multiline":case"linebreak":return !0;default:throw qe({message:`Invalid "${o}" option provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["preserve","never","always","tags","outputs","multiline","linebreak"]})}else if(o==="delimiterPlacement")switch(n){case"default":case"inline":case"preserve":case"consistent":case"force":case"force-multiline":return !0;default:throw qe({message:`Invalid "${o}" option provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["default","inline","preserve","consistent","force","force-multiline"]})}else if(o==="lineBreakSeparator")switch(n){case"preserve":case"before":case"after":return !0;default:throw qe({message:`Invalid "${o}" option provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["preserve","before","after"]})}else if(o==="delimiterTerminus")switch(n){case"force":case"inline":case"adapt":return !0;default:throw qe({message:`Invalid "${o}" option provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["force","inline","adapt"]})}else if(o==="lineBreakValue")switch(n){case"preserve":case"align":case"indent":case"force-preserve":case"force-align":case"force-indent":return !0;default:throw qe({message:`Invalid "${o}" option provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["preserve","align","indent","force-preserve","force-align","force-indent"]})}else if(o==="quoteConvert")switch(n){case"none":case"double":case"single":return !0;default:throw qe({message:`Invalid "${o}" option provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["none","double","single"]})}else if(o==="objectIndent"||o==="arrayFormat")switch(n){case"default":case"indent":case"inline":return !0;default:throw qe({message:`Invalid "${o}" option provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["default","indent","inline"]})}else if(o==="endComma")switch(n){case"none":case"always":case"never":return !0;default:throw qe({message:`Invalid "${o}" option provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["none","always","never"]})}else if(o==="variableList")switch(n){case"none":case"each":case"list":return !0;default:throw qe({message:`Invalid "${o}" option provided`,option:`${e} \u2192 ${o}`,provided:n,expected:["none","each","list"]})}}var Et={preset:"recommended",language:"auto",preserveLine:2,wrap:120,wrapFraction:90,liquid:{ignoreTagList:["javascript"],indentAttribute:!0,commentNewline:!0,delimiterTrims:"tags",lineBreakSeparator:"after",quoteConvert:"double",delimiterPlacement:"consistent"},markup:{attributeCasing:"lowercase-name",commentNewline:!0,delimiterTerminus:"adapt",forceAttribute:2,forceIndent:!0,ignoreCSS:!1,ignoreJSON:!1,lineBreakValue:"indent",selfCloseSpace:!0,selfCloseSVG:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent"},style:{commentNewline:!0,commentIndent:!0,quoteConvert:"double",noLeadZero:!0,sortProperties:!0}};var $t={preset:"strict",language:"auto",preserveLine:1,wrap:0,wrapFraction:80,liquid:{ignoreTagList:[],commentNewline:!0,delimiterTrims:"never",lineBreakSeparator:"before",quoteConvert:"double",forceArgument:3,forceFilter:4,delimiterPlacement:"consistent"},markup:{attributeSort:["id","class","type","name","value","href","src"],attributeCasing:"lowercase-name",commentNewline:!0,delimiterTerminus:"adapt",forceAttribute:1,forceIndent:!0,ignoreCSS:!1,ignoreJSON:!1,ignoreJS:!1,lineBreakValue:"force-indent",selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent",objectSort:!0},style:{commentNewline:!0,commentIndent:!0,quoteConvert:"double",noLeadZero:!0,sortProperties:!0,sortSelectors:!0}};var Wt={preset:"warrington",language:"auto",preserveLine:2,wrap:0,liquid:{ignoreTagList:["javascript"],indentAttribute:!0,lineBreakSeparator:"after",quoteConvert:"double"},markup:{commentNewline:!0,delimiterTerminus:"adapt",forceAttribute:1,forceIndent:!0,ignoreCSS:!0,ignoreJSON:!1,lineBreakValue:"indent",selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent"},style:{commentIndent:!1,quoteConvert:"double"}};var Tt={preset:"prettier",language:"auto",preserveLine:1,wrap:80,wrapFraction:60,liquid:{ignoreTagList:["javascript"],indentAttribute:!0,lineBreakSeparator:"after",dedentTagList:["schema"],quoteConvert:"double"},markup:{commentNewline:!0,delimiterTerminus:"force",forceAttribute:1,forceIndent:!0,ignoreJS:!0,ignoreCSS:!0,ignoreJSON:!1,lineBreakValue:"force-indent",selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent"},style:{commentIndent:!1,quoteConvert:"double"}};var xt=["correct","crlf","endNewline","indentChar","indentLevel","indentSize","preserveLine","wrap","wrapFraction"],wt=["liquid","markup","style","json","script"];function Gi(e){if(e.preset!==s.rules.preset&&Fe("global","preset",e.preset)){if(s.rules=Qe({},jt),s.rules.preset=e.preset,e.preset==="default")return;let o;switch(e.preset){case"strict":o=nt($t);for(let n of xt)o(n)&&(s.rules[n]=$t[n]);for(let n of wt)o(n)&&Qe(s.rules[n],$t[n]);break;case"recommended":o=nt(Et);for(let n of xt)o(n)&&(s.rules[n]=Et[n]);for(let n of wt)o(n)&&Qe(s.rules[n],Et[n]);break;case"warrington":o=nt(Wt);for(let n of xt)o(n)&&(s.rules[n]=Wt[n]);for(let n of wt)o(n)&&Qe(s.rules[n],Wt[n]);break;case"prettier":o=nt(Tt);for(let n of xt)o(n)&&(s.rules[n]=Tt[n]);for(let n of wt)o(n)&&Qe(s.rules[n],Tt[n]);break}}}function Ei(e,o){let n=nt(e),f;o.rules.length>0&&(f={}),"preset"in e&&Gi(e),n("language")&&Pt("global","language",e.language)&&s.language!==e.language&&(s.language=s.rules.language=e.language);for(let x of xt)n(x)!==!1&&s.rules[x]!==e[x]&&Pt("global",x,e[x])&&(f&&(f[x]={from:s.rules[x],to:e[x]}),x==="crlf"&&(s.crlf=e[x]?ti:X),x==="wrap"&&e[x]>0&&(n("wrapFraction")===!1||n("wrapFraction")&&e.wrapFraction<=0)&&(s.rules.wrapFraction=e[x]-e[x]/4),s.rules[x]=e[x]);for(let x of wt)if(n(x)!==!1&&s.rules[x]!==e[x]){f&&(f[x]={});for(let l in e[x])Pt(x,l,e[x][l])&&(f&&(f[x][l]={old:s.rules[x][l],now:e[x][l]}),s.rules[x][l]=e[x][l]);}if(o.rules.length>0)for(let x of o.rules)x(f,s.rules);return s.rules}var $i=new class{constructor(){this.language="auto";this.lexer="auto";this.stats=null;this.events={format:[],error:[],rules:[],parse:[]};We.env==="node"&&(We.cwd=process.cwd()),We.env==="browser"&&(window.esthetic=$i);}get table(){return s.data}get definitions(){return Gt}get detect(){return ji}grammar(o){return o?(ye.extend(o),this):ye.extend()}config(o){if(!o)return We;for(let n in o)n in We&&(We[n]=o[n]);return this}on(o,n){return this.events[o].push(n),this}hook(o,n){s.hooks[o]=[n];}format(o,n){if(s.source=o,dt(n)&&"language"in n&&this.language!==n.language&&Fe("global","language",n.language)&&(this.language=s.language=s.rules.language=n.language,this.lexer=s.lexer=Ne(s.language)),this.rules(n),this.lexer==="auto"){let r=this.detect(s.source);this.language=s.language=s.rules.language=r.language,this.lexer=s.lexer=Ne(r.language);}let f=pt(this.language),x=We.reportStats?Mt(this.language,this.lexer):null,l=s.document(f);if(s.error!==null)if(this.events.error.length>0){for(let r of this.events.error)r(s.error);return o}else {if(We.throwErrors)throw s.error;return o}let O=x===null?this.stats:this.stats=x(l.length);if(this.events.format.length>0){for(let r of this.events.format)if(r.call({get data(){return s.data}},{get output(){return o},get stats(){return O},get rules(){return s.rules}})===!1)return o}return l}parse(o,n){if(s.source=o,dt(n)&&("language"in n&&this.language!==n.language&&Fe("global","language",n.language)&&(this.language=s.language=s.rules.language=n.language,this.lexer=s.lexer=Ne(s.language)),this.rules(n)),this.lexer==="auto"){let r=this.detect(s.source);this.language=s.language=s.rules.language=r.language,this.lexer=s.lexer=Ne(r.language);}let f=pt(this.language),x=Mt(this.language,this.lexer),l=s.document(f,1),O=this.stats=x(s.count);if(this.events.parse.length>0){for(let r of this.events.parse)if(r({get data(){return s.data},get stats(){return O},get rules(){return s.rules}})===!1)return o}if(s.error!==null){if(this.events.error.length>0)for(let r of this.events.error)r(s.error);return []}return l}rules(o){if(De(o))return s.rules;let{language:n}=Ei(o,this.events);return this.language=n,this.lexer=s.lexer=Ne(n),this}liquid(o,n){return this.language=s.language=s.rules.language="liquid",this.lexer=s.lexer=Ne(s.language),this.format(o,n)}html(o,n){return this.language=s.language=s.rules.language="html",this.lexer=s.lexer=Ne(s.language),this.format(o,n)}xml(o,n){return this.language=s.language=s.rules.language="xml",this.lexer=s.lexer=Ne(s.language),this.format(o,n)}css(o,n){return this.language=s.language=s.rules.language="css",this.lexer=s.lexer=Ne(s.language),this.format(o,n)}json(o,n){return this.language=s.language=s.rules.language="json",this.lexer=s.lexer=Ne(s.language),this.format(o,n)}js(o,n){return this.language=s.language=s.rules.language="javascript",this.lexer=s.lexer=Ne(s.language),this.format(o,n)}ts(o,n){return this.language=s.language=s.rules.language="typescript",this.lexer=s.lexer=Ne(s.language),this.format(o,n)}};

module.exports = $i;
