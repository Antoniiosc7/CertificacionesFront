"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.executePlugins = executePlugins;
const rxjs_1 = require("rxjs");
const operators_1 = require("rxjs/operators");
/**
 *
 * @param data
 * @param entity
 * @param plugins
 */
function executePlugins(data, entity, plugins) {
    return plugins.reduce((acc, plugin) => acc.pipe((0, rxjs_1.switchMap)((data) => plugin.execute(data, entity)), (0, operators_1.catchError)((e) => {
        throw new Error(`Error while applying plugin "${plugin.id}" to entity "${entity.id}": ${e}`);
    })), (0, rxjs_1.of)(data));
}
//# sourceMappingURL=execute-plugins.js.map