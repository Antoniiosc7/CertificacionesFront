"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.compile = compile;
const rxjs_1 = require("rxjs");
const operators_1 = require("rxjs/operators");
const helpers_1 = require("../../helpers");
const error_handler_1 = require("../../operators/error-handler");
/**
 * Operator that compiles the source file only if it is a `NgDocFileEntity`
 */
function compile() {
    return (source) => source.pipe((0, operators_1.switchMap)((e) => {
        if ((0, helpers_1.isFileEntity)(e) && e.isReadyForBuild) {
            return e.compile().pipe((0, operators_1.map)(() => e), (0, error_handler_1.errorHandler)(e));
        }
        return (0, rxjs_1.of)(e);
    }));
}
//# sourceMappingURL=compile.js.map