import { animate, style, transition, trigger } from '@angular/animations';
import { NgIf } from '@angular/common';
import { ChangeDetectionStrategy, Component } from '@angular/core';
import { NG_DOC_NIGHT_THEME } from '@ng-doc/app/constants';
import { NgDocThemeService } from '@ng-doc/app/services';
import { NgDocButtonIconComponent, NgDocIconComponent, NgDocSmoothResizeComponent, NgDocTooltipDirective, } from '@ng-doc/ui-kit';
import * as i0 from "@angular/core";
import * as i1 from "@ng-doc/app/services";
export class NgDocThemeToggleComponent {
    constructor(themeService) {
        this.themeService = themeService;
        this.themes = [
            { name: 'Auto', theme: 'auto' },
            { name: 'Light', theme: undefined },
            { name: 'Dark', theme: NG_DOC_NIGHT_THEME },
        ];
    }
    get currentTheme() {
        if (this.themeService.isAutoThemeEnabled) {
            return this.themes[0];
        }
        const theme = this.themeService.currentTheme;
        return this.themes.find(({ theme: t }) => t === theme) ?? this.themes[0];
    }
    get nextTheme() {
        if (this.themeService.isAutoThemeEnabled) {
            return this.themes[1];
        }
        const index = this.themes.findIndex(({ theme }) => theme === this.themeService.currentTheme);
        return this.themes[(index + 1) % this.themes.length];
    }
    toggleTheme() {
        const { theme } = this.nextTheme;
        if (theme === 'auto') {
            this.themeService.enableAutoTheme(undefined, NG_DOC_NIGHT_THEME);
        }
        else {
            this.themeService.set(theme?.id);
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.1.0", ngImport: i0, type: NgDocThemeToggleComponent, deps: [{ token: i1.NgDocThemeService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.1.0", type: NgDocThemeToggleComponent, isStandalone: true, selector: "ng-doc-theme-toggle", ngImport: i0, template: "<button ng-doc-button-icon size=\"large\" (click)=\"toggleTheme()\" [ngDocTooltip]=\"tooltipContent\">\n\t<ng-template #tooltipContent>\n\t\t<ng-doc-smooth-resize [trigger]=\"nextTheme.name\">\n\t\t\tSet \"{{ nextTheme.name }}\" theme\n\t\t</ng-doc-smooth-resize>\n\t</ng-template>\n\t<ng-doc-icon\n\t\t[@switchIcon]=\"{ value: ':enter', params: { from: '-100%', to: '100%' } }\"\n\t\ticon=\"sun\"\n\t\t[size]=\"24\"\n\t\t*ngIf=\"nextTheme === themes[1]\"></ng-doc-icon>\n\t<ng-doc-icon\n\t\t[@switchIcon]=\"{ value: ':enter', params: { from: '-100%', to: '100%' } }\"\n\t\ticon=\"moon\"\n\t\t[size]=\"24\"\n\t\t*ngIf=\"nextTheme === themes[2]\"></ng-doc-icon>\n\t<div\n\t\tclass=\"letter\"\n\t\t[@switchIcon]=\"{ value: ':enter', params: { from: '-100%', to: '100%' } }\"\n\t\t*ngIf=\"nextTheme === themes[0]\">\n\t\tA\n\t</div>\n</button>\n", styles: [":host{display:inline-block;height:40px;width:40px}:host .letter{font-family:var(--ng-doc-font-family);font-variant:no-contextual;color:var(--ng-doc-text);line-height:var(--ng-doc-line-height);font-size:var(--ng-doc-font-size);font-weight:var(--ng-doc-font-weight);--ng-doc-font-size: 26px;--ng-doc-font-weight: 600}\n"], dependencies: [{ kind: "component", type: NgDocButtonIconComponent, selector: "button[ng-doc-button-icon], a[ng-doc-button-icon]", inputs: ["size", "rounded"] }, { kind: "directive", type: NgDocTooltipDirective, selector: "[ngDocTooltip]", inputs: ["ngDocTooltip", "delay", "displayOrigin", "pointerOrigin", "positions", "canOpen", "panelClass", "minHeight", "maxHeight", "height", "minWidth", "maxWidth", "width"], outputs: ["beforeOpen", "afterOpen", "beforeClose", "afterClose"], exportAs: ["ngDocTooltip"] }, { kind: "directive", type: NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: NgDocIconComponent, selector: "ng-doc-icon", inputs: ["icon", "customIcon", "size"] }, { kind: "component", type: NgDocSmoothResizeComponent, selector: "ng-doc-smooth-resize", inputs: ["trigger", "animateOpacity"] }], animations: [
            trigger('switchIcon', [
                transition(':enter', [
                    style({ transform: 'translateX({{from}})', position: 'absolute', opacity: 0 }),
                    animate('225ms cubic-bezier(0.4,0.0,0.2,1)', style({ transform: 'translateX(0%)', position: 'absolute', opacity: 1 })),
                ], { params: { from: '-100%' } }),
                transition(':leave', [
                    style({ transform: 'translateX(0%)', position: 'absolute', opacity: 1 }),
                    animate('225ms cubic-bezier(0.4,0.0,0.2,1)', style({ transform: 'translateX({{to}})', position: 'absolute', opacity: 0 })),
                ], { params: { to: '-100%' } }),
            ]),
        ], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.1.0", ngImport: i0, type: NgDocThemeToggleComponent, decorators: [{
            type: Component,
            args: [{ animations: [
                        trigger('switchIcon', [
                            transition(':enter', [
                                style({ transform: 'translateX({{from}})', position: 'absolute', opacity: 0 }),
                                animate('225ms cubic-bezier(0.4,0.0,0.2,1)', style({ transform: 'translateX(0%)', position: 'absolute', opacity: 1 })),
                            ], { params: { from: '-100%' } }),
                            transition(':leave', [
                                style({ transform: 'translateX(0%)', position: 'absolute', opacity: 1 }),
                                animate('225ms cubic-bezier(0.4,0.0,0.2,1)', style({ transform: 'translateX({{to}})', position: 'absolute', opacity: 0 })),
                            ], { params: { to: '-100%' } }),
                        ]),
                    ], selector: 'ng-doc-theme-toggle', changeDetection: ChangeDetectionStrategy.OnPush, standalone: true, imports: [
                        NgDocButtonIconComponent,
                        NgDocTooltipDirective,
                        NgIf,
                        NgDocIconComponent,
                        NgDocSmoothResizeComponent,
                    ], template: "<button ng-doc-button-icon size=\"large\" (click)=\"toggleTheme()\" [ngDocTooltip]=\"tooltipContent\">\n\t<ng-template #tooltipContent>\n\t\t<ng-doc-smooth-resize [trigger]=\"nextTheme.name\">\n\t\t\tSet \"{{ nextTheme.name }}\" theme\n\t\t</ng-doc-smooth-resize>\n\t</ng-template>\n\t<ng-doc-icon\n\t\t[@switchIcon]=\"{ value: ':enter', params: { from: '-100%', to: '100%' } }\"\n\t\ticon=\"sun\"\n\t\t[size]=\"24\"\n\t\t*ngIf=\"nextTheme === themes[1]\"></ng-doc-icon>\n\t<ng-doc-icon\n\t\t[@switchIcon]=\"{ value: ':enter', params: { from: '-100%', to: '100%' } }\"\n\t\ticon=\"moon\"\n\t\t[size]=\"24\"\n\t\t*ngIf=\"nextTheme === themes[2]\"></ng-doc-icon>\n\t<div\n\t\tclass=\"letter\"\n\t\t[@switchIcon]=\"{ value: ':enter', params: { from: '-100%', to: '100%' } }\"\n\t\t*ngIf=\"nextTheme === themes[0]\">\n\t\tA\n\t</div>\n</button>\n", styles: [":host{display:inline-block;height:40px;width:40px}:host .letter{font-family:var(--ng-doc-font-family);font-variant:no-contextual;color:var(--ng-doc-text);line-height:var(--ng-doc-line-height);font-size:var(--ng-doc-font-size);font-weight:var(--ng-doc-font-weight);--ng-doc-font-size: 26px;--ng-doc-font-weight: 600}\n"] }]
        }], ctorParameters: () => [{ type: i1.NgDocThemeService }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhlbWUtdG9nZ2xlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvYXBwL2NvbXBvbmVudHMvdGhlbWUtdG9nZ2xlL3RoZW1lLXRvZ2dsZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL2FwcC9jb21wb25lbnRzL3RoZW1lLXRvZ2dsZS90aGVtZS10b2dnbGUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQzFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN2QyxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25FLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBRTNELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3pELE9BQU8sRUFDTix3QkFBd0IsRUFDeEIsa0JBQWtCLEVBQ2xCLDBCQUEwQixFQUMxQixxQkFBcUIsR0FDckIsTUFBTSxnQkFBZ0IsQ0FBQzs7O0FBK0N4QixNQUFNLE9BQU8seUJBQXlCO0lBT3JDLFlBQStCLFlBQStCO1FBQS9CLGlCQUFZLEdBQVosWUFBWSxDQUFtQjtRQU4zQyxXQUFNLEdBQWtCO1lBQzFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFO1lBQy9CLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFO1lBQ25DLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsa0JBQWtCLEVBQUU7U0FDM0MsQ0FBQztJQUUrRCxDQUFDO0lBRWxFLElBQUksWUFBWTtRQUNmLElBQUksSUFBSSxD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QVUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUM7Z0NBQzlFLE9BQU8sQ0FDTixtQ0FBbUMsRUFDbkMsS0FBSyxDQUFDLEVBQUUsU0FBUyxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQ3hFOzZCQUNELEVBQ0QsRUFBRSxNQUFNLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUUsQ0FDN0I7NEJBQ0QsVUFBVSxDQUNULFFBQVEsRUFDUjtnQ0FDQyxLQUFLLENBQUMsRUFBRSxTQUFTLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUM7Z0NBQ3hFLE9BQU8sQ0FDTixtQ0FBbUMsRUFDbkMsS0FBSyxDQUFDLEVBQUUsU0FBUyxFQUFFLG9CQUFvQixFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQzVFOzZCQUNELEVBQ0QsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsQ0FDM0I7eUJBQ0QsQ0FBQztxQkFDRixZQUNTLHFCQUFxQixtQkFHZCx1QkFBdUIsQ0FBQyxNQUFNLGNBQ25DLElBQUksV0FDUDt3QkFDUix3QkFBd0I7d0JBQ3hCLHFCQUFxQjt3QkFDckIsSUFBSTt3QkFDSixrQkFBa0I7d0JBQ2xCLDBCQUEwQjtxQkFDMUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhbmltYXRlLCBzdHlsZSwgdHJhbnNpdGlvbiwgdHJpZ2dlciB9IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHsgTmdJZiB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOR19ET0NfTklHSFRfVEhFTUUgfSBmcm9tICdAbmctZG9jL2FwcC9jb25zdGFudHMnO1xuaW1wb3J0IHsgTmdEb2NUaGVtZSB9IGZyb20gJ0BuZy1kb2MvYXBwL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgTmdEb2NUaGVtZVNlcnZpY2UgfSBmcm9tICdAbmctZG9jL2FwcC9zZXJ2aWNlcyc7XG5pbXBvcnQge1xuXHROZ0RvY0J1dHRvbkljb25Db21wb25lbnQsXG5cdE5nRG9jSWNvbkNvbXBvbmVudCxcblx0TmdEb2NTbW9vdGhSZXNpemVDb21wb25lbnQsXG5cdE5nRG9jVG9vbHRpcERpcmVjdGl2ZSxcbn0gZnJvbSAnQG5nLWRvYy91aS1raXQnO1xuXG5pbnRlcmZhY2UgVG9nZ2xlVGhlbWUge1xuXHRuYW1lOiBzdHJpbmc7XG5cdHRoZW1lOiBOZ0RvY1RoZW1lIHwgJ2F1dG8nIHwgdW5kZWZpbmVkO1xufVxuXG5AQ29tcG9uZW50KHtcblx0YW5pbWF0aW9uczogW1xuXHRcdHRyaWdnZXIoJ3N3aXRjaEljb24nLCBbXG5cdFx0XHR0cmFuc2l0aW9uKFxuXHRcdFx0XHQnOmVudGVyJyxcblx0XHRcdFx0W1xuXHRcdFx0XHRcdHN0eWxlKHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCh7e2Zyb219fSknLCBwb3NpdGlvbjogJ2Fic29sdXRlJywgb3BhY2l0eTogMCB9KSxcblx0XHRcdFx0XHRhbmltYXRlKFxuXHRcdFx0XHRcdFx0JzIyNW1zIGN1YmljLWJlemllcigwLjQsMC4wLDAuMiwxKScsXG5cdFx0XHRcdFx0XHRzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMCUpJywgcG9zaXRpb246ICdhYnNvbHV0ZScsIG9wYWNpdHk6IDEgfSksXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0XSxcblx0XHRcdFx0eyBwYXJhbXM6IHsgZnJvbTogJy0xMDAlJyB9IH0sXG5cdFx0XHQpLFxuXHRcdFx0dHJhbnNpdGlvbihcblx0XHRcdFx0JzpsZWF2ZScsXG5cdFx0XHRcdFtcblx0XHRcdFx0XHRzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMCUpJywgcG9zaXRpb246ICdhYnNvbHV0ZScsIG9wYWNpdHk6IDEgfSksXG5cdFx0XHRcdFx0YW5pbWF0ZShcblx0XHRcdFx0XHRcdCcyMjVtcyBjdWJpYy1iZXppZXIoMC40LDAuMCwwLjIsMSknLFxuXHRcdFx0XHRcdFx0c3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKHt7dG99fSknLCBwb3NpdGlvbjogJ2Fic29sdXRlJywgb3BhY2l0eTogMCB9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHRdLFxuXHRcdFx0XHR7IHBhcmFtczogeyB0bzogJy0xMDAlJyB9IH0sXG5cdFx0XHQpLFxuXHRcdF0pLFxuXHRdLFxuXHRzZWxlY3RvcjogJ25nLWRvYy10aGVtZS10b2dnbGUnLFxuXHR0ZW1wbGF0ZVVybDogJy4vdGhlbWUtdG9nZ2xlLmNvbXBvbmVudC5odG1sJyxcblx0c3R5bGVVcmxzOiBbJy4vdGhlbWUtdG9nZ2xlLmNvbXBvbmVudC5zY3NzJ10sXG5cdGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuXHRzdGFuZGFsb25lOiB0cnVlLFxuXHRpbXBvcnRzOiBbXG5cdFx0TmdEb2NCdXR0b25JY29uQ29tcG9uZW50LFxuXHRcdE5nRG9jVG9vbHRpcERpcmVjdGl2ZSxcblx0XHROZ0lmLFxuXHRcdE5nRG9jSWNvbkNvbXBvbmVudCxcblx0XHROZ0RvY1Ntb290aFJlc2l6ZUNvbXBvbmVudCxcblx0XSxcbn0pXG5leHBvcnQgY2xhc3MgTmdEb2NUaGVtZVRvZ2dsZUNvbXBvbmVudCB7XG5cdHByb3RlY3RlZCByZWFkb25seSB0aGVtZXM6IFRvZ2dsZVRoZW1lW10gPSBbXG5cdFx0eyBuYW1lOiAnQXV0bycsIHRoZW1lOiAnYXV0bycgfSxcblx0XHR7IG5hbWU6ICdMaWdodCcsIHRoZW1lOiB1bmRlZmluZWQgfSxcblx0XHR7IG5hbWU6ICdEYXJrJywgdGhlbWU6IE5HX0RPQ19OSUdIVF9USEVNRSB9LFxuXHRdO1xuXG5cdGNvbnN0cnVjdG9yKHByb3RlY3RlZCByZWFkb25seSB0aGVtZVNlcnZpY2U6IE5nRG9jVGhlbWVTZXJ2aWNlKSB7fVxuXG5cdGdldCBjdXJyZW50VGhlbWUoKTogVG9nZ2xlVGhlbWUge1xuXHRcdGlmICh0aGlzLnRoZW1lU2VydmljZS5pc0F1dG9UaGVtZUVuYWJsZWQpIHtcblx0XHRcdHJldHVybiB0aGlzLnRoZW1lc1swXTtcblx0XHR9XG5cblx0XHRjb25zdCB0aGVtZSA9IHRoaXMudGhlbWVTZXJ2aWNlLmN1cnJlbnRUaGVtZTtcblxuXHRcdHJldHVybiB0aGlzLnRoZW1lcy5maW5kKCh7IHRoZW1lOiB0IH0pID0+IHQgPT09IHRoZW1lKSA/PyB0aGlzLnRoZW1lc1swXTtcblx0fVxuXG5cdGdldCBuZXh0VGhlbWUoKTogVG9nZ2xlVGhlbWUge1xuXHRcdGlmICh0aGlzLnRoZW1lU2VydmljZS5pc0F1dG9UaGVtZUVuYWJsZWQpIHtcblx0XHRcdHJldHVybiB0aGlzLnRoZW1lc1sxXTtcblx0XHR9XG5cblx0XHRjb25zdCBpbmRleCA9IHRoaXMudGhlbWVzLmZpbmRJbmRleCgoeyB0aGVtZSB9KSA9PiB0aGVtZSA9PT0gdGhpcy50aGVtZVNlcnZpY2UuY3VycmVudFRoZW1lKTtcblxuXHRcdHJldHVybiB0aGlzLnRoZW1lc1soaW5kZXggKyAxKSAlIHRoaXMudGhlbWVzLmxlbmd0aF07XG5cdH1cblxuXHR0b2dnbGVUaGVtZSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IHRoZW1lIH0gPSB0aGlzLm5leHRUaGVtZTtcblxuXHRcdGlmICh0aGVtZSA9PT0gJ2F1dG8nKSB7XG5cdFx0XHR0aGlzLnRoZW1lU2VydmljZS5lbmFibGVBdXRvVGhlbWUodW5kZWZpbmVkLCBOR19ET0NfTklHSFRfVEhFTUUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnRoZW1lU2VydmljZS5zZXQodGhlbWU/LmlkKTtcblx0XHR9XG5cdH1cbn1cbiIsIjxidXR0b24gbmctZG9jLWJ1dHRvbi1pY29uIHNpemU9XCJsYXJnZVwiIChjbGljayk9XCJ0b2dnbGVUaGVtZSgpXCIgW25nRG9jVG9vbHRpcF09XCJ0b29sdGlwQ29udGVudFwiPlxuXHQ8bmctdGVtcGxhdGUgI3Rvb2x0aXBDb250ZW50PlxuXHRcdDxuZy1kb2Mtc21vb3RoLXJlc2l6ZSBbdHJpZ2dlcl09XCJuZXh0VGhlbWUubmFtZVwiPlxuXHRcdFx0U2V0IFwie3sgbmV4dFRoZW1lLm5hbWUgfX1cIiB0aGVtZVxuXHRcdDwvbmctZG9jLXNtb290aC1yZXNpemU+XG5cdDwvbmctdGVtcGxhdGU+XG5cdDxuZy1kb2MtaWNvblxuXHRcdFtAc3dpdGNoSWNvbl09XCJ7IHZhbHVlOiAnOmVudGVyJywgcGFyYW1zOiB7IGZyb206ICctMTAwJScsIHRvOiAnMTAwJScgfSB9XCJcblx0XHRpY29uPVwic3VuXCJcblx0XHRbc2l6ZV09XCIyNFwiXG5cdFx0Km5nSWY9XCJuZXh0VGhlbWUgPT09IHRoZW1lc1sxXVwiPjwvbmctZG9jLWljb24+XG5cdDxuZy1kb2MtaWNvblxuXHRcdFtAc3dpdGNoSWNvbl09XCJ7IHZhbHVlOiAnOmVudGVyJywgcGFyYW1zOiB7IGZyb206ICctMTAwJScsIHRvOiAnMTAwJScgfSB9XCJcblx0XHRpY29uPVwibW9vblwiXG5cdFx0W3NpemVdPVwiMjRcIlxuXHRcdCpuZ0lmPVwibmV4dFRoZW1lID09PSB0aGVtZXNbMl1cIj48L25nLWRvYy1pY29uPlxuXHQ8ZGl2XG5cdFx0Y2xhc3M9XCJsZXR0ZXJcIlxuXHRcdFtAc3dpdGNoSWNvbl09XCJ7IHZhbHVlOiAnOmVudGVyJywgcGFyYW1zOiB7IGZyb206ICctMTAwJScsIHRvOiAnMTAwJScgfSB9XCJcblx0XHQqbmdJZj1cIm5leHRUaGVtZSA9PT0gdGhlbWVzWzBdXCI+XG5cdFx0QVxuXHQ8L2Rpdj5cbjwvYnV0dG9uPlxuIl19